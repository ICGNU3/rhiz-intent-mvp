"use strict";exports.id=161,exports.ids=[161],exports.modules={15090:(e,t,i)=>{i.d(t,{s:()=>Column});var n=i(16591);let Column=class Column{constructor(e,t){this.enumValues=void 0,this.generated=void 0,this.generatedIdentity=void 0,this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static{this[n.Q]="Column"}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}},16591:(e,t,i)=>{i.d(t,{Q:()=>n,is:()=>is});let n=Symbol.for("drizzle:entityKind");function is(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,n))throw Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let i=Object.getPrototypeOf(e).constructor;if(i)for(;i;){if(n in i&&i[n]===t[n])return!0;i=Object.getPrototypeOf(i)}return!1}Symbol.for("drizzle:hasOwnEntityKind")},50161:(e,t,i)=>{i.d(t,{eq:()=>eq,xD:()=>and});var n=i(15090),r=i(16591),s=i(69287),a=i(14929);function bindIfParam(e,t){return!(0,a._B)(t)||(0,a.zl)(e)||(0,r.is)(e,a.dO)||(0,r.is)(e,a.Vm)||(0,r.is)(e,n.s)||(0,r.is)(e,s.iA)||(0,r.is)(e,a.G7)?e:new a.dO(e,t)}let eq=(e,t)=>a.i6`${e} = ${bindIfParam(t,e)}`;function and(...e){let t=e.filter(e=>void 0!==e);return 0===t.length?void 0:new a.$s(1===t.length?t:[new a.Zm("("),a.i6.join(t,new a.Zm(" and ")),new a.Zm(")")])}},14929:(e,t,i)=>{let n,r;i.d(t,{dO:()=>Param,Vm:()=>Placeholder,$s:()=>SQL,Zm:()=>StringChunk,G7:()=>View,_B:()=>isDriverValueEncoder,zl:()=>isSQLWrapper,i6:()=>sql});var s=i(16591);let ColumnBuilder=class ColumnBuilder{static{this[s.Q]="ColumnBuilder"}constructor(e,t,i){this.$default=this.$defaultFn,this.$onUpdate=this.$onUpdateFn,this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}};var a=i(15090),u=i(74105);let ForeignKeyBuilder=class ForeignKeyBuilder{static{this[s.Q]="PgForeignKeyBuilder"}constructor(e,t){this._onUpdate="no action",this._onDelete="no action",this.reference=()=>{let{name:t,columns:i,foreignColumns:n}=e();return{name:t,columns:i,foreignTable:n[0].table,foreignColumns:n}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new ForeignKey(e,this)}};let ForeignKey=class ForeignKey{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static{this[s.Q]="PgForeignKey"}getName(){let{name:e,columns:t,foreignColumns:i}=this.reference(),n=t.map(e=>e.name),r=i.map(e=>e.name),s=[this.table[u.m],...n,i[0].table[u.m],...r];return e??`${s.join("_")}_fk`}};function iife(e,...t){return e(...t)}function uniqueKeyName(e,t){return`${e[u.m]}_${t.join("_")}_unique`}let UniqueConstraintBuilder=class UniqueConstraintBuilder{constructor(e,t){this.nullsNotDistinctConfig=!1,this.name=t,this.columns=e}static{this[s.Q]="PgUniqueConstraintBuilder"}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new UniqueConstraint(e,this.columns,this.nullsNotDistinctConfig,this.name)}};let UniqueOnConstraintBuilder=class UniqueOnConstraintBuilder{static{this[s.Q]="PgUniqueOnConstraintBuilder"}constructor(e){this.name=e}on(...e){return new UniqueConstraintBuilder(e,this.name)}};let UniqueConstraint=class UniqueConstraint{constructor(e,t,i,n){this.nullsNotDistinct=!1,this.table=e,this.columns=t,this.name=n??uniqueKeyName(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=i}static{this[s.Q]="PgUniqueConstraint"}getName(){return this.name}};function parsePgArrayValue(e,t,i){for(let n=t;n<e.length;n++){let r=e[n];if("\\"===r){n++;continue}if('"'===r)return[e.slice(t,n).replace(/\\/g,""),n+1];if(!i&&(","===r||"}"===r))return[e.slice(t,n).replace(/\\/g,""),n]}return[e.slice(t).replace(/\\/g,""),e.length]}function parsePgNestedArray(e,t=0){let i=[],n=t,r=!1;for(;n<e.length;){let s=e[n];if(","===s){(r||n===t)&&i.push(""),r=!0,n++;continue}if(r=!1,"\\"===s){n+=2;continue}if('"'===s){let[t,r]=parsePgArrayValue(e,n+1,!0);i.push(t),n=r;continue}if("}"===s)return[i,n+1];if("{"===s){let[t,r]=parsePgNestedArray(e,n+1);i.push(t),n=r;continue}let[a,u]=parsePgArrayValue(e,n,!1);i.push(a),n=u}return[i,n]}function parsePgArray(e){let[t]=parsePgNestedArray(e,1);return t}function makePgArray(e){return`{${e.map(e=>Array.isArray(e)?makePgArray(e):"string"==typeof e?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}let PgColumnBuilder=class PgColumnBuilder extends ColumnBuilder{static{this[s.Q]="PgColumnBuilder"}array(e){return new PgArrayBuilder(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:i,actions:n})=>iife((i,n)=>{let r=new ForeignKeyBuilder(()=>{let t=i();return{columns:[e],foreignColumns:[t]}});return n.onUpdate&&r.onUpdate(n.onUpdate),n.onDelete&&r.onDelete(n.onDelete),r.build(t)},i,n))}buildExtraConfigColumn(e){return new ExtraConfigColumn(e,this.config)}constructor(...e){super(...e),this.foreignKeyConfigs=[]}};let PgColumn=class PgColumn extends a.s{constructor(e,t){t.uniqueName||(t.uniqueName=uniqueKeyName(e,[t.name])),super(e,t),this.table=e}static{this[s.Q]="PgColumn"}};let ExtraConfigColumn=class ExtraConfigColumn extends PgColumn{static{this[s.Q]="ExtraConfigColumn"}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}constructor(...e){super(...e),this.indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass},this.defaultConfig={order:"asc",nulls:"last",opClass:void 0}}};let IndexedColumn=class IndexedColumn{static{this[s.Q]="IndexedColumn"}constructor(e,t,i,n){this.name=e,this.keyAsName=t,this.type=i,this.indexConfig=n}};let PgArrayBuilder=class PgArrayBuilder extends PgColumnBuilder{static{this[s.Q]="PgArrayBuilder"}constructor(e,t,i){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=i}build(e){let t=this.config.baseBuilder.build(e);return new PgArray(e,this.config,t)}};let PgArray=class PgArray extends PgColumn{constructor(e,t,i,n){super(e,t),this.baseColumn=i,this.range=n,this.size=t.size}static{this[s.Q]="PgArray"}getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=parsePgArray(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let i=e.map(e=>null===e?null:(0,s.is)(this.baseColumn,PgArray)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?i:makePgArray(i)}};let PgEnumObjectColumnBuilder=class PgEnumObjectColumnBuilder extends PgColumnBuilder{static{this[s.Q]="PgEnumObjectColumnBuilder"}constructor(e,t){super(e,"string","PgEnumObjectColumn"),this.config.enum=t}build(e){return new PgEnumObjectColumn(e,this.config)}};let PgEnumObjectColumn=class PgEnumObjectColumn extends PgColumn{static{this[s.Q]="PgEnumObjectColumn"}constructor(e,t){super(e,t),this.enumValues=this.config.enum.enumValues,this.enum=t.enum}getSQLType(){return this.enum.enumName}};let l=Symbol.for("drizzle:isPgEnum");function isPgEnum(e){return!!e&&"function"==typeof e&&l in e&&!0===e[l]}let PgEnumColumnBuilder=class PgEnumColumnBuilder extends PgColumnBuilder{static{this[s.Q]="PgEnumColumnBuilder"}constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new PgEnumColumn(e,this.config)}};let PgEnumColumn=class PgEnumColumn extends PgColumn{static{this[s.Q]="PgEnumColumn"}constructor(e,t){super(e,t),this.enum=this.config.enum,this.enumValues=this.config.enum.enumValues,this.enum=t.enum}getSQLType(){return this.enum.enumName}};let Subquery=class Subquery{static{this[s.Q]="Subquery"}constructor(e,t,i,n=!1,r=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:i,isWith:n,usedTables:r}}};let WithSubquery=class WithSubquery extends Subquery{static{this[s.Q]="WithSubquery"}};let o={startActiveSpan:(e,t)=>n?(r||(r=n.trace.getTracer("drizzle-orm","0.44.4")),iife((i,n)=>n.startActiveSpan(e,e=>{try{return t(e)}catch(t){throw e.setStatus({code:i.SpanStatusCode.ERROR,message:t instanceof Error?t.message:"Unknown error"}),t}finally{e.end()}}),n,r)):t()},h=Symbol.for("drizzle:ViewBaseConfig");var m=i(69287);let FakePrimitiveParam=class FakePrimitiveParam{static{this[s.Q]="FakePrimitiveParam"}};function isSQLWrapper(e){return null!=e&&"function"==typeof e.getSQL}function mergeQueries(e){let t={sql:"",params:[]};for(let i of e)t.sql+=i.sql,t.params.push(...i.params),i.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...i.typings));return t}let StringChunk=class StringChunk{static{this[s.Q]="StringChunk"}constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new SQL([this])}};let SQL=class SQL{constructor(e){for(let t of(this.decoder=c,this.shouldInlineParams=!1,this.usedTables=[],this.queryChunks=e,e))if((0,s.is)(t,m.iA)){let e=t[m.iA.Symbol.Schema];this.usedTables.push(void 0===e?t[m.iA.Symbol.Name]:e+"."+t[m.iA.Symbol.Name])}}static{this[s.Q]="SQL"}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return o.startActiveSpan("drizzle.buildSQL",t=>{let i=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,t){let i=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:n,escapeName:r,escapeParam:u,prepareTyping:l,inlineParams:o,paramStartIndex:c}=i;return mergeQueries(e.map(e=>{if((0,s.is)(e,StringChunk))return{sql:e.value.join(""),params:[]};if((0,s.is)(e,Name))return{sql:r(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new StringChunk("(")];for(let[i,n]of e.entries())t.push(n),i<e.length-1&&t.push(new StringChunk(", "));return t.push(new StringChunk(")")),this.buildQueryFromSourceParams(t,i)}if((0,s.is)(e,SQL))return this.buildQueryFromSourceParams(e.queryChunks,{...i,inlineParams:o||e.shouldInlineParams});if((0,s.is)(e,m.iA)){let t=e[m.iA.Symbol.Schema],i=e[m.iA.Symbol.Name];return{sql:void 0===t||e[m.Zk]?r(i):r(t)+"."+r(i),params:[]}}if((0,s.is)(e,a.s)){let i=n.getColumnCasing(e);if("indexes"===t.invokeSource)return{sql:r(i),params:[]};let s=e.table[m.iA.Symbol.Schema];return{sql:e.table[m.Zk]||void 0===s?r(e.table[m.iA.Symbol.Name])+"."+r(i):r(s)+"."+r(e.table[m.iA.Symbol.Name])+"."+r(i),params:[]}}if((0,s.is)(e,View)){let t=e[h].schema,i=e[h].name;return{sql:void 0===t||e[h].isAlias?r(i):r(t)+"."+r(i),params:[]}}if((0,s.is)(e,Param)){if((0,s.is)(e.value,Placeholder))return{sql:u(c.value++,e),params:[e],typings:["none"]};let t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if((0,s.is)(t,SQL))return this.buildQueryFromSourceParams([t],i);if(o)return{sql:this.mapInlineParam(t,i),params:[]};let n=["none"];return l&&(n=[l(e.encoder)]),{sql:u(c.value++,t),params:[t],typings:n}}return(0,s.is)(e,Placeholder)?{sql:u(c.value++,e),params:[e],typings:["none"]}:(0,s.is)(e,SQL.Aliased)&&void 0!==e.fieldAlias?{sql:r(e.fieldAlias),params:[]}:(0,s.is)(e,Subquery)?e._.isWith?{sql:r(e._.alias),params:[]}:this.buildQueryFromSourceParams([new StringChunk("("),e._.sql,new StringChunk(") "),new Name(e._.alias)],i):isPgEnum(e)?e.schema?{sql:r(e.schema)+"."+r(e.enumName),params:[]}:{sql:r(e.enumName),params:[]}:isSQLWrapper(e)?e.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([e.getSQL()],i):this.buildQueryFromSourceParams([new StringChunk("("),e.getSQL(),new StringChunk(")")],i):o?{sql:this.mapInlineParam(e,i),params:[]}:{sql:u(c.value++,e),params:[e],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let i=e.toString();return"[object Object]"===i?t(JSON.stringify(e)):t(i)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new SQL.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};let Name=class Name{constructor(e){this.value=e}static{this[s.Q]="Name"}getSQL(){return new SQL([this])}};function isDriverValueEncoder(e){return"object"==typeof e&&null!==e&&"mapToDriverValue"in e&&"function"==typeof e.mapToDriverValue}let c={mapFromDriverValue:e=>e},d={mapToDriverValue:e=>e};({...c,...d});let Param=class Param{constructor(e,t=d){this.value=e,this.encoder=t}static{this[s.Q]="Param"}getSQL(){return new SQL([this])}};function sql(e,...t){let i=[];for(let[n,r]of((t.length>0||e.length>0&&""!==e[0])&&i.push(new StringChunk(e[0])),t.entries()))i.push(r,new StringChunk(e[n+1]));return new SQL(i)}(e=>{function empty(){return new SQL([])}function fromList(e){return new SQL(e)}function raw(e){return new SQL([new StringChunk(e)])}function join(e,t){let i=[];for(let[n,r]of e.entries())n>0&&void 0!==t&&i.push(t),i.push(r);return new SQL(i)}function identifier(e){return new Name(e)}function placeholder2(e){return new Placeholder(e)}function param2(e,t){return new Param(e,t)}e.empty=empty,e.fromList=fromList,e.raw=raw,e.join=join,e.identifier=identifier,e.placeholder=placeholder2,e.param=param2})(sql||(sql={})),(e=>{let Aliased=class Aliased{constructor(e,t){this.isSelectionField=!1,this.sql=e,this.fieldAlias=t}static{this[s.Q]="SQL.Aliased"}getSQL(){return this.sql}clone(){return new Aliased(this.sql,this.fieldAlias)}};e.Aliased=Aliased})(SQL||(SQL={}));let Placeholder=class Placeholder{constructor(e){this.name=e}static{this[s.Q]="Placeholder"}getSQL(){return new SQL([this])}};let f=Symbol.for("drizzle:IsDrizzleView");let View=class View{static{this[s.Q]="View"}constructor({name:e,schema:t,selectedFields:i,query:n}){this[f]=!0,this[h]={name:e,originalName:e,schema:t,selectedFields:i,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new SQL([this])}};a.s.prototype.getSQL=function(){return new SQL([this])},m.iA.prototype.getSQL=function(){return new SQL([this])},Subquery.prototype.getSQL=function(){return new SQL([this])}},69287:(e,t,i)=>{i.d(t,{Zk:()=>h,iA:()=>Table});var n=i(16591),r=i(74105);let s=Symbol.for("drizzle:Schema"),a=Symbol.for("drizzle:Columns"),u=Symbol.for("drizzle:ExtraConfigColumns"),l=Symbol.for("drizzle:OriginalName"),o=Symbol.for("drizzle:BaseName"),h=Symbol.for("drizzle:IsAlias"),m=Symbol.for("drizzle:ExtraConfigBuilder"),c=Symbol.for("drizzle:IsDrizzleTable");let Table=class Table{static{this[n.Q]="Table"}static{this.Symbol={Name:r.m,Schema:s,OriginalName:l,Columns:a,ExtraConfigColumns:u,BaseName:o,IsAlias:h,ExtraConfigBuilder:m}}constructor(e,t,i){this[h]=!1,this[c]=!0,this[m]=void 0,this[r.m]=this[l]=e,this[s]=t,this[o]=i}}},74105:(e,t,i)=>{i.d(t,{m:()=>n});let n=Symbol.for("drizzle:Name")}};