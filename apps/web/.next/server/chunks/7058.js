"use strict";exports.id=7058,exports.ids=[7058],exports.modules={37058:(e,t,r)=>{r.d(t,{Ax:()=>u,Cq:()=>p,I_:()=>isAIConfigured,KR:()=>transcribeAudio,gc:()=>generateGraphInsights,iS:()=>extractFromText,wA:()=>rankSuggestions,xx:()=>getModelInfo});var n=r(80059),o=r(16956),i=r(94192),s=r(68332),a=r(14333);r(66069);let l=(0,n.J)({apiKey:process.env.OPENAI_API_KEY||""}),c=(0,o.D)({apiKey:process.env.ANTHROPIC_API_KEY||""}),p={gpt4:l("gpt-4-turbo-preview"),gpt35:l("gpt-3.5-turbo"),whisper:l("whisper-1"),claude3:process.env.ANTHROPIC_API_KEY?c("claude-3-sonnet-20240229"):null,get default(){if(process.env.OPENAI_API_KEY)return l("gpt-3.5-turbo");if(process.env.ANTHROPIC_API_KEY)return c("claude-3-sonnet-20240229");return null},get backup(){if(process.env.ANTHROPIC_API_KEY)return c("claude-3-sonnet-20240229");if(process.env.OPENAI_API_KEY)return l("gpt-3.5-turbo");return null}},u={people:s.Ry({people:s.IX(s.Ry({fullName:s.Z_().describe("Full name of the person"),role:s.Z_().optional().describe("Their job title or role"),company:s.Z_().optional().describe("Company they work at"),email:s.Z_().email().optional().describe("Email address if mentioned"),context:s.Z_().describe("Context in which they were mentioned")}))}),insights:s.Ry({insights:s.IX(s.Ry({type:s.Km(["opportunity","action_item","follow_up","introduction"]),title:s.Z_().describe("Brief title of the insight"),description:s.Z_().describe("Detailed description"),priority:s.Km(["low","medium","high"]),relatedPeople:s.IX(s.Z_()).optional()}))}),goals:s.Ry({goals:s.IX(s.Ry({type:s.Km(["hire","fundraise","sell","learn","connect"]),title:s.Z_(),description:s.Z_(),timeframe:s.Z_().optional(),requirements:s.IX(s.Z_()).optional()}))}),relationships:s.Ry({relationships:s.IX(s.Ry({person1:s.Z_(),person2:s.Z_(),type:s.Km(["colleague","friend","advisor","investor","customer","partner"]),strength:s.Rx().min(1).max(10),context:s.Z_()}))})};async function transcribeAudio(e){if(!process.env.OPENAI_API_KEY)return a.k.debug("No OpenAI API key, returning mock transcription",{component:"ai",operation:"transcribeAudio"}),"Mock transcription: Discussed project timeline with Sarah Chen and Mike Rodriguez. They can help with frontend and backend respectively.";try{let t=new Blob([e],{type:"audio/webm"}),r=new FormData;r.append("file",t,"audio.webm"),r.append("model","whisper-1");let n=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${process.env.OPENAI_API_KEY}`},body:r});if(!n.ok)throw Error(`Transcription failed: ${n.statusText}`);let o=await n.json();return o.text}catch(e){return a.k.error("Transcription error",e,{component:"ai",operation:"transcribeAudio"}),"Transcription failed. Please try again."}}async function extractFromText(e,t,r,n=3){if(!e?.trim())return a.k.warn("Empty text provided for extraction",{component:"ai",operation:"extractFromText"}),null;let o=e.substring(0,5e4),s=null;for(let e=0;e<n;e++){let l=0===e?p.default:p.backup;if(!l){a.k.debug("No AI model available",{component:"ai",operation:"extractFromText",attempt:e});continue}try{let e=new AbortController,n=setTimeout(()=>e.abort(),45e3),{object:s}=await (0,i.jA)({model:l,schema:t,prompt:o,system:r,abortSignal:e.signal});clearTimeout(n);let a=t.parse(s);return a}catch(t){s=t,a.k.warn(`AI extraction attempt ${e+1} failed`,{component:"ai",operation:"extractFromText",attempt:e+1,maxRetries:n,error:t instanceof Error?t.message:String(t)}),e<n-1&&await new Promise(t=>setTimeout(t,1e3*Math.pow(2,e)))}}return a.k.error("All extraction attempts failed",s||void 0,{component:"ai",operation:"extractFromText"}),null}async function generateGraphInsights(e,t){if(!p.default)return[];try{let r=`
      Analyze this network graph data and active goals to generate actionable insights:
      
      Graph Data: ${JSON.stringify(e)}
      Active Goals: ${JSON.stringify(t)}
      
      Generate insights about:
      1. Network gaps that need filling
      2. Potential valuable introductions
      3. Dormant ties to reactivate
      4. Goal alignment opportunities
    `,{text:n}=await (0,i._4)({model:p.default,prompt:r,system:"You are a network analysis expert. Generate actionable insights from relationship data."});return parseInsightsFromText(n)}catch(e){return a.k.error("Insight generation error",e,{component:"ai",operation:"generateGraphInsights"}),[]}}function parseInsightsFromText(e){let t=[],r=e.split("\n");for(let e of r)(e.includes("Gap:")||e.includes("Opportunity:")||e.includes("Introduction:"))&&t.push({type:"insight",title:e.substring(0,50),description:e,confidence:.8});return t}async function rankSuggestions(e,t){if(!p.default||0===e.length)return e;try{let{object:r}=await (0,i.jA)({model:p.default,schema:s.Ry({rankedSuggestions:s.IX(s.Ry({id:s.Z_(),score:s.Rx().min(0).max(100),reasoning:s.Z_()}))}),prompt:`
        Rank these suggestions based on user context:
        Suggestions: ${JSON.stringify(e)}
        User Context: ${JSON.stringify(t)}
      `,system:"You are an expert at ranking professional networking suggestions."});return e.map(e=>{let t=r.rankedSuggestions.find(t=>t.id===e.id);return{...e,aiScore:t?.score||e.score,aiReasoning:t?.reasoning}}).sort((e,t)=>(t.aiScore||t.score)-(e.aiScore||e.score))}catch(t){return a.k.error("Ranking error",t,{component:"ai",operation:"rankSuggestions"}),e}}function isAIConfigured(){return!!(process.env.OPENAI_API_KEY||process.env.ANTHROPIC_API_KEY)}function getModelInfo(){return{configured:isAIConfigured(),provider:process.env.OPENAI_API_KEY?"openai":process.env.ANTHROPIC_API_KEY?"anthropic":"none",model:p.default?"active":"inactive"}}},66069:(e,t,r)=>{r.d(t,{IQ:()=>n,aI:()=>o,gi:()=>i,pJ:()=>s}),process.env.NEXT_PUBLIC_AI_ENABLED,process.env.NEXT_PUBLIC_VOICE_ENABLED,process.env.NEXT_PUBLIC_ANALYTICS_ENABLED,process.env.NEXT_PUBLIC_INTEGRATIONS_ENABLED;let n={RAISE_SEED:"raise_seed",HIRE_ENGINEER:"hire_engineer",HIRE_DESIGNER:"hire_designer",HIRE_SALES:"hire_sales",FIND_INVESTOR:"find_investor",FIND_CUSTOMER:"find_customer",LEARN_SKILL:"learn_skill",CONNECT:"connect"},o={CAPTURE_NOTE:"capture_note",SET_GOAL:"set_goal",FIND_PEOPLE:"find_people",SUGGEST_INTROS:"suggest_intros",SCHEDULE_FOLLOWUP:"schedule_followup",ADD_REMINDER:"add_reminder",CLARIFY:"clarify"},i={POSITIVE:"positive",NEUTRAL:"neutral",NEGATIVE:"negative"},s={LOW:"low",MEDIUM:"medium",HIGH:"high"}},14333:(e,t,r)=>{var n;r.d(t,{k:()=>o}),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(n||(n={}));let Logger=class Logger{constructor(){this.level=1,this.isDevelopment=!1}formatMessage(e,t,r){let n=new Date().toISOString(),o=r?` ${JSON.stringify(r)}`:"";return`[${n}] ${e}: ${t}${o}`}shouldLog(e){return e>=this.level}debug(e,t){this.shouldLog(0)&&this.isDevelopment&&console.log(this.formatMessage("DEBUG",e,t))}info(e,t){this.shouldLog(1)&&console.log(this.formatMessage("INFO",e,t))}warn(e,t){this.shouldLog(2)&&console.warn(this.formatMessage("WARN",e,t))}error(e,t,r){if(this.shouldLog(3)){let n={...r,error:t?.message,stack:t?.stack};console.error(this.formatMessage("ERROR",e,n))}}api(e,t,r,n,o){this.info(`API ${t} ${e} - ${r}${n?` (${n}ms)`:""}`,{...o,component:"api",route:e,method:t,status:r,duration:n})}ai(e,t,r,n){this.info(`AI ${e}${t?` (${t})`:""}${r?` (${r}ms)`:""}`,{...n,component:"ai",operation:e,model:t,duration:r})}user(e,t,r,n){this.info(`User ${t}`,{...n,component:"user",userId:e,action:t,details:r})}};let o=new Logger}};