"use strict";exports.id=7058,exports.ids=[7058],exports.modules={37058:(e,t,r)=>{r.d(t,{Ax:()=>u,Cq:()=>l,I_:()=>isAIConfigured,KR:()=>transcribeAudio,gc:()=>generateGraphInsights,iS:()=>extractFromText,wA:()=>rankSuggestions,xx:()=>getModelInfo});var n=r(80059),i=r(16956),o=r(94192),a=r(68332),s=r(14333);r(66069);let p=(0,n.J)({apiKey:process.env.OPENAI_API_KEY||""}),c=(0,i.D)({apiKey:process.env.ANTHROPIC_API_KEY||""}),l={gpt4:p("gpt-4-turbo-preview"),gpt35:p("gpt-3.5-turbo"),whisper:p("whisper-1"),claude3:process.env.ANTHROPIC_API_KEY?c("claude-3-sonnet-20240229"):null,get default(){if(process.env.OPENAI_API_KEY)return p("gpt-3.5-turbo");if(process.env.ANTHROPIC_API_KEY)return c("claude-3-sonnet-20240229");return null},get backup(){if(process.env.ANTHROPIC_API_KEY)return c("claude-3-sonnet-20240229");if(process.env.OPENAI_API_KEY)return p("gpt-3.5-turbo");return null}},u={people:a.Ry({people:a.IX(a.Ry({fullName:a.Z_().describe("Full name of the person"),role:a.Z_().optional().describe("Their job title or role"),company:a.Z_().optional().describe("Company they work at"),email:a.Z_().email().optional().describe("Email address if mentioned"),context:a.Z_().describe("Context in which they were mentioned")}))}),insights:a.Ry({insights:a.IX(a.Ry({type:a.Km(["opportunity","action_item","follow_up","introduction"]),title:a.Z_().describe("Brief title of the insight"),description:a.Z_().describe("Detailed description"),priority:a.Km(["low","medium","high"]),relatedPeople:a.IX(a.Z_()).optional()}))}),goals:a.Ry({goals:a.IX(a.Ry({type:a.Km(["hire","fundraise","sell","learn","connect"]),title:a.Z_(),description:a.Z_(),timeframe:a.Z_().optional(),requirements:a.IX(a.Z_()).optional()}))}),relationships:a.Ry({relationships:a.IX(a.Ry({person1:a.Z_(),person2:a.Z_(),type:a.Km(["colleague","friend","advisor","investor","customer","partner"]),strength:a.Rx().min(1).max(10),context:a.Z_()}))})};async function transcribeAudio(e){if(!process.env.OPENAI_API_KEY)return s.k.debug("No OpenAI API key, returning mock transcription",{component:"ai",operation:"transcribeAudio"}),"Mock transcription: Discussed project timeline with Sarah Chen and Mike Rodriguez. They can help with frontend and backend respectively.";try{let t=new Blob([e],{type:"audio/webm"}),r=new FormData;r.append("file",t,"audio.webm"),r.append("model","whisper-1");let n=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${process.env.OPENAI_API_KEY}`},body:r});if(!n.ok)throw Error(`Transcription failed: ${n.statusText}`);let i=await n.json();return i.text}catch(e){return s.k.error("Transcription error",e,{component:"ai",operation:"transcribeAudio"}),"Transcription failed. Please try again."}}async function extractFromText(e,t,r,n=3){if(!e?.trim())return s.k.warn("Empty text provided for extraction",{component:"ai",operation:"extractFromText"}),null;let i=e.substring(0,5e4),a=null;for(let e=0;e<n;e++){let p=0===e?l.default:l.backup;if(!p){s.k.debug("No AI model available",{component:"ai",operation:"extractFromText",attempt:e});continue}try{let e=new AbortController,n=setTimeout(()=>e.abort(),45e3),{object:a}=await (0,o.jA)({model:p,schema:t,prompt:i,system:r,abortSignal:e.signal});clearTimeout(n);let s=t.parse(a);return s}catch(t){a=t,s.k.warn(`AI extraction attempt ${e+1} failed`,{component:"ai",operation:"extractFromText",attempt:e+1,maxRetries:n,error:t instanceof Error?t.message:String(t)}),e<n-1&&await new Promise(t=>setTimeout(t,1e3*Math.pow(2,e)))}}return a&&s.k.error("All extraction attempts failed",a,{component:"ai",operation:"extractFromText"}),null}async function generateGraphInsights(e,t){if(!l.default)return[];try{let r=`
      Analyze this network graph data and active goals to generate actionable insights:
      
      Graph Data: ${JSON.stringify(e)}
      Active Goals: ${JSON.stringify(t)}
      
      Generate insights about:
      1. Network gaps that need filling
      2. Potential valuable introductions
      3. Dormant ties to reactivate
      4. Goal alignment opportunities
    `,{text:n}=await (0,o._4)({model:l.default,prompt:r,system:"You are a network analysis expert. Generate actionable insights from relationship data."});return parseInsightsFromText(n)}catch(e){return s.k.error("Insight generation error",e,{component:"ai",operation:"generateGraphInsights"}),[]}}function parseInsightsFromText(e){let t=[],r=e.split("\n");for(let e of r)(e.includes("Gap:")||e.includes("Opportunity:")||e.includes("Introduction:"))&&t.push({type:"insight",title:e.substring(0,50),description:e,confidence:.8});return t}async function rankSuggestions(e,t){if(!l.default||0===e.length)return e;try{let{object:r}=await (0,o.jA)({model:l.default,schema:a.Ry({rankedSuggestions:a.IX(a.Ry({id:a.Z_(),score:a.Rx().min(0).max(100),reasoning:a.Z_()}))}),prompt:`
        Rank these suggestions based on user context:
        Suggestions: ${JSON.stringify(e)}
        User Context: ${JSON.stringify(t)}
      `,system:"You are an expert at ranking professional networking suggestions."});return e.map(e=>{let t=r.rankedSuggestions.find(t=>t.id===e.id);return{...e,aiScore:t?.score||e.score,aiReasoning:t?.reasoning}}).sort((e,t)=>(t.aiScore||t.score)-(e.aiScore||e.score))}catch(t){return s.k.error("Ranking error",t,{component:"ai",operation:"rankSuggestions"}),e}}function isAIConfigured(){return!!(process.env.OPENAI_API_KEY||process.env.ANTHROPIC_API_KEY)}function getModelInfo(){return{configured:isAIConfigured(),provider:process.env.OPENAI_API_KEY?"openai":process.env.ANTHROPIC_API_KEY?"anthropic":"none",model:l.default?"active":"inactive"}}},66069:(e,t,r)=>{r.d(t,{IQ:()=>n,aI:()=>i,gi:()=>o,pJ:()=>a}),process.env.NEXT_PUBLIC_AI_ENABLED,process.env.NEXT_PUBLIC_VOICE_ENABLED,process.env.NEXT_PUBLIC_ANALYTICS_ENABLED,process.env.NEXT_PUBLIC_INTEGRATIONS_ENABLED;let n={RAISE_SEED:"raise_seed",HIRE_ENGINEER:"hire_engineer",HIRE_DESIGNER:"hire_designer",HIRE_SALES:"hire_sales",FIND_INVESTOR:"find_investor",FIND_CUSTOMER:"find_customer",LEARN_SKILL:"learn_skill",CONNECT:"connect"},i={CAPTURE_NOTE:"capture_note",SET_GOAL:"set_goal",FIND_PEOPLE:"find_people",SUGGEST_INTROS:"suggest_intros",SCHEDULE_FOLLOWUP:"schedule_followup",ADD_REMINDER:"add_reminder",CLARIFY:"clarify"},o={POSITIVE:"positive",NEUTRAL:"neutral",NEGATIVE:"negative"},a={LOW:"low",MEDIUM:"medium",HIGH:"high"}}};