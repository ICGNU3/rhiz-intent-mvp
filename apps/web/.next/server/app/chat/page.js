(()=>{var e={};e.id=1929,e.ids=[1929],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57310:e=>{"use strict";e.exports=require("url")},21685:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>o});var t=a(67096),r=a(16132),n=a(37284),l=a.n(n),i=a(32564),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);a.d(s,c);let o=["",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,50431)),"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/chat/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,71825)),"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/chat/page.tsx"],m="/chat/page",x={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/chat/page",pathname:"/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},46734:(e,s,a)=>{Promise.resolve().then(a.bind(a,47045))},47045:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ChatPage});var t=a(30784),r=a(9885),n=a(95555),l=a(61890),i=a(87374),c=a(88012),o=a(70696),d=a(18310),m=a(76494),x=a(95924),h=a(55832);let ChatError=class ChatError extends Error{constructor(e,s,a){super(e),this.code=s,this.statusCode=a,this.name="ChatError"}};let StreamError=class StreamError extends Error{constructor(e,s){super(e),this.originalError=s,this.name="StreamError"}};let u={id:"welcome",role:"assistant",content:`ðŸ‘‹ Hi! I'm Rhiz AI, your relationship intelligence assistant.

I can help you:
â€¢ Analyze your professional network
â€¢ Find valuable connections
â€¢ Generate insights from conversations
â€¢ Track goals and relationships

What would you like to know?`,timestamp:new Date};function useChat(e={}){let{initialMessages:s=[u],workspaceId:a,onError:t,onStreamChunk:n}=e,[l,i]=(0,r.useState)(s),[c,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null),p=(0,r.useRef)(null),g=(0,r.useCallback)(()=>{h(null)},[]),f=(0,r.useCallback)(()=>{i(s)},[s]),j=(0,r.useCallback)(()=>`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,[]),b=(0,r.useCallback)(e=>{i(s=>[...s,e])},[]),v=(0,r.useCallback)((e,s)=>{i(a=>a.map(a=>a.id===e?{...a,...s}:a))},[]),N=(0,r.useCallback)(e=>{i(s=>s.filter(s=>s.id!==e))},[]),y=(0,r.useCallback)(async(e,s)=>{let a=e.body?.getReader();if(!a)throw new StreamError("No response body available");let t=new TextDecoder,r="";try{for(;;){let{done:e,value:l}=await a.read();if(e)break;let i=t.decode(l,{stream:!0}),c=i.split("\n");for(let e of c)if(e.startsWith("data: "))try{let a=JSON.parse(e.slice(6));if(a.error)throw new ChatError(a.error);a.chunk&&(r+=a.chunk,v(s,{content:r}),n?.(a.chunk)),a.done&&a.response&&v(s,{content:a.response.text,data:a.response.cards,metadata:a.response.metadata})}catch(e){console.error("Error parsing SSE data:",e)}}}finally{a.releaseLock()}},[v,n]),w=(0,r.useCallback)(async e=>{if(!e.trim()||d)return;p.current&&p.current.abort(),p.current=new AbortController,m(!0),h(null);let s={id:j(),role:"user",content:e.trim(),timestamp:new Date},r=j(),n={id:r,role:"assistant",content:"",timestamp:new Date};try{b(s),b(n);let e={messages:[...l,s].map(({role:e,content:s})=>({role:e,content:s})),stream:!0,workspaceId:a},t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:p.current.signal});if(!t.ok){let e=await t.text();throw new ChatError(`HTTP ${t.status}: ${e}`,"HTTP_ERROR",t.status)}await y(t,r)}catch(s){let e=s instanceof Error?s.message:"Failed to send message";if(s instanceof Error&&"AbortError"===s.name)return;h(e),N(r),t?.(s instanceof Error?s:Error(e))}finally{m(!1),p.current=null}},[d,l,a,j,b,y,N,t]);return{messages:l,input:c,isLoading:d,error:x,setInput:o,sendMessage:w,clearError:g,clearMessages:f}}var p=a(15441),g=a(93680),f=a(13560),j=a(20599);function PersonCardItem({person:e,onAction:s}){return t.jsx(j.Zb,{className:"p-3",children:t.jsx(j.aY,{className:"p-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(i.qE,{className:"h-8 w-8",children:t.jsx(i.Q5,{className:"text-xs",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[t.jsx("div",{className:"font-medium truncate",children:e.name}),(e.role||e.company)&&(0,t.jsxs)("div",{className:"text-sm text-gray-500 truncate",children:[e.role,e.role&&e.company&&" at ",e.company]}),e.lastEncounter&&(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["Last: ",e.lastEncounter]})]})]}),t.jsx("div",{className:"flex space-x-1 flex-shrink-0",children:e.actions.map((e,a)=>t.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>s?.(e.action,e.data),className:"text-xs",children:e.label},a))})]})})})}function SuggestionCardItem({suggestion:e,onAction:s}){return t.jsx(j.Zb,{className:"p-3",children:(0,t.jsxs)(j.aY,{className:"p-0",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:(0,t.jsxs)(l.C,{variant:"secondary",className:"text-xs",children:[e.score,"% match"]})}),t.jsx("div",{className:"mb-3",children:t.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:e.why.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-gray-400 mr-2",children:"â€¢"}),t.jsx("span",{className:"flex-1",children:e})]},s))})}),t.jsx("div",{className:"flex space-x-1 flex-wrap gap-1",children:e.actions.map((e,a)=>t.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>s?.(e.action,e.data),className:"text-xs",children:e.label},a))})]})})}function GoalCardItem({goal:e}){return t.jsx(j.Zb,{className:"p-3",children:t.jsx(j.aY,{className:"p-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[t.jsx("div",{className:"font-medium truncate",children:e.title}),t.jsx("div",{className:"text-sm text-gray-500 truncate",children:e.kind})]}),t.jsx(l.C,{variant:(e=>{switch(e){case"active":return"default";case"completed":case"archived":return"secondary";default:return"outline"}})(e.status),className:"ml-2 flex-shrink-0",children:e.status})]})})})}function ChatCards({data:e,onAction:s}){return e&&(e.people||e.suggestions||e.goals)?(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[e.people&&e.people.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"People"}),t.jsx("div",{className:"space-y-2",children:e.people.map(e=>t.jsx(PersonCardItem,{person:e,onAction:s},e.id))})]}),e.suggestions&&e.suggestions.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Suggestions"}),t.jsx("div",{className:"space-y-2",children:e.suggestions.map(e=>t.jsx(SuggestionCardItem,{suggestion:e,onAction:s},e.id))})]}),e.goals&&e.goals.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Goals"}),t.jsx("div",{className:"space-y-2",children:e.goals.map(e=>t.jsx(GoalCardItem,{goal:e},e.id))})]})]}):null}function ChatMessage({message:e,onAction:s}){let a="user"===e.role;return t.jsx("div",{className:`flex ${a?"justify-end":"justify-start"}`,children:t.jsx("div",{className:`max-w-2xl ${a?"order-2":"order-1"}`,children:(0,t.jsxs)("div",{className:`flex items-start space-x-2 ${a?"flex-row-reverse space-x-reverse":""}`,children:[t.jsx(i.qE,{className:"h-8 w-8 flex-shrink-0",children:t.jsx(i.Q5,{children:a?t.jsx(g.Z,{className:"h-4 w-4"}):t.jsx(f.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:`rounded-lg px-4 py-2 ${a?"bg-blue-500 text-white":"bg-white border border-gray-200"}`,children:[t.jsx("div",{className:"text-sm whitespace-pre-wrap",children:e.content}),e.data&&t.jsx(ChatCards,{data:e.data,onAction:s}),!e.metadata||a?null:(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-2 text-xs text-gray-500",children:["number"==typeof e.metadata.confidence&&(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[t.jsx(m.Z,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[e.metadata.confidence,"% confidence"]})]}),"number"==typeof e.metadata.processingTime&&(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[t.jsx(p.Z,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[e.metadata.processingTime,"ms"]})]}),e.metadata.modelUsed&&"unknown"!==e.metadata.modelUsed&&t.jsx(l.C,{variant:"outline",className:"text-xs",children:e.metadata.modelUsed})]})]})]})})})}var b=a(33770),v=a(75951),N=a(28089);function ChatInput({value:e,onChange:s,onSubmit:a,disabled:l=!1,placeholder:i="Ask about your network, goals, or connections..."}){let[c,o]=(0,r.useState)(!1),handleSubmit=s=>{s.preventDefault(),e.trim()&&!l&&a(e)},handleVoiceInput=async()=>{c?o(!1):(o(!0),setTimeout(()=>{s("Tell me about my recent network activity"),o(!1)},2e3))};return t.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"flex space-x-2",children:[t.jsx(n.z,{type:"button",variant:"outline",size:"icon",onClick:handleVoiceInput,disabled:l,className:`flex-shrink-0 ${c?"bg-red-500 text-white hover:bg-red-600":""}`,"aria-label":c?"Stop recording":"Start voice input",children:t.jsx(v.Z,{className:"h-4 w-4"})}),t.jsx(b.I,{value:e,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSubmit(e))},placeholder:i,disabled:l,className:"flex-1",maxLength:1e3}),t.jsx(n.z,{type:"submit",disabled:l||!e.trim(),className:"flex-shrink-0","aria-label":"Send message",children:t.jsx(N.Z,{className:"h-4 w-4"})})]})})}function LoadingIndicator({className:e}){return t.jsx("div",{className:`flex justify-start ${e}`,children:t.jsx("div",{className:"max-w-2xl",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[t.jsx(i.qE,{className:"h-8 w-8",children:t.jsx(i.Q5,{children:t.jsx(f.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2",children:[(0,t.jsxs)("div",{className:"flex space-x-1",role:"status","aria-label":"Loading",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),t.jsx("span",{className:"sr-only",children:"AI is thinking..."})]})]})})})}let y=[{icon:c.Z,label:"Network Analysis",prompt:"Analyze my professional network and identify opportunities"},{icon:o.Z,label:"Goal Progress",prompt:"Show me progress on my active goals"},{icon:d.Z,label:"Recent Insights",prompt:"What insights can you share from my recent interactions?"},{icon:m.Z,label:"Smart Suggestions",prompt:"What introductions should I make this week?"}];function ChatPage(){let{workspaceId:e}=(0,h.c)(),s=(0,r.useRef)(null),{messages:a,input:c,isLoading:o,error:m,setInput:u,sendMessage:p,clearError:g}=useChat({workspaceId:e,onError:e=>{console.error("Chat error:",e)}}),f=(0,r.useCallback)(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[]);(0,r.useEffect)(()=>{f()},[a,f]);let j=(0,r.useCallback)(e=>{u(e),setTimeout(()=>p(e),50)},[u,p]),b=(0,r.useCallback)((e,s)=>{console.log("Action:",e,s)},[]);return(0,t.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(d.Z,{className:"h-5 w-5"}),t.jsx("h2",{className:"text-lg font-semibold",children:"Conversations"})]}),t.jsx("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("div",{className:"font-medium text-sm",children:"Chat with Rhiz"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Active conversation"})]})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(i.qE,{className:"h-8 w-8",children:t.jsx(i.Q5,{children:"R"})}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-lg font-semibold",children:"Chat with Rhiz"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Your AI networking assistant"})]})]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(e=>t.jsx(ChatMessage,{message:e,onAction:b},e.id)),o&&t.jsx(LoadingIndicator,{}),t.jsx("div",{ref:s})]}),t.jsx(ChatInput,{value:c,onChange:u,onSubmit:p,disabled:o})]}),(0,t.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-4",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Quick Actions"}),(0,t.jsxs)(l.C,{variant:"secondary",className:"flex items-center gap-1",children:[t.jsx(x.Z,{className:"h-3 w-3"}),"AI Powered"]})]}),t.jsx("div",{className:"space-y-2",children:y.map((e,s)=>(0,t.jsxs)(n.z,{variant:"outline",className:"w-full justify-start",size:"sm",onClick:()=>j(e.prompt),disabled:o,children:[t.jsx(e.icon,{className:"h-4 w-4 mr-2"}),e.label]},`${e.label}-${s}`))})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[t.jsx("h4",{className:"font-medium mb-2",children:"AI Status"}),(0,t.jsxs)("div",{className:"text-sm space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Model"}),t.jsx(l.C,{variant:"outline",className:"text-xs",children:"GPT-3.5"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Workspace"}),t.jsx(l.C,{variant:"outline",className:"text-xs",children:"Active"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Streaming"}),t.jsx(l.C,{variant:"outline",className:"text-xs text-green-600",children:"Enabled"})]})]})]}),m&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded text-sm text-red-600",children:["Error: ",m]})]})]})}},33770:(e,s,a)=>{"use strict";a.d(s,{I:()=>l});var t=a(30784),r=a(9885),n=a(98699);let l=r.forwardRef(({className:e,type:s,...a},r)=>t.jsx("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));l.displayName="Input"},50431:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>c});var t=a(95153);let r=(0,t.createProxy)(String.raw`/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/chat/page.tsx`),{__esModule:n,$$typeof:l}=r,i=r.default,c=i}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[5467,6086,838,5832],()=>__webpack_exec__(21685));module.exports=a})();