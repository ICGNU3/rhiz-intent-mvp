"use strict";(()=>{var e={};e.id=2152,e.ids=[2152],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},4074:e=>{e.exports=require("perf_hooks")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},67804:(e,t,n)=>{n.r(t),n.d(t,{headerHooks:()=>g,originalPathname:()=>h,requestAsyncStorage:()=>u,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>m});var o={};n.r(o),n.d(o,{GET:()=>GET});var r=n(10884),a=n(16132),i=n(95798),s=n(37552),l=n(1345);async function GET(e){try{let t=await (0,l.n5)();if(!t)return i.Z.json({error:"Unauthorized"},{status:401});let n=e.nextUrl.searchParams,o=n.get("workspaceId");try{if(o){let e=await s.db.select({id:s.Jz.id,aId:s.Jz.aId,bId:s.Jz.bId,goalId:s.Jz.goalId,score:s.Jz.score,state:s.Jz.state,why:s.Jz.why,createdAt:s.Jz.createdAt}).from(s.Jz).where((0,s.eq)(s.Jz.workspaceId,o)).orderBy((0,s.C8)(s.Jz.score)).limit(10),t=await Promise.all(e.map(async e=>{let[t]=await s.db.select({fullName:s.lB.fullName,primaryEmail:s.lB.primaryEmail,location:s.lB.location}).from(s.lB).where((0,s.eq)(s.lB.id,e.aId)).limit(1),[n]=await s.db.select({fullName:s.lB.fullName,primaryEmail:s.lB.primaryEmail,location:s.lB.location}).from(s.lB).where((0,s.eq)(s.lB.id,e.bId)).limit(1),[o]=e.goalId?await s.db.select({title:s.hS.title,kind:s.hS.kind}).from(s.hS).where((0,s.eq)(s.hS.id,e.goalId)).limit(1):[null];return{id:e.id,kind:"introduction",score:e.score,state:e.state,createdAt:e.createdAt.toISOString(),personA:{name:t?.fullName||"Unknown",title:"Contact",company:t?.location?.split(",")[0]||"Unknown"},personB:{name:n?.fullName||"Unknown",title:"Contact",company:n?.location?.split(",")[0]||"Unknown"},why:e.why||{mutualInterests:["Networking","Collaboration"],recency:.7,frequency:.6,affiliation:.8,goalAlignment:.9},draft:{preIntroPing:`Hi ${t?.fullName||"there"}! I think you'd really enjoy connecting with ${n?.fullName||"this person"}.`,doubleOptIntro:`Hi ${t?.fullName||"there"} and ${n?.fullName||"there"}! I wanted to connect you both.`}}}));return i.Z.json({suggestions:t})}}catch(e){console.log("Database query failed, falling back to mock data:",e)}return i.Z.json({suggestions:[{id:"1",kind:"introduction",score:92,state:"proposed",createdAt:"2024-01-15T10:30:00Z",personA:{name:"Sarah Chen",title:"Senior Software Engineer",company:"TechCorp"},personB:{name:"Mike Rodriguez",title:"CTO",company:"StartupXYZ"},why:{mutualInterests:["AI/ML","Startups","Product Development","SaaS"],recency:.8,frequency:.7,affiliation:.9,goalAlignment:.95},draft:{preIntroPing:"Hi Sarah! I think you'd really enjoy connecting with Mike. He's been building some interesting AI-powered SaaS solutions and I know you're passionate about that space.",doubleOptIntro:"Hi Sarah and Mike! I wanted to connect you both. Sarah is a brilliant engineer working on AI/ML at TechCorp, and Mike is a CTO who's been scaling SaaS startups. I think you'd have a lot to discuss about the future of AI in SaaS products."}},{id:"2",kind:"introduction",score:88,state:"proposed",createdAt:"2024-01-14T14:20:00Z",personA:{name:"David Kim",title:"Partner",company:"Venture Capital"},personB:{name:"Emily Johnson",title:"UX Designer",company:"Design Studio"},why:{mutualInterests:["Design","User Experience","Innovation","Startups"],recency:.6,frequency:.8,affiliation:.85,goalAlignment:.88},draft:{preIntroPing:"Hi David! I'd love to introduce you to Emily, a talented UX designer who's been working on some innovative design solutions. I think she'd be a great fit for your portfolio companies.",doubleOptIntro:"Hi David and Emily! David is a VC partner focused on design-driven startups, and Emily is a UX designer who's been pushing the boundaries of user experience. I think you'd have some fascinating discussions about the future of design in tech."}},{id:"3",kind:"introduction",score:85,state:"accepted",createdAt:"2024-01-13T09:15:00Z",personA:{name:"Alex Thompson",title:"Product Manager",company:"GrowthCo"},personB:{name:"Lisa Wang",title:"Marketing Director",company:"ScaleUp"},why:{mutualInterests:["Growth","Marketing","Product Strategy","Analytics"],recency:.7,frequency:.6,affiliation:.8,goalAlignment:.9},draft:{preIntroPing:"Hi Alex! I think you'd really benefit from connecting with Lisa. She's been doing some amazing work with growth marketing and I know you're focused on product-led growth.",doubleOptIntro:"Hi Alex and Lisa! Alex is a PM focused on product-led growth, and Lisa is a marketing director who's been scaling growth strategies. I think you'd have some great insights to share about growth tactics."}}]})}catch(e){return i.Z.json({error:"Internal server error"},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/suggestions/route",pathname:"/api/suggestions",filename:"route",bundlePath:"app/api/suggestions/route"},resolvedPagePath:"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/api/suggestions/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:u,staticGenerationAsyncStorage:c,serverHooks:p,headerHooks:g,staticGenerationBailout:m}=d,h="/api/suggestions/route"},1345:(e,t,n)=>{async function getUserId(){return"alice-user-id"}n.d(t,{n5:()=>getUserId})}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),n=t.X(0,[729,5798,9155,7552],()=>__webpack_exec__(67804));module.exports=n})();