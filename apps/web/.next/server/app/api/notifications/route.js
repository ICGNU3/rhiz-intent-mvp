"use strict";(()=>{var e={};e.id=1996,e.ids=[1996],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},4074:e=>{e.exports=require("perf_hooks")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},65510:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>w,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>l,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>f});var o={};r.r(o),r.d(o,{GET:()=>GET,PATCH:()=>PATCH});var a=r(10884),i=r(16132),n=r(95798),s=r(37552),d=r(1345);async function GET(e){try{let t=await (0,d.n5)();if(!t)return n.Z.json({error:"Unauthorized"},{status:401});let r=e.nextUrl.searchParams,o=r.get("workspaceId")||"550e8400-e29b-41d4-a716-446655440001",a=parseInt(r.get("limit")||"20"),i=parseInt(r.get("offset")||"0");try{let e=await s.db.select({id:s.t6.id,type:s.t6.type,message:s.t6.message,createdAt:s.t6.createdAt,readAt:s.t6.readAt}).from(s.t6).where((0,s.xD)((0,s.eq)(s.t6.workspaceId,o),(0,s.eq)(s.t6.userId,t))).orderBy((0,s.C8)(s.t6.createdAt)).limit(a).offset(i);return n.Z.json({notifications:e})}catch(t){console.log("Database query failed, falling back to mock data:",t);let e=[{id:"1",action:"new_suggestion",entityType:"suggestion",entityId:"suggestion-1",metadata:{title:"New introduction opportunity",description:"Sarah Chen and Mike Rodriguez might be a great match",score:85},createdAt:new Date(Date.now()-18e5).toISOString(),readAt:null},{id:"2",action:"goal_reminder",entityType:"goal",entityId:"goal-1",metadata:{title:"Follow up reminder",description:"Don't forget to follow up with David Kim about the funding opportunity",dueDate:new Date(Date.now()+864e5).toISOString()},createdAt:new Date(Date.now()-72e5).toISOString(),readAt:new Date(Date.now()-18e5).toISOString()},{id:"3",action:"voice_note_processed",entityType:"encounter",entityId:"encounter-1",metadata:{title:"Voice note processed",description:"Your recent voice note has been analyzed and 3 new people were identified",peopleCount:3,insightsCount:2},createdAt:new Date(Date.now()-216e5).toISOString(),readAt:null}];return n.Z.json({notifications:e})}}catch(e){return console.error("Notifications API error:",e),n.Z.json({error:"Internal server error"},{status:500})}}async function PATCH(e){try{let{notificationIds:t}=await e.json();if(!t||!Array.isArray(t))return n.Z.json({error:"Notification IDs array is required"},{status:400});return n.Z.json({success:!0})}catch(e){return console.error("Error marking notifications as read:",e),n.Z.json({error:"Failed to mark notifications as read"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/notifications/route",pathname:"/api/notifications",filename:"route",bundlePath:"app/api/notifications/route"},resolvedPagePath:"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/api/notifications/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:p,serverHooks:l,headerHooks:g,staticGenerationBailout:f}=u,w="/api/notifications/route"},1345:(e,t,r)=>{async function getUserId(){return"alice-user-id"}r.d(t,{n5:()=>getUserId})}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[729,5798,9155,7552],()=>__webpack_exec__(65510));module.exports=r})();