"use strict";(()=>{var e={};e.id=744,e.ids=[744],e.modules={524:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},4074:e=>{e.exports=require("perf_hooks")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},20940:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>h,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>l,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>x});var s={};t.r(s),t.d(s,{POST:()=>POST});var a=t(10884),o=t(16132),n=t(1345),p=t(65215),i=t(29240);async function POST(e){try{let r=await (0,n.n5)();if(!r)return new Response("Unauthorized",{status:401});let{messages:t,stream:s=!0,workspaceId:a="550e8400-e29b-41d4-a716-446655440001"}=await e.json(),o=t.filter(e=>"user"===e.role).pop()?.content;if(!o)return new Response("No user message found",{status:400});let u=new p.P,d={userId:r,workspaceId:a,messages:t};if(s){let e=new TextEncoder,t=new ReadableStream({async start(t){try{let s=await u.streamProcess(o,d,r=>{t.enqueue(e.encode(`data: ${JSON.stringify({chunk:r})}

`))});t.enqueue(e.encode(`data: ${JSON.stringify({done:!0,response:{text:s.text,cards:s.cards,metadata:s.metadata}})}

`)),s.cards&&(s.cards.people&&(0,i.broadcastToWorkspace)(a,{type:"people_updated",people:s.cards.people,updatedBy:r},r),s.cards.suggestions&&(0,i.broadcastToWorkspace)(a,{type:"suggestions_updated",suggestions:s.cards.suggestions,updatedBy:r},r),s.cards.goals&&(0,i.broadcastToWorkspace)(a,{type:"goals_updated",goals:s.cards.goals,updatedBy:r},r)),t.close()}catch(r){console.error("Streaming error:",r),t.enqueue(e.encode(`data: ${JSON.stringify({error:"Failed to process request"})}

`)),t.close()}}});return new Response(t,{headers:{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}})}{let e=await u.process(o,d);return e.cards&&(0,i.broadcastToWorkspace)(a,{type:"agent_response",response:e.cards,updatedBy:r},r),new Response(JSON.stringify(e),{headers:{"Content-Type":"application/json"}})}}catch(e){return console.error("Chat API error:",e),new Response("Internal Server Error",{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/api/chat/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:c,serverHooks:l,headerHooks:g,staticGenerationBailout:x}=u,h="/api/chat/route"},1345:(e,r,t)=>{async function getUserId(){return"demo-user-123"}t.d(r,{n5:()=>getUserId})}};var r=require("../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[729,5798,3133,8332,4589,7418,7552,4333,7058,5215,9240],()=>__webpack_exec__(20940));module.exports=t})();