"use strict";(()=>{var e={};e.id=5590,e.ids=[5590],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},4074:e=>{e.exports=require("perf_hooks")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},3966:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>f,requestAsyncStorage:()=>u,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>g});var a={};t.r(a),t.d(a,{GET:()=>GET,dynamic:()=>p});var o=t(10884),i=t(16132),s=t(95798),n=t(37552),l=t(1345);let p="force-dynamic";async function GET(e){try{let r=await (0,l.n5)();if(!r)return s.Z.json({error:"Unauthorized"},{status:401});let t=e.nextUrl.searchParams,a=t.get("workspaceId");try{if(a){let e=await n.db.select({id:n.lB.id,fullName:n.lB.fullName,primaryEmail:n.lB.primaryEmail,location:n.lB.location}).from(n.lB).where(n.i6`${n.lB.workspaceId} = ${a}`).limit(20),r=await n.db.select({id:n.i$.id,fromId:n.i$.fromId,toId:n.i$.toId,type:n.i$.type,strength:n.i$.strength,metadata:n.i$.metadata}).from(n.i$).where(n.i6`${n.i$.workspaceId} = ${a}`).limit(50),t=e.map(e=>({id:e.id,label:e.fullName,tags:e.location?[e.location.split(",")[0].trim()]:[],location:e.location,email:e.primaryEmail})),o=r.map(e=>({from:e.fromId,to:e.toId,type:e.type,strength:e.strength/10,metadata:e.metadata||{source:"database"}}));return s.Z.json({nodes:t,edges:o})}}catch(e){console.log("Database query failed, falling back to mock data:",e)}return s.Z.json({nodes:[{id:"1",label:"John Doe",tags:["investor","tech"],location:"San Francisco, CA",email:"john@example.com"},{id:"2",label:"Jane Smith",tags:["founder","ai"],location:"New York, NY",email:"jane@example.com"}],edges:[{from:"1",to:"2",type:"introduction",strength:.8,metadata:{source:"mutual_interest"}}]})}catch(e){return console.error("Graph API error:",e),s.Z.json({error:"Internal server error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/graph/people/route",pathname:"/api/graph/people",filename:"route",bundlePath:"app/api/graph/people/route"},resolvedPagePath:"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/api/graph/people/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:u,staticGenerationAsyncStorage:c,serverHooks:m,headerHooks:h,staticGenerationBailout:g}=d,f="/api/graph/people/route"},1345:(e,r,t)=>{async function getUserId(){return"alice-user-id"}t.d(r,{n5:()=>getUserId})}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[729,5798,9155,7552],()=>__webpack_exec__(3966));module.exports=t})();