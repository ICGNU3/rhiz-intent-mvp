"use strict";(()=>{var e={};e.id=1063,e.ids=[1063],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},4074:e=>{e.exports=require("perf_hooks")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},51255:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>m,originalPathname:()=>f,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>y});var a={};t.r(a),t.d(a,{GET:()=>GET,POST:()=>POST});var n=t(10884),o=t(16132),i=t(95798),l=t(37552),s=t(1345);async function GET(e){try{let r=await (0,s.n5)();if(!r)return i.Z.json({error:"Unauthorized"},{status:401});let t=e.nextUrl.searchParams,a=t.get("workspaceId")||"550e8400-e29b-41d4-a716-446655440001",n=parseInt(t.get("limit")||"50"),o=parseInt(t.get("offset")||"0");try{await (0,l.v8)(r);let e=await l.db.select({id:l.lB.id,fullName:l.lB.fullName,primaryEmail:l.lB.primaryEmail,location:l.lB.location,createdAt:l.lB.createdAt,updatedAt:l.lB.updatedAt}).from(l.lB).where((0,l.xD)((0,l.eq)(l.lB.workspaceId,a),(0,l.eq)(l.lB.ownerId,r))).limit(n).offset(o).orderBy((0,l.C8)(l.lB.updatedAt)),t=await Promise.all(e.map(async e=>{let r=await l.db.select().from(l.QS).where((0,l.xD)((0,l.eq)(l.QS.subjectType,"person"),(0,l.eq)(l.QS.subjectId,e.id),(0,l.eq)(l.QS.workspaceId,a))).orderBy((0,l.C8)(l.QS.confidence));return{id:e.id,fullName:e.fullName,primaryEmail:e.primaryEmail,location:e.location,lastEncounter:new Date(e.updatedAt).toISOString().split("T")[0],relationshipStrength:Math.floor(10*Math.random())+1,claims:r.map(e=>({key:e.key,value:e.value,confidence:e.confidence/100}))}}));return i.Z.json({people:t})}catch(e){console.error("Database query failed:",e)}return i.Z.json({people:[{id:"1",fullName:"Sarah Chen",primaryEmail:"sarah.chen@techcorp.com",location:"San Francisco, CA",lastEncounter:"2024-01-15",relationshipStrength:8,claims:[{key:"role",value:"Senior Software Engineer",confidence:.95},{key:"company",value:"TechCorp",confidence:.98},{key:"expertise",value:"AI/ML, Full Stack Development",confidence:.9},{key:"interests",value:"Startups, Product Development",confidence:.85}]},{id:"2",fullName:"Mike Rodriguez",primaryEmail:"mike.rodriguez@startupxyz.com",location:"Austin, TX",lastEncounter:"2024-01-10",relationshipStrength:7,claims:[{key:"role",value:"CTO",confidence:.98},{key:"company",value:"StartupXYZ",confidence:.95},{key:"expertise",value:"SaaS, Scaling, Team Building",confidence:.92},{key:"interests",value:"SaaS, Growth, Leadership",confidence:.88}]},{id:"3",fullName:"David Kim",primaryEmail:"david.kim@venturecapital.com",location:"New York, NY",lastEncounter:"2024-01-05",relationshipStrength:6,claims:[{key:"role",value:"Partner",confidence:.98},{key:"company",value:"Venture Capital",confidence:.95},{key:"expertise",value:"Fintech, Growth, Investment",confidence:.9},{key:"interests",value:"Fintech, Investment, Startups",confidence:.85}]},{id:"4",fullName:"Emily Johnson",primaryEmail:"emily.johnson@designstudio.com",location:"Portland, OR",lastEncounter:"2024-01-12",relationshipStrength:5,claims:[{key:"role",value:"UX Designer",confidence:.95},{key:"company",value:"Design Studio",confidence:.9},{key:"expertise",value:"User Research, UI/UX Design",confidence:.88},{key:"interests",value:"Design, User Experience, Innovation",confidence:.82}]}]})}catch(e){return console.error("People API error:",e),i.Z.json({error:"Internal server error"},{status:500})}}async function POST(e){try{let r=await (0,s.n5)();if(!r)return i.Z.json({error:"Unauthorized"},{status:401});let t=await e.json(),{workspaceId:a,fullName:n,primaryEmail:o,location:c,phoneNumber:u}=t;if(!a||!n)return i.Z.json({error:"Workspace ID and full name are required"},{status:400});try{await (0,l.v8)(r);let[e]=await l.db.insert(l.lB).values({workspaceId:a,ownerId:r,fullName:n,primaryEmail:o||null,location:c||null,primaryPhone:u||null}).returning();return i.Z.json({success:!0,person:e})}catch(t){console.error("Database insert failed:",t);let e={id:crypto.randomUUID(),workspaceId:a,ownerId:r,fullName:n,primaryEmail:o||null,location:c||null,primaryPhone:u||null,createdAt:new Date,updatedAt:new Date};return i.Z.json({success:!0,person:e})}}catch(e){return console.error("Create person error:",e),i.Z.json({error:"Internal server error"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/people/route",pathname:"/api/people",filename:"route",bundlePath:"app/api/people/route"},resolvedPagePath:"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/api/people/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:u,staticGenerationAsyncStorage:p,serverHooks:d,headerHooks:m,staticGenerationBailout:y}=c,f="/api/people/route"},1345:(e,r,t)=>{async function getUserId(){return"demo-user-123"}t.d(r,{n5:()=>getUserId})}};var r=require("../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[729,5798,9155,7552],()=>__webpack_exec__(51255));module.exports=t})();