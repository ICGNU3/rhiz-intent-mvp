"use strict";(()=>{var e={};e.id=8677,e.ids=[8677],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},4074:e=>{e.exports=require("perf_hooks")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},41738:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>w,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>g});var a={};t.r(a),t.d(a,{GET:()=>GET,POST:()=>POST});var s=t(10884),o=t(16132),i=t(95798),n=t(37552),u=t(1345);async function GET(e){try{let r=await (0,u.n5)();if(!r)return i.Z.json({error:"Unauthorized"},{status:401});let t=e.nextUrl.searchParams,a=t.get("workspaceId")||"550e8400-e29b-41d4-a716-446655440001";try{await (0,n.v8)(r);let e=await n.db.select({id:n.hS.id,kind:n.hS.kind,title:n.hS.title,details:n.hS.details,status:n.hS.status,createdAt:n.hS.createdAt}).from(n.hS).where((0,n.xD)((0,n.eq)(n.hS.workspaceId,a),(0,n.eq)(n.hS.ownerId,r))).orderBy((0,n.C8)(n.hS.createdAt));return i.Z.json({goals:e})}catch(r){console.error("Database query failed:",r);let e=[{id:"1",kind:"raise_seed",title:"Raise Seed Round",details:"Looking to raise $500K seed round for AI startup",status:"active",createdAt:new Date().toISOString()}];return i.Z.json({goals:e})}}catch(e){return console.error("Goals API error:",e),i.Z.json({error:"Failed to fetch goals"},{status:500})}}async function POST(e){try{let r=await (0,u.n5)();if(!r)return i.Z.json({error:"Unauthorized"},{status:401});let t=await e.json(),{workspaceId:a,kind:s,title:o,details:d}=t;if(!a)return i.Z.json({error:"Workspace ID is required"},{status:400});if(!s||!o)return i.Z.json({success:!1,error:"Kind and title are required"},{status:400});try{await (0,n.v8)(r);let[e]=await n.db.insert(n.hS).values({workspaceId:a,ownerId:r,kind:s,title:o,details:d,status:"active"}).returning();return i.Z.json({success:!0,goal:e})}catch(t){console.error("Database insert failed:",t);let e={id:crypto.randomUUID(),workspaceId:a,ownerId:r,kind:s,title:o,details:d,status:"active",createdAt:new Date};return i.Z.json({success:!0,goal:e})}}catch(e){return console.error("Failed to create goal:",e),i.Z.json({success:!1,error:"Failed to create goal"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/goals/route",pathname:"/api/goals",filename:"route",bundlePath:"app/api/goals/route"},resolvedPagePath:"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/api/goals/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:p,headerHooks:h,staticGenerationBailout:g}=d,w="/api/goals/route"},1345:(e,r,t)=>{async function getUserId(){return"alice-user-id"}t.d(r,{n5:()=>getUserId})}};var r=require("../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[729,5798,9155,7552],()=>__webpack_exec__(41738));module.exports=t})();