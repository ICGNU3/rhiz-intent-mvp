"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/referrals/route";
exports.ids = ["app/api/referrals/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freferrals%2Froute&page=%2Fapi%2Freferrals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freferrals%2Froute.ts&appDir=%2FUsers%2Fisraelwilson%2FDeveloper%2Frhiz-intent-mvp%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fisraelwilson%2FDeveloper%2Frhiz-intent-mvp%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freferrals%2Froute&page=%2Fapi%2Freferrals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freferrals%2Froute.ts&appDir=%2FUsers%2Fisraelwilson%2FDeveloper%2Frhiz-intent-mvp%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fisraelwilson%2FDeveloper%2Frhiz-intent-mvp%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_israelwilson_Developer_rhiz_intent_mvp_apps_web_app_api_referrals_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/referrals/route.ts */ \"(rsc)/./app/api/referrals/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/referrals/route\",\n        pathname: \"/api/referrals\",\n        filename: \"route\",\n        bundlePath: \"app/api/referrals/route\"\n    },\n    resolvedPagePath: \"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/api/referrals/route.ts\",\n    nextConfigOutput,\n    userland: _Users_israelwilson_Developer_rhiz_intent_mvp_apps_web_app_api_referrals_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/referrals/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyZWZlcnJhbHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJlZmVycmFscyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJlZmVycmFscyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmlzcmFlbHdpbHNvbiUyRkRldmVsb3BlciUyRnJoaXotaW50ZW50LW12cCUyRmFwcHMlMkZ3ZWIlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGaXNyYWVsd2lsc29uJTJGRGV2ZWxvcGVyJTJGcmhpei1pbnRlbnQtbXZwJTJGYXBwcyUyRndlYiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDK0M7QUFDOUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHJoaXovd2ViLz81Zjc2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9pc3JhZWx3aWxzb24vRGV2ZWxvcGVyL3JoaXotaW50ZW50LW12cC9hcHBzL3dlYi9hcHAvYXBpL3JlZmVycmFscy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcmVmZXJyYWxzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcmVmZXJyYWxzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yZWZlcnJhbHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvaXNyYWVsd2lsc29uL0RldmVsb3Blci9yaGl6LWludGVudC1tdnAvYXBwcy93ZWIvYXBwL2FwaS9yZWZlcnJhbHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcmVmZXJyYWxzL3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freferrals%2Froute&page=%2Fapi%2Freferrals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freferrals%2Froute.ts&appDir=%2FUsers%2Fisraelwilson%2FDeveloper%2Frhiz-intent-mvp%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fisraelwilson%2FDeveloper%2Frhiz-intent-mvp%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/referrals/route.ts":
/*!************************************!*\
  !*** ./app/api/referrals/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nanoid */ \"(rsc)/./node_modules/nanoid/index.js\");\n\n// import { db, referralCode, referralEdge } from '@rhiz/db';\n// import { eq, and, isNull, lt } from 'drizzle-orm';\n\n\n// import { requireUser } from '@rhiz/shared';\n// Schema for creating referral codes\nconst createReferralCodeSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    maxUses: zod__WEBPACK_IMPORTED_MODULE_1__.number().optional(),\n    rewardType: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        \"credit\",\n        \"upgrade\",\n        \"invite\"\n    ]).default(\"upgrade\"),\n    rewardValue: zod__WEBPACK_IMPORTED_MODULE_1__.number().optional(),\n    expiresAt: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n});\n// Schema for redeeming referral codes\nconst redeemReferralCodeSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    code: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1),\n    inviteeId: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1)\n});\nasync function GET(request) {\n    try {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"Mock data - API not implemented yet\"\n        });\n    } catch (error) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { action, ...data } = body;\n        if (action === \"create\") {\n            return await createReferralCode(data);\n        } else if (action === \"redeem\") {\n            return await redeemReferralCode(data);\n        } else {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid action\"\n            }, {\n                status: 400\n            });\n        }\n    } catch (error) {\n        console.error(\"Referral API error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function createReferralCode(data) {\n    try {\n        const validatedData = createReferralCodeSchema.parse(data);\n        // Get current user ID from auth\n        const userId = \"demo-user-123\"; // await requireUser();\n        // Generate unique referral code\n        const code = (0,nanoid__WEBPACK_IMPORTED_MODULE_2__.nanoid)(8).toUpperCase();\n        // Create referral code\n        // const [newReferralCode] = await db.insert(referralCode).values({\n        //   code,\n        //   creatorId: userId,\n        //   maxUses: validatedData.maxUses,\n        //   rewardType: validatedData.rewardType,\n        //   rewardValue: validatedData.rewardValue,\n        //   expiresAt: validatedData.expiresAt ? new Date(validatedData.expiresAt) : null,\n        // }).returning();\n        // Track growth event\n        // await db.insert(growthEvent).values({\n        //   userId,\n        //   type: 'invite_sent',\n        //   meta: { code, rewardType: validatedData.rewardType },\n        // });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Create referral code error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to create referral code\"\n        }, {\n            status: 400\n        });\n    }\n}\nasync function redeemReferralCode(data) {\n    try {\n        const validatedData = redeemReferralCodeSchema.parse(data);\n        // Find the referral code\n        // const [codeRecord] = await db.select()\n        //   .from(referralCode)\n        //   .where(\n        //     and(\n        //       eq(referralCode.code, validatedData.code),\n        //       isNull(referralCode.expiresAt) || lt(referralCode.expiresAt, new Date()),\n        //       referralCode.maxUses === null || referralCode.used < referralCode.maxUses\n        //     )\n        //   );\n        // if (!codeRecord) {\n        //   return NextResponse.json({ error: 'Invalid or expired referral code' }, { status: 400 });\n        // }\n        // // Check if code has reached max uses\n        // if (codeRecord.maxUses && codeRecord.used >= codeRecord.maxUses) {\n        //   return NextResponse.json({ error: 'Referral code has reached maximum uses' }, { status: 400 });\n        // }\n        // // Check if code has expired\n        // if (codeRecord.expiresAt && new Date() > codeRecord.expiresAt) {\n        //   return NextResponse.json({ error: 'Referral code has expired' }, { status: 400 });\n        // }\n        // // Check if invitee already used a referral code\n        // const existingEdge = await db.select()\n        //   .from(referralEdge)\n        //   .where(eq(referralEdge.inviteeId, validatedData.inviteeId))\n        //   .limit(1);\n        // if (existingEdge.length > 0) {\n        //   return NextResponse.json({ error: 'User has already used a referral code' }, { status: 400 });\n        // }\n        // // Create referral edge\n        // const [newEdge] = await db.insert(referralEdge).values({\n        //   inviterId: codeRecord.creatorId,\n        //   inviteeId: validatedData.inviteeId,\n        //   referralCodeId: codeRecord.id,\n        // }).returning();\n        // // Update referral code usage\n        // await db.update(referralCode)\n        //   .set({ used: codeRecord.used + 1 })\n        //   .where(eq(referralCode.id, codeRecord.id));\n        // // Track growth events\n        // await db.insert(growthEvent).values([\n        //   {\n        //     userId: codeRecord.creatorId,\n        //     type: 'invite_redeemed',\n        //     meta: { code: codeRecord.code, inviteeId: validatedData.inviteeId },\n        //   },\n        //   {\n        //     userId: validatedData.inviteeId,\n        //     type: 'signup',\n        //     meta: { referredBy: codeRecord.creatorId, code: codeRecord.code },\n        //   },\n        // ]);\n        // // Apply rewards based on reward type\n        // const rewards = await applyRewards(codeRecord, validatedData.inviteeId);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Redeem referral code error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to redeem referral code\"\n        }, {\n            status: 400\n        });\n    }\n}\nasync function applyRewards(codeRecord, inviteeId) {\n    const rewards = {\n        inviter: null,\n        invitee: null\n    };\n    // Apply rewards to inviter\n    switch(codeRecord.rewardType){\n        case \"credit\":\n            // TODO: Implement credit system\n            rewards.inviter = {\n                type: \"credit\",\n                amount: codeRecord.rewardValue || 100\n            };\n            break;\n        case \"upgrade\":\n            // TODO: Implement upgrade system\n            rewards.inviter = {\n                type: \"upgrade\",\n                duration: codeRecord.rewardValue || 30\n            };\n            break;\n        case \"invite\":\n            // TODO: Implement invite quota system\n            rewards.inviter = {\n                type: \"invite\",\n                count: codeRecord.rewardValue || 1\n            };\n            break;\n    }\n    // Apply signup bonus to invitee\n    rewards.invitee = {\n        type: \"signup_bonus\",\n        description: \"Welcome bonus for using referral code\"\n    };\n    return rewards;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWdDO1lBQ2hDOEIsUUFBUUMsT0FBTyxHQUFHO2dCQUFFRSxNQUFNO2dCQUFVQyxRQUFRTCxXQUFXMUIsV0FBVyxJQUFJO1lBQUk7WUFDMUU7UUFDRixLQUFLO1lBQ0gsaUNBQWlDO1lBQ2pDMkIsUUFBUUMsT0FBTyxHQUFHO2dCQUFFRSxNQUFNO2dCQUFXRSxVQUFVTixXQUFXMUIsV0FBVyxJQUFJO1lBQUc7WUFDNUU7UUFDRixLQUFLO1lBQ0gsc0NBQXNDO1lBQ3RDMkIsUUFBUUMsT0FBTyxHQUFHO2dCQUFFRSxNQUFNO2dCQUFVRyxPQUFPUCxXQUFXMUIsV0FBVyxJQUFJO1lBQUU7WUFDdkU7SUFDSjtJQUVBLGdDQUFnQztJQUNoQzJCLFFBQVFFLE9BQU8sR0FBRztRQUFFQyxNQUFNO1FBQWdCSSxhQUFhO0lBQXdDO0lBRS9GLE9BQU9QO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Acmhpei93ZWIvLi9hcHAvYXBpL3JlZmVycmFscy9yb3V0ZS50cz9hYmJhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG4vLyBpbXBvcnQgeyBkYiwgcmVmZXJyYWxDb2RlLCByZWZlcnJhbEVkZ2UgfSBmcm9tICdAcmhpei9kYic7XG4vLyBpbXBvcnQgeyBlcSwgYW5kLCBpc051bGwsIGx0IH0gZnJvbSAnZHJpenpsZS1vcm0nO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tICduYW5vaWQnO1xuLy8gaW1wb3J0IHsgcmVxdWlyZVVzZXIgfSBmcm9tICdAcmhpei9zaGFyZWQnO1xuXG4vLyBTY2hlbWEgZm9yIGNyZWF0aW5nIHJlZmVycmFsIGNvZGVzXG5jb25zdCBjcmVhdGVSZWZlcnJhbENvZGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG1heFVzZXM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgcmV3YXJkVHlwZTogei5lbnVtKFsnY3JlZGl0JywgJ3VwZ3JhZGUnLCAnaW52aXRlJ10pLmRlZmF1bHQoJ3VwZ3JhZGUnKSxcbiAgcmV3YXJkVmFsdWU6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgZXhwaXJlc0F0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksIC8vIElTTyBkYXRlIHN0cmluZ1xufSk7XG5cbi8vIFNjaGVtYSBmb3IgcmVkZWVtaW5nIHJlZmVycmFsIGNvZGVzXG5jb25zdCByZWRlZW1SZWZlcnJhbENvZGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGNvZGU6IHouc3RyaW5nKCkubWluKDEpLFxuICBpbnZpdGVlSWQ6IHouc3RyaW5nKCkubWluKDEpLFxufSk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiBcIk1vY2sgZGF0YSAtIEFQSSBub3QgaW1wbGVtZW50ZWQgeWV0XCIgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7IGFjdGlvbiwgLi4uZGF0YSB9ID0gYm9keTtcblxuICAgIGlmIChhY3Rpb24gPT09ICdjcmVhdGUnKSB7XG4gICAgICByZXR1cm4gYXdhaXQgY3JlYXRlUmVmZXJyYWxDb2RlKGRhdGEpO1xuICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAncmVkZWVtJykge1xuICAgICAgcmV0dXJuIGF3YWl0IHJlZGVlbVJlZmVycmFsQ29kZShkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGFjdGlvbicgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUmVmZXJyYWwgQVBJIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVSZWZlcnJhbENvZGUoZGF0YTogYW55KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IGNyZWF0ZVJlZmVycmFsQ29kZVNjaGVtYS5wYXJzZShkYXRhKTtcbiAgICBcbiAgICAvLyBHZXQgY3VycmVudCB1c2VyIElEIGZyb20gYXV0aFxuICAgIGNvbnN0IHVzZXJJZCA9ICdkZW1vLXVzZXItMTIzJzsgLy8gYXdhaXQgcmVxdWlyZVVzZXIoKTtcbiAgICBcbiAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgcmVmZXJyYWwgY29kZVxuICAgIGNvbnN0IGNvZGUgPSBuYW5vaWQoOCkudG9VcHBlckNhc2UoKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgcmVmZXJyYWwgY29kZVxuICAgIC8vIGNvbnN0IFtuZXdSZWZlcnJhbENvZGVdID0gYXdhaXQgZGIuaW5zZXJ0KHJlZmVycmFsQ29kZSkudmFsdWVzKHtcbiAgICAvLyAgIGNvZGUsXG4gICAgLy8gICBjcmVhdG9ySWQ6IHVzZXJJZCxcbiAgICAvLyAgIG1heFVzZXM6IHZhbGlkYXRlZERhdGEubWF4VXNlcyxcbiAgICAvLyAgIHJld2FyZFR5cGU6IHZhbGlkYXRlZERhdGEucmV3YXJkVHlwZSxcbiAgICAvLyAgIHJld2FyZFZhbHVlOiB2YWxpZGF0ZWREYXRhLnJld2FyZFZhbHVlLFxuICAgIC8vICAgZXhwaXJlc0F0OiB2YWxpZGF0ZWREYXRhLmV4cGlyZXNBdCA/IG5ldyBEYXRlKHZhbGlkYXRlZERhdGEuZXhwaXJlc0F0KSA6IG51bGwsXG4gICAgLy8gfSkucmV0dXJuaW5nKCk7XG5cbiAgICAvLyBUcmFjayBncm93dGggZXZlbnRcbiAgICAvLyBhd2FpdCBkYi5pbnNlcnQoZ3Jvd3RoRXZlbnQpLnZhbHVlcyh7XG4gICAgLy8gICB1c2VySWQsXG4gICAgLy8gICB0eXBlOiAnaW52aXRlX3NlbnQnLFxuICAgIC8vICAgbWV0YTogeyBjb2RlLCByZXdhcmRUeXBlOiB2YWxpZGF0ZWREYXRhLnJld2FyZFR5cGUgfSxcbiAgICAvLyB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgLy8gcmVmZXJyYWxDb2RlOiBuZXdSZWZlcnJhbENvZGUsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ3JlYXRlIHJlZmVycmFsIGNvZGUgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSByZWZlcnJhbCBjb2RlJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlZGVlbVJlZmVycmFsQ29kZShkYXRhOiBhbnkpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gcmVkZWVtUmVmZXJyYWxDb2RlU2NoZW1hLnBhcnNlKGRhdGEpO1xuICAgIFxuICAgIC8vIEZpbmQgdGhlIHJlZmVycmFsIGNvZGVcbiAgICAvLyBjb25zdCBbY29kZVJlY29yZF0gPSBhd2FpdCBkYi5zZWxlY3QoKVxuICAgIC8vICAgLmZyb20ocmVmZXJyYWxDb2RlKVxuICAgIC8vICAgLndoZXJlKFxuICAgIC8vICAgICBhbmQoXG4gICAgLy8gICAgICAgZXEocmVmZXJyYWxDb2RlLmNvZGUsIHZhbGlkYXRlZERhdGEuY29kZSksXG4gICAgLy8gICAgICAgaXNOdWxsKHJlZmVycmFsQ29kZS5leHBpcmVzQXQpIHx8IGx0KHJlZmVycmFsQ29kZS5leHBpcmVzQXQsIG5ldyBEYXRlKCkpLFxuICAgIC8vICAgICAgIHJlZmVycmFsQ29kZS5tYXhVc2VzID09PSBudWxsIHx8IHJlZmVycmFsQ29kZS51c2VkIDwgcmVmZXJyYWxDb2RlLm1heFVzZXNcbiAgICAvLyAgICAgKVxuICAgIC8vICAgKTtcblxuICAgIC8vIGlmICghY29kZVJlY29yZCkge1xuICAgIC8vICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIG9yIGV4cGlyZWQgcmVmZXJyYWwgY29kZScgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAvLyB9XG5cbiAgICAvLyAvLyBDaGVjayBpZiBjb2RlIGhhcyByZWFjaGVkIG1heCB1c2VzXG4gICAgLy8gaWYgKGNvZGVSZWNvcmQubWF4VXNlcyAmJiBjb2RlUmVjb3JkLnVzZWQgPj0gY29kZVJlY29yZC5tYXhVc2VzKSB7XG4gICAgLy8gICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1JlZmVycmFsIGNvZGUgaGFzIHJlYWNoZWQgbWF4aW11bSB1c2VzJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIC8vIH1cblxuICAgIC8vIC8vIENoZWNrIGlmIGNvZGUgaGFzIGV4cGlyZWRcbiAgICAvLyBpZiAoY29kZVJlY29yZC5leHBpcmVzQXQgJiYgbmV3IERhdGUoKSA+IGNvZGVSZWNvcmQuZXhwaXJlc0F0KSB7XG4gICAgLy8gICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1JlZmVycmFsIGNvZGUgaGFzIGV4cGlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgLy8gfVxuXG4gICAgLy8gLy8gQ2hlY2sgaWYgaW52aXRlZSBhbHJlYWR5IHVzZWQgYSByZWZlcnJhbCBjb2RlXG4gICAgLy8gY29uc3QgZXhpc3RpbmdFZGdlID0gYXdhaXQgZGIuc2VsZWN0KClcbiAgICAvLyAgIC5mcm9tKHJlZmVycmFsRWRnZSlcbiAgICAvLyAgIC53aGVyZShlcShyZWZlcnJhbEVkZ2UuaW52aXRlZUlkLCB2YWxpZGF0ZWREYXRhLmludml0ZWVJZCkpXG4gICAgLy8gICAubGltaXQoMSk7XG5cbiAgICAvLyBpZiAoZXhpc3RpbmdFZGdlLmxlbmd0aCA+IDApIHtcbiAgICAvLyAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVXNlciBoYXMgYWxyZWFkeSB1c2VkIGEgcmVmZXJyYWwgY29kZScgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAvLyB9XG5cbiAgICAvLyAvLyBDcmVhdGUgcmVmZXJyYWwgZWRnZVxuICAgIC8vIGNvbnN0IFtuZXdFZGdlXSA9IGF3YWl0IGRiLmluc2VydChyZWZlcnJhbEVkZ2UpLnZhbHVlcyh7XG4gICAgLy8gICBpbnZpdGVySWQ6IGNvZGVSZWNvcmQuY3JlYXRvcklkLFxuICAgIC8vICAgaW52aXRlZUlkOiB2YWxpZGF0ZWREYXRhLmludml0ZWVJZCxcbiAgICAvLyAgIHJlZmVycmFsQ29kZUlkOiBjb2RlUmVjb3JkLmlkLFxuICAgIC8vIH0pLnJldHVybmluZygpO1xuXG4gICAgLy8gLy8gVXBkYXRlIHJlZmVycmFsIGNvZGUgdXNhZ2VcbiAgICAvLyBhd2FpdCBkYi51cGRhdGUocmVmZXJyYWxDb2RlKVxuICAgIC8vICAgLnNldCh7IHVzZWQ6IGNvZGVSZWNvcmQudXNlZCArIDEgfSlcbiAgICAvLyAgIC53aGVyZShlcShyZWZlcnJhbENvZGUuaWQsIGNvZGVSZWNvcmQuaWQpKTtcblxuICAgIC8vIC8vIFRyYWNrIGdyb3d0aCBldmVudHNcbiAgICAvLyBhd2FpdCBkYi5pbnNlcnQoZ3Jvd3RoRXZlbnQpLnZhbHVlcyhbXG4gICAgLy8gICB7XG4gICAgLy8gICAgIHVzZXJJZDogY29kZVJlY29yZC5jcmVhdG9ySWQsXG4gICAgLy8gICAgIHR5cGU6ICdpbnZpdGVfcmVkZWVtZWQnLFxuICAgIC8vICAgICBtZXRhOiB7IGNvZGU6IGNvZGVSZWNvcmQuY29kZSwgaW52aXRlZUlkOiB2YWxpZGF0ZWREYXRhLmludml0ZWVJZCB9LFxuICAgIC8vICAgfSxcbiAgICAvLyAgIHtcbiAgICAvLyAgICAgdXNlcklkOiB2YWxpZGF0ZWREYXRhLmludml0ZWVJZCxcbiAgICAvLyAgICAgdHlwZTogJ3NpZ251cCcsXG4gICAgLy8gICAgIG1ldGE6IHsgcmVmZXJyZWRCeTogY29kZVJlY29yZC5jcmVhdG9ySWQsIGNvZGU6IGNvZGVSZWNvcmQuY29kZSB9LFxuICAgIC8vICAgfSxcbiAgICAvLyBdKTtcblxuICAgIC8vIC8vIEFwcGx5IHJld2FyZHMgYmFzZWQgb24gcmV3YXJkIHR5cGVcbiAgICAvLyBjb25zdCByZXdhcmRzID0gYXdhaXQgYXBwbHlSZXdhcmRzKGNvZGVSZWNvcmQsIHZhbGlkYXRlZERhdGEuaW52aXRlZUlkKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgLy8gcmVmZXJyYWxFZGdlOiBuZXdFZGdlLFxuICAgICAgLy8gcmV3YXJkcyxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdSZWRlZW0gcmVmZXJyYWwgY29kZSBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gcmVkZWVtIHJlZmVycmFsIGNvZGUnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gYXBwbHlSZXdhcmRzKGNvZGVSZWNvcmQ6IGFueSwgaW52aXRlZUlkOiBzdHJpbmcpIHtcbiAgY29uc3QgcmV3YXJkcyA9IHtcbiAgICBpbnZpdGVyOiBudWxsIGFzIGFueSxcbiAgICBpbnZpdGVlOiBudWxsIGFzIGFueSxcbiAgfTtcblxuICAvLyBBcHBseSByZXdhcmRzIHRvIGludml0ZXJcbiAgc3dpdGNoIChjb2RlUmVjb3JkLnJld2FyZFR5cGUpIHtcbiAgICBjYXNlICdjcmVkaXQnOlxuICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGNyZWRpdCBzeXN0ZW1cbiAgICAgIHJld2FyZHMuaW52aXRlciA9IHsgdHlwZTogJ2NyZWRpdCcsIGFtb3VudDogY29kZVJlY29yZC5yZXdhcmRWYWx1ZSB8fCAxMDAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3VwZ3JhZGUnOlxuICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHVwZ3JhZGUgc3lzdGVtXG4gICAgICByZXdhcmRzLmludml0ZXIgPSB7IHR5cGU6ICd1cGdyYWRlJywgZHVyYXRpb246IGNvZGVSZWNvcmQucmV3YXJkVmFsdWUgfHwgMzAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2ludml0ZSc6XG4gICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgaW52aXRlIHF1b3RhIHN5c3RlbVxuICAgICAgcmV3YXJkcy5pbnZpdGVyID0geyB0eXBlOiAnaW52aXRlJywgY291bnQ6IGNvZGVSZWNvcmQucmV3YXJkVmFsdWUgfHwgMSB9O1xuICAgICAgYnJlYWs7XG4gIH1cblxuICAvLyBBcHBseSBzaWdudXAgYm9udXMgdG8gaW52aXRlZVxuICByZXdhcmRzLmludml0ZWUgPSB7IHR5cGU6ICdzaWdudXBfYm9udXMnLCBkZXNjcmlwdGlvbjogJ1dlbGNvbWUgYm9udXMgZm9yIHVzaW5nIHJlZmVycmFsIGNvZGUnIH07XG5cbiAgcmV0dXJuIHJld2FyZHM7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwieiIsIm5hbm9pZCIsImNyZWF0ZVJlZmVycmFsQ29kZVNjaGVtYSIsIm9iamVjdCIsIm1heFVzZXMiLCJudW1iZXIiLCJvcHRpb25hbCIsInJld2FyZFR5cGUiLCJlbnVtIiwiZGVmYXVsdCIsInJld2FyZFZhbHVlIiwiZXhwaXJlc0F0Iiwic3RyaW5nIiwicmVkZWVtUmVmZXJyYWxDb2RlU2NoZW1hIiwiY29kZSIsIm1pbiIsImludml0ZWVJZCIsIkdFVCIsInJlcXVlc3QiLCJqc29uIiwibWVzc2FnZSIsImVycm9yIiwic3RhdHVzIiwiUE9TVCIsImJvZHkiLCJhY3Rpb24iLCJkYXRhIiwiY3JlYXRlUmVmZXJyYWxDb2RlIiwicmVkZWVtUmVmZXJyYWxDb2RlIiwiY29uc29sZSIsInZhbGlkYXRlZERhdGEiLCJwYXJzZSIsInVzZXJJZCIsInRvVXBwZXJDYXNlIiwic3VjY2VzcyIsImFwcGx5UmV3YXJkcyIsImNvZGVSZWNvcmQiLCJyZXdhcmRzIiwiaW52aXRlciIsImludml0ZWUiLCJ0eXBlIiwiYW1vdW50IiwiZHVyYXRpb24iLCJjb3VudCIsImRlc2NyaXB0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/referrals/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/nanoid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freferrals%2Froute&page=%2Fapi%2Freferrals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freferrals%2Froute.ts&appDir=%2FUsers%2Fisraelwilson%2FDeveloper%2Frhiz-intent-mvp%2Fapps%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fisraelwilson%2FDeveloper%2Frhiz-intent-mvp%2Fapps%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();