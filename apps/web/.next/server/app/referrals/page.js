(()=>{var e={};e.id=2700,e.ids=[2700],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57310:e=>{"use strict";e.exports=require("url")},80483:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d});var t=r(67096),i=r(16132),a=r(37284),l=r.n(a),n=r(32564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);r.d(s,c);let d=["",{children:["referrals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,37239)),"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/referrals/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,71825)),"/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/referrals/page.tsx"],x="/referrals/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/referrals/page",pathname:"/referrals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},76003:(e,s,r)=>{Promise.resolve().then(r.bind(r,90353))},90353:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>ReferralsPage});var t=r(30784),i=r(9885),a=r(20599),l=r(95555),n=r(61890),c=r(33770),d=r(465),o=r(66386),x=r(56388),u=r(95037),m=r(91672),h=r(50007),f=r(63647),p=r(10263),j=r(33346),v=r(82150),g=r(44723),b=r(8081);function ReferralsPage(){let[e,s]=(0,i.useState)(""),[r,w]=(0,i.useState)(""),[y,N]=(0,i.useState)({totalInvites:0,successfulSignups:0,earnedRewards:0,invitesRemaining:10}),[R,k]=(0,i.useState)([]),[S,_]=(0,i.useState)([]),[I,Z]=(0,i.useState)(!0),{toast:P}=(0,d.pm)();(0,i.useEffect)(()=>{loadReferralData()},[]);let loadReferralData=async()=>{try{Z(!0);let e=await fetch("/api/referrals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create",rewardType:"invite",rewardValue:1})});if(e.ok){let{referralCode:r}=await e.json();s(r.code),w(`${window.location.origin}/signup?ref=${r.code}`)}let r=await fetch("/api/referrals/tree?userId=current-user-id&depth=3");if(r.ok){let{data:e}=await r.json();k(e.tree),_(e.stats),N(s=>({...s,totalInvites:e.totals.totalInvitees,successfulSignups:e.totals.totalInvitees}))}}catch(e){console.error("Error loading referral data:",e),P({title:"Error",description:"Failed to load referral data",variant:"destructive"})}finally{Z(!1)}},copyReferralLink=async()=>{try{await navigator.clipboard.writeText(r),P({title:"Copied!",description:"Referral link copied to clipboard"})}catch(e){P({title:"Error",description:"Failed to copy link",variant:"destructive"})}},shareReferralLink=async()=>{if(navigator.share)try{await navigator.share({title:"Join me on Rhiz",text:"I'm using Rhiz to build better relationships. Join me with this referral link!",url:r})}catch(e){console.log("Share cancelled")}else copyReferralLink()},D=[{name:"Direct Invites",value:S.find(e=>1===e.level)?.count||0,fill:"#3b82f6"},{name:"Level 2",value:S.find(e=>2===e.level)?.count||0,fill:"#8b5cf6"},{name:"Level 3",value:S.find(e=>3===e.level)?.count||0,fill:"#ec4899"}],L=[{name:"Successful",value:y.successfulSignups,fill:"#10b981"},{name:"Pending",value:y.totalInvites-y.successfulSignups,fill:"#f59e0b"}];return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-4xl font-bold text-foreground mb-4",children:"Referrals & Invites"}),t.jsx("p",{className:"text-lg text-muted-foreground",children:"Grow your network and earn rewards by inviting others to Rhiz"})]}),I?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"text-lg",children:"Loading referral data..."})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.Zb,{className:"mb-8",children:[(0,t.jsxs)(a.Ol,{children:[(0,t.jsxs)(a.ll,{className:"flex items-center gap-2",children:[t.jsx(o.Z,{className:"h-5 w-5"}),"Your Referral Link"]}),t.jsx(a.SZ,{children:"Share this link with friends and colleagues to earn rewards"})]}),(0,t.jsxs)(a.aY,{children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(c.I,{value:r,readOnly:!0,className:"flex-1",placeholder:"Generating referral link..."}),t.jsx(l.z,{onClick:copyReferralLink,variant:"outline",children:t.jsx(x.Z,{className:"h-4 w-4"})}),(0,t.jsxs)(l.z,{onClick:shareReferralLink,children:[t.jsx(o.Z,{className:"h-4 w-4 mr-2"}),"Share"]})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-4 text-sm text-muted-foreground",children:[t.jsx("div",{className:"flex items-center gap-1",children:(0,t.jsxs)(n.C,{variant:"secondary",children:["Code: ",e]})}),!1,(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(m.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[y.invitesRemaining," invites remaining"]})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)(a.Zb,{children:[(0,t.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(a.ll,{className:"text-sm font-medium",children:"Total Invites"}),t.jsx(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(a.aY,{children:[t.jsx("div",{className:"text-2xl font-bold",children:y.totalInvites}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"People you've invited"})]})]}),(0,t.jsxs)(a.Zb,{children:[(0,t.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(a.ll,{className:"text-sm font-medium",children:"Successful Signups"}),t.jsx(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(a.aY,{children:[t.jsx("div",{className:"text-2xl font-bold",children:y.successfulSignups}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Who joined with your link"})]})]}),(0,t.jsxs)(a.Zb,{children:[(0,t.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(a.ll,{className:"text-sm font-medium",children:"Earned Rewards"}),t.jsx(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(a.aY,{children:[t.jsx("div",{className:"text-2xl font-bold",children:y.earnedRewards}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Rewards earned"})]})]}),(0,t.jsxs)(a.Zb,{children:[(0,t.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(a.ll,{className:"text-sm font-medium",children:"Conversion Rate"}),t.jsx(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(a.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[y.totalInvites>0?Math.round(y.successfulSignups/y.totalInvites*100):0,"%"]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Signup success rate"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)(a.Zb,{children:[(0,t.jsxs)(a.Ol,{children:[t.jsx(a.ll,{children:"Your Invite Tree"}),t.jsx(a.SZ,{children:"Visual representation of your network growth"})]}),(0,t.jsxs)(a.aY,{children:[t.jsx("div",{className:"h-64",children:t.jsx(f.h,{width:"100%",height:"100%",children:t.jsx(p.B,{data:D,innerRadius:"20%",outerRadius:"100%",children:t.jsx(j.G,{dataKey:"value",cornerRadius:10})})})}),t.jsx("div",{className:"mt-4 space-y-2",children:S.map(e=>(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{children:["Level ",e.level," Invites:"]}),t.jsx("span",{className:"font-medium",children:e.count})]},e.level))})]})]}),(0,t.jsxs)(a.Zb,{children:[(0,t.jsxs)(a.Ol,{children:[t.jsx(a.ll,{children:"Signup Distribution"}),t.jsx(a.SZ,{children:"Breakdown of successful vs pending signups"})]}),(0,t.jsxs)(a.aY,{children:[t.jsx("div",{className:"h-64",children:t.jsx(f.h,{width:"100%",height:"100%",children:t.jsx(v.u,{children:t.jsx(g.b,{data:L,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:L.map((e,s)=>t.jsx(b.b,{fill:e.fill},`cell-${s}`))})})})}),t.jsx("div",{className:"mt-4 space-y-2",children:L.map(e=>(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.fill}}),e.name,":"]}),t.jsx("span",{className:"font-medium",children:e.value})]},e.name))})]})]})]}),(0,t.jsxs)(a.Zb,{className:"mt-8",children:[(0,t.jsxs)(a.Ol,{children:[t.jsx(a.ll,{children:"Recent Activity"}),t.jsx(a.SZ,{children:"Latest invites and signups from your network"})]}),t.jsx(a.aY,{children:R.length>0?t.jsx("div",{className:"space-y-4",children:R.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:t.jsx(m.Z,{className:"h-4 w-4 text-primary"})}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.isDirectInvitee?"Direct Invite":`Level ${e.level} Invite`}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["User ID: ",e.inviteeId.slice(0,8),"..."]})]})]}),t.jsx(n.C,{variant:e.isDirectInvitee?"default":"secondary",children:e.isDirectInvitee?"Direct":`Level ${e.level}`})]},s))}):(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(m.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No invites yet. Share your referral link to get started!"})]})})]})]})]})}},33770:(e,s,r)=>{"use strict";r.d(s,{I:()=>l});var t=r(30784),i=r(9885),a=r(98699);let l=i.forwardRef(({className:e,type:s,...r},i)=>t.jsx("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...r}));l.displayName="Input"},37239:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>c});var t=r(95153);let i=(0,t.createProxy)(String.raw`/Users/israelwilson/Developer/rhiz-intent-mvp/apps/web/app/referrals/page.tsx`),{__esModule:a,$$typeof:l}=i,n=i.default,c=n}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[5467,7249,5128,500,838,465],()=>__webpack_exec__(80483));module.exports=r})();