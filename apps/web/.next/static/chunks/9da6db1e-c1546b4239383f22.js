"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{58066:function(a,l,c){c.d(l,{ZP:function(){return rl}});var u="undefined"!=typeof window?window:void 0,d="undefined"!=typeof globalThis?globalThis:u,p=Array.prototype,g=p.forEach,_=p.indexOf,v=null==d?void 0:d.navigator,f=null==d?void 0:d.document,w=null==d?void 0:d.location,S=null==d?void 0:d.fetch,k=null!=d&&d.XMLHttpRequest&&"withCredentials"in new d.XMLHttpRequest?d.XMLHttpRequest:void 0,x=null==d?void 0:d.AbortController,$=null==v?void 0:v.userAgent,N=null!=u?u:{},z={DEBUG:!1,LIB_VERSION:"1.260.2"},U="$copy_autocapture",W=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],er=((tu={}).GZipJS="gzip-js",tu.Base64="base64",tu),en=["fatal","error","warning","log","info","debug"];function m(a,l){return -1!==a.indexOf(l)}var b=function(a){return a.trim()},y=function(a){return a.replace(/^\$/,"")},ea=Array.isArray,el=Object.prototype,ec=el.hasOwnProperty,eu=el.toString,eh=ea||function(a){return"[object Array]"===eu.call(a)},E=a=>"function"==typeof a,I=a=>a===Object(a)&&!eh(a),P=a=>{if(I(a)){for(var l in a)if(ec.call(a,l))return!1;return!0}return!1},R=a=>void 0===a,T=a=>"[object String]"==eu.call(a),C=a=>T(a)&&0===a.trim().length,M=a=>null===a,F=a=>R(a)||M(a),O=a=>"[object Number]"==eu.call(a),A=a=>"[object Boolean]"===eu.call(a),D=a=>a instanceof FormData,j=a=>m(W,a),L=a=>{var l={t:function(l){if(u&&(z.DEBUG||N.POSTHOG_DEBUG)&&!R(u.console)&&u.console){for(var c=("__rrweb_original__"in u.console[l])?u.console[l].__rrweb_original__:u.console[l],d=arguments.length,p=Array(d>1?d-1:0),g=1;g<d;g++)p[g-1]=arguments[g];c(a,...p)}},info:function(){for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];l.t("log",...c)},warn:function(){for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];l.t("warn",...c)},error:function(){for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];l.t("error",...c)},critical:function(){for(var l=arguments.length,c=Array(l),u=0;u<l;u++)c[u]=arguments[u];console.error(a,...c)},uninitializedWarning:a=>{l.error("You must initialize PostHog before calling "+a)},createLogger:l=>L(a+" "+l)};return l},ed=L("[PostHog.js]"),ep=ed.createLogger,eg=ep("[ExternalScriptsLoader]"),q=(a,l,c)=>{if(a.config.disable_external_dependency_loading)return eg.warn(l+" was requested but loading of external scripts is disabled."),c("Loading of external scripts is disabled");var u=null==f?void 0:f.querySelectorAll("script");if(u){for(var d=0;d<u.length;d++)if(u[d].src===l)return c()}var n=()=>{if(!f)return c("document not found");var u=f.createElement("script");if(u.type="text/javascript",u.crossOrigin="anonymous",u.src=l,u.onload=a=>c(void 0,a),u.onerror=a=>c(a),a.config.prepare_external_dependency_script&&(u=a.config.prepare_external_dependency_script(u)),!u)return c("prepare_external_dependency_script returned null");var d,p=f.querySelectorAll("body > script");p.length>0?null==(d=p[0].parentNode)||d.insertBefore(u,p[0]):f.body.appendChild(u)};null!=f&&f.body?n():null==f||f.addEventListener("DOMContentLoaded",n)};function B(){return(B=Object.assign?Object.assign.bind():function(a){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var u in c)({}).hasOwnProperty.call(c,u)&&(a[u]=c[u])}return a}).apply(null,arguments)}function H(a,l){if(null==a)return{};var c={};for(var u in a)if(({}).hasOwnProperty.call(a,u)){if(-1!==l.indexOf(u))continue;c[u]=a[u]}return c}N.__PosthogExtensions__=N.__PosthogExtensions__||{},N.__PosthogExtensions__.loadExternalDependency=(a,l,c)=>{var u="/static/"+l+".js?v="+a.version;"remote-config"===l&&(u="/array/"+a.config.token+"/config.js"),"toolbar"===l&&(u=u+"&t="+3e5*Math.floor(Date.now()/3e5));var d=a.requestRouter.endpointFor("assets",u);q(a,d,c)},N.__PosthogExtensions__.loadSiteApp=(a,l,c)=>{var u=a.requestRouter.endpointFor("api",l);q(a,u,c)};var e_={};function G(a,l,c){if(eh(a)){if(g&&a.forEach===g)a.forEach(l,c);else if("length"in a&&a.length===+a.length){for(var u=0,d=a.length;u<d;u++)if(u in a&&l.call(c,a[u],u)===e_)return}}}function J(a,l,c){if(!F(a)){if(eh(a))return G(a,l,c);if(D(a)){for(var u of a.entries())if(l.call(c,u[1],u[0])===e_)return}else for(var d in a)if(ec.call(a,d)&&l.call(c,a[d],d)===e_)return}}var V=function(a){for(var l=arguments.length,c=Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];return G(c,function(l){for(var c in l)void 0!==l[c]&&(a[c]=l[c])}),a},K=function(a){for(var l=arguments.length,c=Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];return G(c,function(l){G(l,function(l){a.push(l)})}),a};function Y(a){for(var l=Object.keys(a),c=l.length,u=Array(c);c--;)u[c]=[l[c],a[l[c]]];return u}var X=function(a){try{return a()}catch(a){return}},Q=function(a){return function(){try{for(var l=arguments.length,c=Array(l),u=0;u<l;u++)c[u]=arguments[u];return a.apply(this,c)}catch(a){ed.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),ed.critical(a)}}},Z=function(a){var l={};return J(a,function(a,c){(T(a)&&a.length>0||O(a))&&(l[c]=a)}),l};function tt(a,l){var c,u;return c=a=>T(a)&&!M(l)?a.slice(0,l):a,u=new Set,function t(a,l){var d;return a!==Object(a)?c?c(a,l):a:u.has(a)?void 0:(u.add(a),eh(a)?(d=[],G(a,a=>{d.push(t(a))})):(d={},J(a,(a,l)=>{u.has(a)||(d[l]=t(a,l))})),d)}(a)}var ev=["herokuapp.com","vercel.app","netlify.app"];function et(a){var l=null==a?void 0:a.hostname;if(!T(l))return!1;var c=l.split(".").slice(-2).join(".");for(var u of ev)if(c===u)return!1;return!0}function rt(a,l){for(var c=0;c<a.length;c++)if(l(a[c]))return a[c]}function st(a,l,c,u){var{capture:d=!1,passive:p=!0}=null!=u?u:{};null==a||a.addEventListener(l,c,{capture:d,passive:p})}var ef="$people_distinct_id",em="__alias",ey="__timers",eb="$autocapture_disabled_server_side",ew="$heatmaps_enabled_server_side",eE="$exception_capture_enabled_server_side",eS="$error_tracking_suppression_rules",ek="$error_tracking_capture_extension_exceptions",ex="$web_vitals_enabled_server_side",eR="$dead_clicks_enabled_server_side",eI="$web_vitals_allowed_metrics",eF="$session_recording_enabled_server_side",e$="$console_log_recording_enabled_server_side",eP="$session_recording_network_payload_capture",eM="$session_recording_masking",eT="$session_recording_canvas_recording",eO="$replay_sample_rate",eC="$replay_minimum_duration",eA="$replay_script_config",eL="$sesid",eD="$session_is_sampled",eN="$session_recording_url_trigger_activated_session",eB="$session_recording_event_trigger_activated_session",ej="$enabled_feature_flags",eq="$early_access_features",eH="$feature_flag_details",ez="$stored_person_properties",eU="$stored_group_properties",eV="$surveys",eG="$surveys_activated",eJ="$flag_call_reported",eW="$user_state",eY="$client_session_props",eK="$capture_rate_limit",eX="$initial_campaign_params",eZ="$initial_referrer_info",eQ="$initial_person_info",e0="$epp",e1="__POSTHOG_TOOLBAR__",e2="$posthog_cookieless",e3=[ef,em,"__cmpns",ey,eF,ew,eL,ej,eS,eW,eq,eH,eU,ez,eV,eJ,eY,eK,eX,eZ,e0,eQ];function Gt(a){return a instanceof Element&&(a.id===e1||!(null==a.closest||!a.closest(".toolbar-global-fade-container")))}function Jt(a){return!!a&&1===a.nodeType}function Vt(a,l){return!!a&&!!a.tagName&&a.tagName.toLowerCase()===l.toLowerCase()}function Kt(a){return!!a&&3===a.nodeType}function Yt(a){return!!a&&11===a.nodeType}function Xt(a){return a?b(a).split(/\s+/):[]}function Qt(a){var l=null==u?void 0:u.location.href;return!!(l&&a&&a.some(a=>l.match(a)))}function Zt(a){var l="";switch(typeof a.className){case"string":l=a.className;break;case"object":l=(a.className&&"baseVal"in a.className?a.className.baseVal:null)||a.getAttribute("class")||"";break;default:l=""}return Xt(l)}function ti(a){return F(a)?null:b(a).split(/(\s+)/).filter(a=>fi(a)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function ii(a){var l="";return oi(a)&&!ai(a)&&a.childNodes&&a.childNodes.length&&J(a.childNodes,function(a){var c;Kt(a)&&a.textContent&&(l+=null!==(c=ti(a.textContent))&&void 0!==c?c:"")}),b(l)}function ei(a){var l;return R(a.target)?a.srcElement||null:null!=(l=a.target)&&l.shadowRoot?a.composedPath()[0]||null:a.target||null}var e5=["a","button","form","input","select","textarea","label"];function si(a){var l=a.parentNode;return!(!l||!Jt(l))&&l}function ni(a,l,c,d,p){if(void 0===c&&(c=void 0),!u||!a||Vt(a,"html")||!Jt(a)||null!=(g=c)&&g.url_allowlist&&!Qt(c.url_allowlist)||null!=(_=c)&&_.url_ignorelist&&Qt(c.url_ignorelist))return!1;if(null!=(v=c)&&v.dom_event_allowlist){var g,_,v,f=c.dom_event_allowlist;if(f&&!f.some(a=>l.type===a))return!1}for(var w=!1,S=[a],k=!0,x=a;x.parentNode&&!Vt(x,"body");)if(Yt(x.parentNode))S.push(x.parentNode.host),x=x.parentNode.host;else{if(!(k=si(x)))break;if(d||e5.indexOf(k.tagName.toLowerCase())>-1)w=!0;else{var $=u.getComputedStyle(k);$&&"pointer"===$.getPropertyValue("cursor")&&(w=!0)}S.push(k),x=k}if(!function(a,l){var c=null==l?void 0:l.element_allowlist;if(R(c))return!0;var u,s=function(a){if(c.some(l=>a.tagName.toLowerCase()===l))return{v:!0}};for(var d of a)if(u=s(d))return u.v;return!1}(S,c)||!function(a,l){var c=null==l?void 0:l.css_selector_allowlist;if(R(c))return!0;var u,s=function(a){if(c.some(l=>a.matches(l)))return{v:!0}};for(var d of a)if(u=s(d))return u.v;return!1}(S,c))return!1;var N=u.getComputedStyle(a);if(N&&"pointer"===N.getPropertyValue("cursor")&&"click"===l.type)return!0;var z=a.tagName.toLowerCase();switch(z){case"html":return!1;case"form":return(p||["submit"]).indexOf(l.type)>=0;case"input":case"select":case"textarea":return(p||["change","click"]).indexOf(l.type)>=0;default:return w?(p||["click"]).indexOf(l.type)>=0:(p||["click"]).indexOf(l.type)>=0&&(e5.indexOf(z)>-1||"true"===a.getAttribute("contenteditable"))}}function oi(a){for(var l=a;l.parentNode&&!Vt(l,"body");l=l.parentNode){var c=Zt(l);if(m(c,"ph-sensitive")||m(c,"ph-no-capture"))return!1}if(m(Zt(a),"ph-include"))return!0;var u=a.type||"";if(T(u))switch(u.toLowerCase()){case"hidden":case"password":return!1}var d=a.name||a.id||"";return!(T(d)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(d.replace(/[^a-zA-Z0-9]/g,"")))}function ai(a){return!!(Vt(a,"input")&&!["button","checkbox","submit","reset"].includes(a.type)||Vt(a,"select")||Vt(a,"textarea")||"true"===a.getAttribute("contenteditable"))}var e6="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",e4=RegExp("^(?:"+e6+")$"),e8=new RegExp(e6),e7="\\d{3}-?\\d{2}-?\\d{4}",e9=RegExp("^("+e7+")$"),tn=RegExp("("+e7+")");function fi(a,l){return void 0===l&&(l=!0),!(F(a)||T(a)&&(a=b(a),(l?e4:e8).test((a||"").replace(/[- ]/g,""))||(l?e9:tn).test(a)))}function pi(a){var l=ii(a);return fi(l=(l+" "+_i(a)).trim())?l:""}function _i(a){var l="";return a&&a.childNodes&&a.childNodes.length&&J(a.childNodes,function(a){var c;if(a&&"span"===(null==(c=a.tagName)?void 0:c.toLowerCase()))try{var u=ii(a);l=(l+" "+u).trim(),a.childNodes&&a.childNodes.length&&(l=(l+" "+_i(a)).trim())}catch(a){ed.error("[AutoCapture]",a)}}),l}function gi(a){return a.map(a=>{var l,c,u={text:null==(l=a.$el_text)?void 0:l.slice(0,400),tag_name:a.tag_name,href:null==(c=a.attr__href)?void 0:c.slice(0,2048),attr_class:bi(a),attr_id:a.attr__id,nth_child:a.nth_child,nth_of_type:a.nth_of_type,attributes:{}};return Y(a).filter(a=>{var[l]=a;return 0===l.indexOf("attr__")}).forEach(a=>{var[l,c]=a;return u.attributes[l]=c}),u}).map(a=>{var l,c,u="";if(a.tag_name&&(u+=a.tag_name),a.attr_class)for(var d of(a.attr_class.sort(),a.attr_class))u+="."+d.replace(/"/g,"");var p=B({},a.text?{text:a.text}:{},{"nth-child":null!==(l=a.nth_child)&&void 0!==l?l:0,"nth-of-type":null!==(c=a.nth_of_type)&&void 0!==c?c:0},a.href?{href:a.href}:{},a.attr_id?{attr_id:a.attr_id}:{},a.attributes),g={};return Y(p).sort((a,l)=>{var[c]=a,[u]=l;return c.localeCompare(u)}).forEach(a=>{var[l,c]=a;return g[mi(l.toString())]=mi(c.toString())}),u+=":"+Y(g).map(a=>{var[l,c]=a;return l+'="'+c+'"'}).join("")}).join(";")}function mi(a){return a.replace(/"|\\"/g,'\\"')}function bi(a){var l=a.attr__class;return l?eh(l)?l:Xt(l):void 0}let yi=class yi{constructor(){this.clicks=[]}isRageClick(a,l,c){var u=this.clicks[this.clicks.length-1];if(u&&Math.abs(a-u.x)+Math.abs(l-u.y)<30&&c-u.timestamp<1e3){if(this.clicks.push({x:a,y:l,timestamp:c}),3===this.clicks.length)return!0}else this.clicks=[{x:a,y:l,timestamp:c}];return!1}};var ta=["localhost","127.0.0.1"],Si=a=>{var l=null==f?void 0:f.createElement("a");return R(l)?null:(l.href=a,l)},$i=function(a,l){void 0===l&&(l="&");var c,u,d=[];return J(a,function(a,l){R(a)||R(l)||"undefined"===l||(c=encodeURIComponent(a instanceof File?a.name:a.toString()),u=encodeURIComponent(l),d[d.length]=u+"="+c)}),d.join(l)},xi=function(a,l){for(var c,u=((a.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),d=0;d<u.length;d++){var p=u[d].split("=");if(p[0]===l){c=p;break}}if(!eh(c)||c.length<2)return"";var g=c[1];try{g=decodeURIComponent(g)}catch(a){ed.error("Skipping decoding for malformed query param: "+g)}return g.replace(/\+/g," ")},ki=function(a,l,c){if(!a||!l||!l.length)return a;for(var u=a.split("#"),d=u[0]||"",p=u[1],g=d.split("?"),_=g[1],v=g[0],f=(_||"").split("&"),w=[],S=0;S<f.length;S++){var k=f[S].split("=");eh(k)&&(l.includes(k[0])?w.push(k[0]+"="+c):w.push(f[S]))}var x=v;return null!=_&&(x+="?"+w.join("&")),null!=p&&(x+="#"+p),x},Ei=function(a,l){var c=a.match(RegExp(l+"=([^&]*)"));return c?c[1]:null},tl=ep("[AutoCapture]");function Pi(a,l){return l.length>a?l.slice(0,a)+"...":l}function Ri(a){if(a.previousElementSibling)return a.previousElementSibling;var l=a;do l=l.previousSibling;while(l&&!Jt(l));return l}function Ti(a,l,c,u){var d=a.tagName.toLowerCase(),p={tag_name:d};e5.indexOf(d)>-1&&!c&&("a"===d.toLowerCase()||"button"===d.toLowerCase()?p.$el_text=Pi(1024,pi(a)):p.$el_text=Pi(1024,ii(a)));var g=Zt(a);g.length>0&&(p.classes=g.filter(function(a){return""!==a})),J(a.attributes,function(c){var d;if((!ai(a)||-1!==["name","id","class","aria-label"].indexOf(c.name))&&(null==u||!u.includes(c.name))&&!l&&fi(c.value)&&(!T(d=c.name)||"_ngcontent"!==d.substring(0,10)&&"_nghost"!==d.substring(0,7))){var g=c.value;"class"===c.name&&(g=Xt(g).join(" ")),p["attr__"+c.name]=Pi(1024,g)}});for(var _=1,v=1,f=a;f=Ri(f);)_++,f.tagName===a.tagName&&v++;return p.nth_child=_,p.nth_of_type=v,p}function Ci(a,l){for(var c,d,{e:p,maskAllElementAttributes:g,maskAllText:_,elementAttributeIgnoreList:v,elementsChainAsString:f}=l,w=[a],S=a;S.parentNode&&!Vt(S,"body");)Yt(S.parentNode)?(w.push(S.parentNode.host),S=S.parentNode.host):(w.push(S.parentNode),S=S.parentNode);var k,x=[],$={},N=!1,z=!1;if(J(w,a=>{var l=oi(a);"a"===a.tagName.toLowerCase()&&(N=a.getAttribute("href"),N=l&&N&&fi(N)&&N),m(Zt(a),"ph-no-capture")&&(z=!0),x.push(Ti(a,g,_,v)),V($,function(a){if(!oi(a))return{};var l={};return J(a.attributes,function(a){if(a.name&&0===a.name.indexOf("data-ph-capture-attribute")){var c=a.name.replace("data-ph-capture-attribute-",""),u=a.value;c&&u&&fi(u)&&(l[c]=u)}}),l}(a))}),z)return{props:{},explicitNoCapture:z};if(_||("a"===a.tagName.toLowerCase()||"button"===a.tagName.toLowerCase()?x[0].$el_text=pi(a):x[0].$el_text=ii(a)),N){x[0].attr__href=N;var U,W,er=null==(U=Si(N))?void 0:U.host,en=null==u||null==(W=u.location)?void 0:W.host;er&&en&&er!==en&&(k=N)}return{props:V({$event_type:p.type,$ce_version:1},f?{}:{$elements:x},{$elements_chain:gi(x)},null!=(c=x[0])&&c.$el_text?{$el_text:null==(d=x[0])?void 0:d.$el_text}:{},k&&"click"===p.type?{$external_click_url:k}:{},$)}}let Mi=class Mi{constructor(a){this.i=!1,this.o=null,this.rageclicks=new yi,this.h=!1,this.instance=a,this.m=null}get S(){var a,l,c=I(this.instance.config.autocapture)?this.instance.config.autocapture:{};return c.url_allowlist=null==(a=c.url_allowlist)?void 0:a.map(a=>new RegExp(a)),c.url_ignorelist=null==(l=c.url_ignorelist)?void 0:l.map(a=>new RegExp(a)),c}$(){if(this.isBrowserSupported()){if(u&&f){var i=a=>{a=a||(null==u?void 0:u.event);try{this.k(a)}catch(a){tl.error("Failed to capture event",a)}};if(st(f,"submit",i,{capture:!0}),st(f,"change",i,{capture:!0}),st(f,"click",i,{capture:!0}),this.S.capture_copied_text){var e=a=>{a=a||(null==u?void 0:u.event),this.k(a,U)};st(f,"copy",e,{capture:!0}),st(f,"cut",e,{capture:!0})}}}else tl.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(a){a.elementsChainAsString&&(this.h=a.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[eb]:!!a.autocapture_opt_out}),this.o=!!a.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(a){this.m=a}getElementSelectors(a){var l,c=[];return null==(l=this.m)||l.forEach(l=>{var u=null==f?void 0:f.querySelectorAll(l);null==u||u.forEach(u=>{a===u&&c.push(l)})}),c}get isEnabled(){var a,l,c=null==(a=this.instance.persistence)?void 0:a.props[eb];if(M(this.o)&&!A(c)&&!this.instance.I())return!1;var u=null!==(l=this.o)&&void 0!==l?l:!!c;return!!this.instance.config.autocapture&&!u}k(a,l){if(void 0===l&&(l="$autocapture"),this.isEnabled){var c,d=ei(a);Kt(d)&&(d=d.parentNode||null),"$autocapture"===l&&"click"===a.type&&a instanceof MouseEvent&&this.instance.config.rageclick&&null!=(c=this.rageclicks)&&c.isRageClick(a.clientX,a.clientY,(new Date).getTime())&&this.k(a,"$rageclick");var p=l===U;if(d&&ni(d,a,this.S,p,p?["copy","cut"]:void 0)){var{props:g,explicitNoCapture:_}=Ci(d,{e:a,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(_)return!1;var v=this.getElementSelectors(d);if(v&&v.length>0&&(g.$element_selectors=v),l===U){var f,w=ti(null==u||null==(f=u.getSelection())?void 0:f.toString()),S=a.type||"clipboard";if(!w)return!1;g.$selected_content=w,g.$copy_type=S}return this.instance.capture(l,g),!0}}}isBrowserSupported(){return E(null==f?void 0:f.querySelectorAll)}};Math.trunc||(Math.trunc=function(a){return a<0?Math.ceil(a):Math.floor(a)}),Number.isInteger||(Number.isInteger=function(a){return O(a)&&isFinite(a)&&Math.floor(a)===a});var tc="0123456789abcdef";let Oi=class Oi{constructor(a){if(this.bytes=a,16!==a.length)throw TypeError("not 128-bit length")}static fromFieldsV7(a,l,c,u){if(!Number.isInteger(a)||!Number.isInteger(l)||!Number.isInteger(c)||!Number.isInteger(u)||a<0||l<0||c<0||u<0||a>0xffffffffffff||l>4095||c>1073741823||u>4294967295)throw RangeError("invalid field value");var d=new Uint8Array(16);return d[0]=a/1099511627776,d[1]=a/4294967296,d[2]=a/16777216,d[3]=a/65536,d[4]=a/256,d[5]=a,d[6]=112|l>>>8,d[7]=l,d[8]=128|c>>>24,d[9]=c>>>16,d[10]=c>>>8,d[11]=c,d[12]=u>>>24,d[13]=u>>>16,d[14]=u>>>8,d[15]=u,new Oi(d)}toString(){for(var a="",l=0;l<this.bytes.length;l++)a=a+tc.charAt(this.bytes[l]>>>4)+tc.charAt(15&this.bytes[l]),3!==l&&5!==l&&7!==l&&9!==l||(a+="-");if(36!==a.length)throw Error("Invalid UUIDv7 was generated");return a}clone(){return new Oi(this.bytes.slice(0))}equals(a){return 0===this.compareTo(a)}compareTo(a){for(var l=0;l<16;l++){var c=this.bytes[l]-a.bytes[l];if(0!==c)return Math.sign(c)}return 0}};let Ai=class Ai{constructor(){this.P=0,this.R=0,this.T=new Li}generate(){var a=this.generateOrAbort();if(R(a)){this.P=0;var l=this.generateOrAbort();if(R(l))throw Error("Could not generate UUID after timestamp reset");return l}return a}generateOrAbort(){var a=Date.now();if(a>this.P)this.P=a,this.C();else{if(!(a+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.C())}return Oi.fromFieldsV7(this.P,Math.trunc(this.R/1073741824),1073741823&this.R,this.T.nextUint32())}C(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var tu,th,ji=a=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw Error("no cryptographically strong RNG available");for(var l=0;l<a.length;l++)a[l]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return a};u&&!R(u.crypto)&&crypto.getRandomValues&&(ji=a=>crypto.getRandomValues(a));let Li=class Li{constructor(){this.M=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.M.length&&(ji(this.M),this.F=0),this.M[this.F++]}};var Ni=()=>zi().toString(),zi=()=>(th||(th=new Ai)).generate(),td="",tp=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function Bi(a,l){if(l){var c=function(a,l){if(void 0===l&&(l=f),td)return td;if(!l||["localhost","127.0.0.1"].includes(a))return"";for(var c=a.split("."),u=Math.min(c.length,8),d="dmn_chk_"+Ni();!td&&u--;){var p=c.slice(u).join("."),g=d+"=1;domain=."+p+";path=/";l.cookie=g+";max-age=3",l.cookie.includes(d)&&(l.cookie=g+";max-age=0",td=p)}return td}(a);if(!c){var u,d=(u=a.match(tp))?u[0]:"";d!==c&&ed.info("Warning: cookie subdomain discovery mismatch",d,c),c=d}return c?"; domain=."+c:""}return""}var tg={O:()=>!!f,A:function(a){ed.error("cookieStore error: "+a)},D:function(a){if(f){try{for(var l=a+"=",c=f.cookie.split(";").filter(a=>a.length),u=0;u<c.length;u++){for(var d=c[u];" "==d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(l))return decodeURIComponent(d.substring(l.length,d.length))}}catch(a){}return null}},j:function(a){var l;try{l=JSON.parse(tg.D(a))||{}}catch(a){}return l},L:function(a,l,c,u,d){if(f)try{var p="",g="",_=Bi(f.location.hostname,u);if(c){var v=new Date;v.setTime(v.getTime()+24*c*36e5),p="; expires="+v.toUTCString()}d&&(g="; secure");var w=a+"="+encodeURIComponent(JSON.stringify(l))+p+"; SameSite=Lax; path=/"+_+g;return w.length>3686.4&&ed.warn("cookieStore warning: large cookie, len="+w.length),f.cookie=w,w}catch(a){return}},N:function(a,l){if(null!=f&&f.cookie)try{tg.L(a,"",-1,l)}catch(a){return}}},t_=null,tv={O:function(){if(!M(t_))return t_;var a=!0;if(R(u))a=!1;else try{var l="__mplssupport__";tv.L(l,"xyz"),'"xyz"'!==tv.D(l)&&(a=!1),tv.N(l)}catch(l){a=!1}return a||ed.error("localStorage unsupported; falling back to cookie store"),t_=a,a},A:function(a){ed.error("localStorage error: "+a)},D:function(a){try{return null==u?void 0:u.localStorage.getItem(a)}catch(a){tv.A(a)}return null},j:function(a){try{return JSON.parse(tv.D(a))||{}}catch(a){}return null},L:function(a,l){try{null==u||u.localStorage.setItem(a,JSON.stringify(l))}catch(a){tv.A(a)}},N:function(a){try{null==u||u.localStorage.removeItem(a)}catch(a){tv.A(a)}}},tf=["distinct_id",eL,eD,e0,eQ],tm=B({},tv,{j:function(a){try{var l={};try{l=tg.j(a)||{}}catch(a){}var c=V(l,JSON.parse(tv.D(a)||"{}"));return tv.L(a,c),c}catch(a){}return null},L:function(a,l,c,u,d,p){try{tv.L(a,l,void 0,void 0,p);var g={};tf.forEach(a=>{l[a]&&(g[a]=l[a])}),Object.keys(g).length&&tg.L(a,g,c,u,d,p)}catch(a){tv.A(a)}},N:function(a,l){try{null==u||u.localStorage.removeItem(a),tg.N(a,l)}catch(a){tv.A(a)}}}),ty={},tb={O:function(){return!0},A:function(a){ed.error("memoryStorage error: "+a)},D:function(a){return ty[a]||null},j:function(a){return ty[a]||null},L:function(a,l){ty[a]=l},N:function(a){delete ty[a]}},tw=null,tE={O:function(){if(!M(tw))return tw;if(tw=!0,R(u))tw=!1;else try{var a="__support__";tE.L(a,"xyz"),'"xyz"'!==tE.D(a)&&(tw=!1),tE.N(a)}catch(a){tw=!1}return tw},A:function(a){ed.error("sessionStorage error: ",a)},D:function(a){try{return null==u?void 0:u.sessionStorage.getItem(a)}catch(a){tE.A(a)}return null},j:function(a){try{return JSON.parse(tE.D(a))||null}catch(a){}return null},L:function(a,l){try{null==u||u.sessionStorage.setItem(a,JSON.stringify(l))}catch(a){tE.A(a)}},N:function(a){try{null==u||u.sessionStorage.removeItem(a)}catch(a){tE.A(a)}}},tS=((tO={})[tO.PENDING=-1]="PENDING",tO[tO.DENIED=0]="DENIED",tO[tO.GRANTED=1]="GRANTED",tO);let te=class te{constructor(a){this._instance=a}get S(){return this._instance.config}get consent(){return this.U()?tS.DENIED:this.q}isOptedOut(){return"always"===this.S.cookieless_mode||this.consent===tS.DENIED||this.consent===tS.PENDING&&(this.S.opt_out_capturing_by_default||"on_reject"===this.S.cookieless_mode)}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===tS.DENIED}optInOut(a){this.B.L(this.H,a?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:a,opt_out_capturing_cookie_prefix:l,consent_persistence_name:c}=this._instance.config;return c||(l?l+a:"__ph_opt_in_out_"+a)}get q(){var a=this.B.D(this.H);return"1"===a?tS.GRANTED:"0"===a?tS.DENIED:tS.PENDING}get B(){if(!this.W){var a=this.S.opt_out_capturing_persistence_type;this.W="localStorage"===a?tv:tg;var l="localStorage"===a?tg:tv;l.D(this.H)&&(this.W.D(this.H)||this.optInOut("1"===l.D(this.H)),l.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!rt([null==v?void 0:v.doNotTrack,null==v?void 0:v.msDoNotTrack,N.doNotTrack],a=>m([!0,1,"1","yes"],a))}};var tk=ep("[Dead Clicks]"),ee=()=>!0,re=a=>{var l,c=!(null==(l=a.instance.persistence)||!l.get_property(eR)),u=a.instance.config.capture_dead_clicks;return A(u)?u:c};let se=class se{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(a,l,c){this.instance=a,this.isEnabled=l,this.onCapture=c,this.startIfEnabled()}onRemoteConfig(a){this.instance.persistence&&this.instance.persistence.register({[eR]:null==a?void 0:a.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(a){var l,c;null!=(l=N.__PosthogExtensions__)&&l.initDeadClicksAutocapture&&a(),null==(c=N.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this.instance,"dead-clicks-autocapture",l=>{l?tk.error("failed to load script",l):a()})}V(){var a;if(f){if(!this.G&&null!=(a=N.__PosthogExtensions__)&&a.initDeadClicksAutocapture){var l=I(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};l.__onCapture=this.onCapture,this.G=N.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,l),this.G.start(f),tk.info("starting...")}}else tk.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,tk.info("stopping..."))}};function ne(a,l,c,u,d){return l>c&&(ed.warn("min cannot be greater than max."),l=c),O(a)?a>c?(u&&ed.warn(u+" cannot be  greater than max: "+c+". Using max value instead."),c):a<l?(u&&ed.warn(u+" cannot be less than min: "+l+". Using min value instead."),l):a:(u&&ed.warn(u+" must be a number. using max or fallback. max: "+c+", fallback: "+d),ne(d||c,l,c,u))}let oe=class oe{constructor(a){this.K={},this.Y=()=>{Object.keys(this.K).forEach(a=>{var l=this.X(a)+this.Z;l>=this.tt?delete this.K[a]:this.it(a,l)})},this.X=a=>this.K[String(a)],this.it=(a,l)=>{this.K[String(a)]=l},this.consumeRateLimit=a=>{var l,c=null!==(l=this.X(a))&&void 0!==l?l:this.tt;if(0===(c=Math.max(c-1,0)))return!0;this.it(a,c);var u,d=0===c;return d&&(null==(u=this.et)||u.call(this,a)),d},this.rt=a,this.et=this.rt.et,this.tt=ne(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=ne(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=ne(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var tx=ep("[ExceptionAutocapture]");let le=class le{constructor(a){var l,c,d;this.nt=()=>{var a;if(u&&this.isEnabled&&null!=(a=N.__PosthogExtensions__)&&a.errorWrappingFunctions){var l=N.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,c=N.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,d=N.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=l(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=c(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=d(this.captureException.bind(this)))}catch(a){tx.error("failed to start",a),this.ht()}}},this._instance=a,this.dt=!(null==(l=this._instance.persistence)||!l.props[eE]),this.S=this.vt(),this.ct=new oe({refillRate:null!==(c=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)&&void 0!==c?c:1,bucketSize:null!==(d=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)&&void 0!==d?d:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var a=this._instance.config.capture_exceptions,l={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return I(a)?l=B({},l,a):(R(a)?this.dt:a)&&(l=B({},l,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),l}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(tx.info("enabled"),this.J(this.nt))}J(a){var l,c;null!=(l=N.__PosthogExtensions__)&&l.errorWrappingFunctions&&a(),null==(c=N.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"exception-autocapture",l=>{if(l)return tx.error("failed to load script",l);a()})}ht(){var a,l,c;null==(a=this.ot)||a.call(this),this.ot=void 0,null==(l=this.lt)||l.call(this),this.lt=void 0,null==(c=this.ut)||c.call(this),this.ut=void 0}onRemoteConfig(a){var l=a.autocaptureExceptions;this.dt=!!l,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[eE]:this.dt}),this.startIfEnabled()}captureException(a){var l,c=this._instance.requestRouter.endpointFor("ui");a.$exception_personURL=c+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var u=null!==(l=a.$exception_list[0].type)&&void 0!==l?l:"Exception";this.ct.consumeRateLimit(u)?tx.info("Skipping exception capture because of client rate limiting.",{exception:a.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(a)}};function ue(a){return!R(Event)&&he(a,Event)}function he(a,l){try{return a instanceof l}catch(a){return!1}}function de(a){switch(Object.prototype.toString.call(a)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return he(a,Error)}}function ve(a,l){return Object.prototype.toString.call(a)==="[object "+l+"]"}function ce(a){return ve(a,"DOMError")}var tR=/\(error: (.*)\)/;function ge(a,l,c,u){var d={platform:"web:javascript",filename:a,function:"<anonymous>"===l?"?":l,in_app:!0};return R(c)||(d.lineno=c),R(u)||(d.colno=u),d}var tI=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,tF=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,t$=/\((\S*)(?::(\d+))(?::(\d+))\)/,tP=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,tM=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,tT=function(){for(var a=arguments.length,l=Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=l.sort((a,l)=>a[0]-l[0]).map(a=>a[1]);return function(a,l){void 0===l&&(l=0);for(var c=[],d=a.split("\n"),p=l;p<d.length;p++){var g=d[p];if(!(g.length>1024)){var _=tR.test(g)?g.replace(tR,"$1"):g;if(!_.match(/\S*Error: /)){for(var v of u){var f=v(_);if(f){c.push(f);break}}if(c.length>=50)break}}}return function(a){if(!a.length)return[];var l=Array.from(a);return l.reverse(),l.slice(0,50).map(a=>B({},a,{filename:a.filename||xe(l).filename,function:a.function||"?"}))}(c)}}(...[[30,a=>{var l=tI.exec(a);if(l){var[,c,u,d]=l;return ge(c,"?",+u,+d)}var p=tF.exec(a);if(p){if(p[2]&&0===p[2].indexOf("eval")){var g=t$.exec(p[2]);g&&(p[2]=g[1],p[3]=g[2],p[4]=g[3])}var[_,v]=Pe(p[1]||"?",p[2]);return ge(v,_,p[3]?+p[3]:void 0,p[4]?+p[4]:void 0)}}],[50,a=>{var l=tP.exec(a);if(l){if(l[3]&&l[3].indexOf(" > eval")>-1){var c=tM.exec(l[3]);c&&(l[1]=l[1]||"eval",l[3]=c[1],l[4]=c[2],l[5]="")}var u=l[3],d=l[1]||"?";return[d,u]=Pe(d,u),ge(u,d,l[4]?+l[4]:void 0,l[5]?+l[5]:void 0)}}]]);function xe(a){return a[a.length-1]||{}}var tO,tC,tA,tL,Pe=(a,l)=>{var c=-1!==a.indexOf("safari-extension"),u=-1!==a.indexOf("safari-web-extension");return c||u?[-1!==a.indexOf("@")?a.split("@")[0]:"?",c?"safari-extension:"+l:"safari-web-extension:"+l]:[a,l]},tD=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function Te(a,l){void 0===l&&(l=0);var c=a.stacktrace||a.stack||"",u=a&&tN.test(a.message)?1:0;try{var d,p,g=(d=tT(c,u),p=function(a){var l=globalThis._posthogChunkIds;if(!l)return{};var c=Object.keys(l);return tL&&c.length===tA||(tA=c.length,tL=c.reduce((c,u)=>{tC||(tC={});var d=tC[u];if(d)c[d[0]]=d[1];else for(var p=a(u),g=p.length-1;g>=0;g--){var _=p[g],v=null==_?void 0:_.filename,f=l[u];if(v&&f){c[v]=f,tC[u]=[v,f];break}}return c},{})),tL}(tT),d.forEach(a=>{a.filename&&(a.chunk_id=p[a.filename])}),d);return g.slice(0,g.length-l)}catch(a){}return[]}var tN=/Minified React error #\d+;/i;function Me(a,l){var c,u,d,p=Te(a),g=null===(u=null==l?void 0:l.handled)||void 0===u||u,_=null!==(d=null==l?void 0:l.synthetic)&&void 0!==d&&d;return{type:null!=l&&l.overrideExceptionType?l.overrideExceptionType:a.name,value:(c=a.message).error&&"string"==typeof c.error.message?String(c.error.message):String(c),stacktrace:{frames:p,type:"raw"},mechanism:{handled:g,synthetic:_}}}function Fe(a,l){var c=Me(a,l);return a.cause&&de(a.cause)&&a.cause!==a?[c,...Fe(a.cause,{handled:null==l?void 0:l.handled,synthetic:null==l?void 0:l.synthetic})]:[c]}function Oe(a,l){return{$exception_list:Fe(a,l),$exception_level:"error"}}function Ae(a,l){var c,u,d,p=null===(c=null==l?void 0:l.handled)||void 0===c||c,g=null===(u=null==l?void 0:l.synthetic)||void 0===u||u,_={type:null!=l&&l.overrideExceptionType?l.overrideExceptionType:null!==(d=null==l?void 0:l.defaultExceptionType)&&void 0!==d?d:"Error",value:a||(null==l?void 0:l.defaultExceptionMessage),mechanism:{handled:p,synthetic:g}};if(null!=l&&l.syntheticException){var v=Te(l.syntheticException,1);v.length&&(_.stacktrace={frames:v,type:"raw"})}return{$exception_list:[_],$exception_level:"error"}}function De(a){return T(a)&&!C(a)&&en.indexOf(a)>=0}function je(a,l){var c,u,d=null===(c=null==l?void 0:l.handled)||void 0===c||c,p=null===(u=null==l?void 0:l.synthetic)||void 0===u||u,g={type:null!=l&&l.overrideExceptionType?l.overrideExceptionType:ue(a)?a.constructor.name:"Error",value:"Non-Error 'exception' captured with keys: "+function(a,l){void 0===l&&(l=40);var c=Object.keys(a);if(c.sort(),!c.length)return"[object has no keys]";for(var u=c.length;u>0;u--){var d=c.slice(0,u).join(", ");if(!(d.length>l))return u===c.length||d.length<=l?d:d.slice(0,l)+"..."}return""}(a),mechanism:{handled:d,synthetic:p}};if(null!=l&&l.syntheticException){var _=Te(null==l?void 0:l.syntheticException,1);_.length&&(g.stacktrace={frames:_,type:"raw"})}return{$exception_list:[g],$exception_level:De(a.level)?a.level:"error"}}function Le(a,l){var{error:c,event:u}=a,d={$exception_list:[]},p=c||u;if(ce(p)||ve(p,"DOMException")){if("stack"in p)d=Oe(p,l);else{var g=p.name||(ce(p)?"DOMError":"DOMException"),_=p.message?g+": "+p.message:g;d=Ae(_,B({},l,{overrideExceptionType:ce(p)?"DOMError":"DOMException",defaultExceptionMessage:_}))}return"code"in p&&(d.$exception_DOMException_code=""+p.code),d}if(ve(p,"ErrorEvent")&&p.error)return Oe(p.error,l);if(de(p))return Oe(p,l);if(ve(p,"Object")||ue(p))return je(p,l);if(R(c)&&T(u)){var v="Error",f=u,w=u.match(tD);return w&&(v=w[1],f=w[2]),Ae(f,B({},l,{overrideExceptionType:v,defaultExceptionMessage:f}))}return Ae(p,l)}function Ne(a,l,c){try{if(!(l in a))return()=>{};var u=a[l],d=c(u);return E(d)&&(d.prototype=d.prototype||{},Object.defineProperties(d,{__posthog_wrapped__:{enumerable:!1,value:!0}})),a[l]=d,()=>{a[l]=u}}catch(a){return()=>{}}}let ze=class ze{constructor(a){var l;this._instance=a,this.ft=(null==u||null==(l=u.location)?void 0:l.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(ed.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this._t&&this._t(),this._t=void 0,ed.info("History API monitoring stopped")}monitorHistoryChanges(){var a,l;if(u&&u.history){var c=this;null!=(a=u.history.pushState)&&a.__posthog_wrapped__||Ne(u.history,"pushState",a=>function(l,u,d){a.call(this,l,u,d),c.gt("pushState")}),null!=(l=u.history.replaceState)&&l.__posthog_wrapped__||Ne(u.history,"replaceState",a=>function(l,u,d){a.call(this,l,u,d),c.gt("replaceState")}),this.bt()}}gt(a){try{var l,c=null==u||null==(l=u.location)?void 0:l.pathname;if(!c)return;c!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:a}),this.ft=c}catch(l){ed.error("Error capturing "+a+" pageview",l)}}bt(){if(!this._t){var i=()=>{this.gt("popstate")};st(u,"popstate",i),this._t=()=>{u&&u.removeEventListener("popstate",i)}}}};function Ue(a){var l,c;return(null==(l=JSON.stringify(a,(c=[],function(a,l){if(I(l)){for(;c.length>0&&c[c.length-1]!==this;)c.pop();return c.includes(l)?"[Circular]":(c.push(l),l)}return l})))?void 0:l.length)||0}function qe(a,l){if(void 0===l&&(l=6606028.8),a.size>=l&&a.data.length>1){var c=Math.floor(a.data.length/2),u=a.data.slice(0,c),d=a.data.slice(c);return[qe({size:Ue(u),data:u,sessionId:a.sessionId,windowId:a.windowId}),qe({size:Ue(d),data:d,sessionId:a.sessionId,windowId:a.windowId})].flatMap(a=>a)}return[a]}var tB=((sQ=tB||{})[sQ.DomContentLoaded=0]="DomContentLoaded",sQ[sQ.Load=1]="Load",sQ[sQ.FullSnapshot=2]="FullSnapshot",sQ[sQ.IncrementalSnapshot=3]="IncrementalSnapshot",sQ[sQ.Meta=4]="Meta",sQ[sQ.Custom=5]="Custom",sQ[sQ.Plugin=6]="Plugin",sQ),tj=((s0=tj||{})[s0.Mutation=0]="Mutation",s0[s0.MouseMove=1]="MouseMove",s0[s0.MouseInteraction=2]="MouseInteraction",s0[s0.Scroll=3]="Scroll",s0[s0.ViewportResize=4]="ViewportResize",s0[s0.Input=5]="Input",s0[s0.TouchMove=6]="TouchMove",s0[s0.MediaInteraction=7]="MediaInteraction",s0[s0.StyleSheetRule=8]="StyleSheetRule",s0[s0.CanvasMutation=9]="CanvasMutation",s0[s0.Font=10]="Font",s0[s0.Log=11]="Log",s0[s0.Drag=12]="Drag",s0[s0.StyleDeclaration=13]="StyleDeclaration",s0[s0.Selection=14]="Selection",s0[s0.AdoptedStyleSheet=15]="AdoptedStyleSheet",s0[s0.CustomElement=16]="CustomElement",s0),tq="[SessionRecording]",tH="redacted",tz={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:a=>a,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},tU=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],tV=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],tG=["/s/","/e/","/i/"];function Xe(a,l,c,u){if(F(a))return a;var d=(null==l?void 0:l["content-length"])||new Blob([a]).size;return T(d)&&(d=parseInt(d)),d>c?tq+" "+u+" body too large to record ("+d+" bytes)":a}function Qe(a,l){if(F(a))return a;var c=a;return fi(c,!1)||(c=tq+" "+l+" body "+tH),J(tV,a=>{var u,d;null!=(u=c)&&u.length&&-1!==(null==(d=c)?void 0:d.indexOf(a))&&(c=tq+" "+l+" body "+tH+" as might contain: "+a)}),c}var Ze=(a,l)=>{var c,u,d={payloadSizeLimitBytes:tz.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...tz.performanceEntryTypeToObserve],payloadHostDenyList:[...l.payloadHostDenyList||[],...tz.payloadHostDenyList]},p=!1!==a.session_recording.recordHeaders&&l.recordHeaders,g=!1!==a.session_recording.recordBody&&l.recordBody,_=!1!==a.capture_performance&&l.recordPerformance,v=(u=Math.min(1e6,null!==(c=d.payloadSizeLimitBytes)&&void 0!==c?c:1e6),a=>(null!=a&&a.requestBody&&(a.requestBody=Xe(a.requestBody,a.requestHeaders,u,"Request")),null!=a&&a.responseBody&&(a.responseBody=Xe(a.responseBody,a.responseHeaders,u,"Response")),a)),h=l=>{var c;return v(((a,l)=>{var c,u=Si(a.name),d=0===l.indexOf("http")?null==(c=Si(l))?void 0:c.pathname:l;"/"===d&&(d="");var p=null==u?void 0:u.pathname.replace(d||"","");if(!(u&&p&&tG.some(a=>0===p.indexOf(a))))return a})((F(c=l.requestHeaders)||J(Object.keys(null!=c?c:{}),a=>{tU.includes(a.toLowerCase())&&(c[a]=tH)}),l),a.api_host))},f=E(a.session_recording.maskNetworkRequestFn);return f&&E(a.session_recording.maskCapturedNetworkRequestFn)&&ed.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),f&&(a.session_recording.maskCapturedNetworkRequestFn=l=>{var c=a.session_recording.maskNetworkRequestFn({url:l.name});return B({},l,{name:null==c?void 0:c.url})}),d.maskRequestFn=E(a.session_recording.maskCapturedNetworkRequestFn)?l=>{var c,u=h(l);return u&&null!==(c=null==a.session_recording.maskCapturedNetworkRequestFn?void 0:a.session_recording.maskCapturedNetworkRequestFn(u))&&void 0!==c?c:void 0}:a=>(function(a){if(!R(a))return a.requestBody=Qe(a.requestBody,"Request"),a.responseBody=Qe(a.responseBody,"Response"),a})(h(a)),B({},tz,d,{recordHeaders:p,recordBody:g,recordPerformance:_,recordInitialRequests:_})};let tr=class tr{constructor(a,l){var c,u;void 0===l&&(l={}),this.yt={},this.wt=a=>{if(!this.yt[a]){this.yt[a]=!0;var l,c,u=this.St(a);null==(l=(c=this.rt).onBlockedNode)||l.call(c,a,u)}},this.$t=a=>{var l=this.St(a);if("svg"!==(null==l?void 0:l.nodeName)&&l instanceof Element){var c=l.closest("svg");if(c)return[this._rrweb.mirror.getId(c),c]}return[a,l]},this.St=a=>this._rrweb.mirror.getNode(a),this.xt=a=>{var l,c,u,d,p,g,_,v;return(null!==(l=null==(c=a.removes)?void 0:c.length)&&void 0!==l?l:0)+(null!==(u=null==(d=a.attributes)?void 0:d.length)&&void 0!==u?u:0)+(null!==(p=null==(g=a.texts)?void 0:g.length)&&void 0!==p?p:0)+(null!==(_=null==(v=a.adds)?void 0:v.length)&&void 0!==_?_:0)},this.throttleMutations=a=>{if(3!==a.type||0!==a.data.source)return a;var l=a.data,c=this.xt(l);l.attributes&&(l.attributes=l.attributes.filter(a=>{var[l]=this.$t(a.id);return!this.ct.consumeRateLimit(l)&&a}));var u=this.xt(l);return 0!==u||c===u?a:void 0},this._rrweb=a,this.rt=l,this.ct=new oe({bucketSize:null!==(c=this.rt.bucketSize)&&void 0!==c?c:100,refillRate:null!==(u=this.rt.refillRate)&&void 0!==u?u:10,refillInterval:1e3,et:this.wt})}};var tJ=Uint8Array,tW=Uint16Array,tY=Uint32Array,tK=new tJ([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tX=new tJ([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tZ=new tJ([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ar=function(a,l){for(var c=new tW(31),u=0;u<31;++u)c[u]=l+=1<<a[u-1];var d=new tY(c[30]);for(u=1;u<30;++u)for(var p=c[u];p<c[u+1];++p)d[p]=p-c[u]<<5|u;return[c,d]},tQ=ar(tK,2),t0=tQ[0],t1=tQ[1];t0[28]=258,t1[258]=28;for(var t2=ar(tX,0)[1],t3=new tW(32768),t5=0;t5<32768;++t5){var t6=(43690&t5)>>>1|(21845&t5)<<1;t6=(61680&(t6=(52428&t6)>>>2|(13107&t6)<<2))>>>4|(3855&t6)<<4,t3[t5]=((65280&t6)>>>8|(255&t6)<<8)>>>1}var pr=function(a,l,c){for(var u=a.length,d=0,p=new tW(l);d<u;++d)++p[a[d]-1];var g,_=new tW(l);for(d=0;d<l;++d)_[d]=_[d-1]+p[d-1]<<1;if(c){g=new tW(1<<l);var v=15-l;for(d=0;d<u;++d)if(a[d])for(var f=d<<4|a[d],w=l-a[d],S=_[a[d]-1]++<<w,k=S|(1<<w)-1;S<=k;++S)g[t3[S]>>>v]=f}else for(g=new tW(u),d=0;d<u;++d)g[d]=t3[_[a[d]-1]++]>>>15-a[d];return g},t4=new tJ(288);for(t5=0;t5<144;++t5)t4[t5]=8;for(t5=144;t5<256;++t5)t4[t5]=9;for(t5=256;t5<280;++t5)t4[t5]=7;for(t5=280;t5<288;++t5)t4[t5]=8;var t8=new tJ(32);for(t5=0;t5<32;++t5)t8[t5]=5;var t7=pr(t4,9,0),t9=pr(t8,5,0),yr=function(a){return(a/8>>0)+(7&a&&1)},wr=function(a,l,c){(null==c||c>a.length)&&(c=a.length);var u=new(a instanceof tW?tW:a instanceof tY?tY:tJ)(c-l);return u.set(a.subarray(l,c)),u},Sr=function(a,l,c){c<<=7&l;var u=l/8>>0;a[u]|=c,a[u+1]|=c>>>8},$r=function(a,l,c){c<<=7&l;var u=l/8>>0;a[u]|=c,a[u+1]|=c>>>8,a[u+2]|=c>>>16},xr=function(a,l){for(var c=[],u=0;u<a.length;++u)a[u]&&c.push({s:u,f:a[u]});var d=c.length,p=c.slice();if(!d)return[new tJ(0),0];if(1==d){var g=new tJ(c[0].s+1);return g[c[0].s]=1,[g,1]}c.sort(function(a,l){return a.f-l.f}),c.push({s:-1,f:25001});var _=c[0],v=c[1],f=0,w=1,S=2;for(c[0]={s:-1,f:_.f+v.f,l:_,r:v};w!=d-1;)_=c[c[f].f<c[S].f?f++:S++],v=c[f!=w&&c[f].f<c[S].f?f++:S++],c[w++]={s:-1,f:_.f+v.f,l:_,r:v};var k=p[0].s;for(u=1;u<d;++u)p[u].s>k&&(k=p[u].s);var x=new tW(k+1),$=kr(c[w-1],x,0);if($>l){u=0;var N=0,z=$-l,U=1<<z;for(p.sort(function(a,l){return x[l.s]-x[a.s]||a.f-l.f});u<d;++u){var W=p[u].s;if(!(x[W]>l))break;N+=U-(1<<$-x[W]),x[W]=l}for(N>>>=z;N>0;){var er=p[u].s;x[er]<l?N-=1<<l-x[er]++-1:++u}for(;u>=0&&N;--u){var en=p[u].s;x[en]==l&&(--x[en],++N)}$=l}return[new tJ(x),$]},kr=function(a,l,c){return -1==a.s?Math.max(kr(a.l,l,c+1),kr(a.r,l,c+1)):l[a.s]=c},Er=function(a){for(var l=a.length;l&&!a[--l];);for(var c=new tW(++l),u=0,d=a[0],p=1,o=function(a){c[u++]=a},g=1;g<=l;++g)if(a[g]==d&&g!=l)++p;else{if(!d&&p>2){for(;p>138;p-=138)o(32754);p>2&&(o(p>10?p-11<<5|28690:p-3<<5|12305),p=0)}else if(p>3){for(o(d),--p;p>6;p-=6)o(8304);p>2&&(o(p-3<<5|8208),p=0)}for(;p--;)o(d);p=1,d=a[g]}return[c.subarray(0,u),l]},Ir=function(a,l){for(var c=0,u=0;u<l.length;++u)c+=a[u]*l[u];return c},Pr=function(a,l,c){var u=c.length,d=yr(l+2);a[d]=255&u,a[d+1]=u>>>8,a[d+2]=255^a[d],a[d+3]=255^a[d+1];for(var p=0;p<u;++p)a[d+p+4]=c[p];return 8*(d+4+u)},Rr=function(a,l,c,u,d,p,g,_,v,f,w){Sr(l,w++,c),++d[256];for(var S=xr(d,15),k=S[0],x=S[1],$=xr(p,15),N=$[0],z=$[1],U=Er(k),W=U[0],er=U[1],en=Er(N),ea=en[0],el=en[1],ec=new tW(19),eu=0;eu<W.length;++eu)ec[31&W[eu]]++;for(eu=0;eu<ea.length;++eu)ec[31&ea[eu]]++;for(var eh=xr(ec,7),ed=eh[0],ep=eh[1],eg=19;eg>4&&!ed[tZ[eg-1]];--eg);var e_,ev,ef,em,ey=f+5<<3,eb=Ir(d,t4)+Ir(p,t8)+g,ew=Ir(d,k)+Ir(p,N)+g+14+3*eg+Ir(ec,ed)+(2*ec[16]+3*ec[17]+7*ec[18]);if(ey<=eb&&ey<=ew)return Pr(l,w,a.subarray(v,v+f));if(Sr(l,w,1+(ew<eb)),w+=2,ew<eb){e_=pr(k,x,0),ev=k,ef=pr(N,z,0),em=N;var eE=pr(ed,ep,0);for(Sr(l,w,er-257),Sr(l,w+5,el-1),Sr(l,w+10,eg-4),w+=14,eu=0;eu<eg;++eu)Sr(l,w+3*eu,ed[tZ[eu]]);w+=3*eg;for(var eS=[W,ea],ek=0;ek<2;++ek){var ex=eS[ek];for(eu=0;eu<ex.length;++eu){var eR=31&ex[eu];Sr(l,w,eE[eR]),w+=ed[eR],eR>15&&(Sr(l,w,ex[eu]>>>5&127),w+=ex[eu]>>>12)}}}else e_=t7,ev=t4,ef=t9,em=t8;for(eu=0;eu<_;++eu)if(u[eu]>255){$r(l,w,e_[(eR=u[eu]>>>18&31)+257]),w+=ev[eR+257],eR>7&&(Sr(l,w,u[eu]>>>23&31),w+=tK[eR]);var eI=31&u[eu];$r(l,w,ef[eI]),w+=em[eI],eI>3&&($r(l,w,u[eu]>>>5&8191),w+=tX[eI])}else $r(l,w,e_[u[eu]]),w+=ev[u[eu]];return $r(l,w,e_[256]),w+ev[256]},ie=new tY([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),it=function(){for(var a=new tY(256),l=0;l<256;++l){for(var c=l,u=9;--u;)c=(1&c&&3988292384)^c>>>1;a[l]=c}return a}(),Mr=function(){var a=4294967295;return{p:function(l){for(var c=a,u=0;u<l.length;++u)c=it[255&c^l[u]]^c>>>8;a=c},d:function(){return 4294967295^a}}},Or=function(a,l,c){for(;c;++l)a[l]=c,c>>>=8},Ar=function(a,l){var c=l.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=l.level<2?4:9==l.level?2:0,a[9]=3,0!=l.mtime&&Or(a,4,Math.floor(new Date(l.mtime||Date.now())/1e3)),c){a[3]=8;for(var u=0;u<=c.length;++u)a[u+10]=c.charCodeAt(u)}};function jr(a,l){void 0===l&&(l={});var c,u,d,p=Mr(),g=a.length;p.p(a);var _=(u=l,d=10+((c=l).filename&&c.filename.length+1||0),function(a,l,c,u,d,p){var g=a.length,_=new tJ(u+g+5*(1+Math.floor(g/7e3))+d),v=_.subarray(u,_.length-d),f=0;if(!l||g<8)for(var w=0;w<=g;w+=65535){var S=w+65535;S<g?f=Pr(v,f,a.subarray(w,S)):(v[w]=p,f=Pr(v,f,a.subarray(w,g)))}else{for(var k=ie[l-1],x=k>>>13,$=8191&k,N=(1<<c)-1,z=new tW(32768),U=new tW(N+1),W=Math.ceil(c/3),er=2*W,y=function(l){return(a[l]^a[l+1]<<W^a[l+2]<<er)&N},en=new tY(25e3),ea=new tW(288),el=new tW(32),ec=0,eu=0,eh=(w=0,0),ed=0,ep=0;w<g;++w){var eg=y(w),e_=32767&w,ev=U[eg];if(z[e_]=ev,U[eg]=e_,ed<=w){var ef=g-w;if((ec>7e3||eh>24576)&&ef>423){f=Rr(a,v,0,en,ea,el,eu,eh,ep,w-ep,f),eh=ec=eu=0,ep=w;for(var em=0;em<286;++em)ea[em]=0;for(em=0;em<30;++em)el[em]=0}var ey=2,eb=0,ew=$,eE=e_-ev&32767;if(ef>2&&eg==y(w-eE))for(var eS=Math.min(x,ef)-1,ek=Math.min(32767,w),ex=Math.min(258,ef);eE<=ek&&--ew&&e_!=ev;){if(a[w+ey]==a[w+ey-eE]){for(var eR=0;eR<ex&&a[w+eR]==a[w+eR-eE];++eR);if(eR>ey){if(ey=eR,eb=eE,eR>eS)break;var eI=Math.min(eE,eR-2),eF=0;for(em=0;em<eI;++em){var e$=w-eE+em+32768&32767,eP=e$-z[e$]+32768&32767;eP>eF&&(eF=eP,ev=e$)}}}eE+=(e_=ev)-(ev=z[e_])+32768&32767}if(eb){en[eh++]=268435456|t1[ey]<<18|t2[eb];var eM=31&t1[ey],eT=31&t2[eb];eu+=tK[eM]+tX[eT],++ea[257+eM],++el[eT],ed=w+ey,++ec}else en[eh++]=a[w],++ea[a[w]]}}f=Rr(a,v,p,en,ea,el,eu,eh,ep,w-ep,f)}return wr(_,0,u+yr(f)+d)}(a,null==u.level?6:u.level,null==u.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+u.mem,d,8,!0)),v=_.length;return Ar(_,l),Or(_,v-8,p.d()),Or(_,v-4,g),_}function Lr(a,l){var c=a.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(a);for(var u=new tJ(a.length+(a.length>>>1)),d=0,n=function(a){u[d++]=a},p=0;p<c;++p){if(d+5>u.length){var g=new tJ(d+8+(c-p<<1));g.set(u),u=g}var _=a.charCodeAt(p);_<128||l?n(_):(_<2048?n(192|_>>>6):(_>55295&&_<57344?(n(240|(_=65536+(1047552&_)|1023&a.charCodeAt(++p))>>>18),n(128|_>>>12&63)):n(224|_>>>12),n(128|_>>>6&63)),n(128|63&_))}return wr(u,0,d)}function Nr(a,l){return function(a){for(var l=0,c=0;c<a.length;c++)l=(l<<5)-l+a.charCodeAt(c)|0;return Math.abs(l)}(a)%100<ne(100*l,0,100)}var ir="disabled",il="sampled",ic="active",iu="buffering",ih="paused",id="trigger",ip=id+"_activated",ig=id+"_pending",i_=id+"_"+ir;function Kr(a,l){return l.some(l=>"regex"===l.matching&&new RegExp(l.url).test(a))}let Yr=class Yr{constructor(a){this.kt=a}triggerStatus(a){var l=this.kt.map(l=>l.triggerStatus(a));return l.includes(ip)?ip:l.includes(ig)?ig:i_}stop(){this.kt.forEach(a=>a.stop())}};let Xr=class Xr{constructor(a){this.kt=a}triggerStatus(a){var l=new Set;for(var c of this.kt)l.add(c.triggerStatus(a));switch(l.delete(i_),l.size){case 0:return i_;case 1:return Array.from(l)[0];default:return ig}}stop(){this.kt.forEach(a=>a.stop())}};let Qr=class Qr{triggerStatus(){return ig}stop(){}};let Zr=class Zr{constructor(a){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=a}onRemoteConfig(a){var l,c;this.Et=(null==(l=a.sessionRecording)?void 0:l.urlTriggers)||[],this.It=(null==(c=a.sessionRecording)?void 0:c.urlBlocklist)||[]}Pt(a){var l;return 0===this.Et.length?i_:(null==(l=this._instance)?void 0:l.get_property(eN))===a?ip:ig}triggerStatus(a){var l=this.Pt(a),c=l===ip?ip:l===ig?ig:i_;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:c}),c}checkUrlTriggerConditions(a,l,c){if(void 0!==u&&u.location.href){var d=u.location.href,p=this.urlBlocked,g=Kr(d,this.It);p&&g||(g&&!p?a():!g&&p&&l(),Kr(d,this.Et)&&c("url"))}}stop(){}};let ts=class ts{constructor(a){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=a}triggerStatus(){var a=ig;return F(this.linkedFlag)&&(a=i_),this.linkedFlagSeen&&(a=ip),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:a}),a}onRemoteConfig(a,l){var c;if(this.linkedFlag=(null==(c=a.sessionRecording)?void 0:c.linkedFlag)||null,!F(this.linkedFlag)&&!this.linkedFlagSeen){var u=T(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,d=T(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((a,c)=>{var p=!1;if(I(c)&&u in c){var g=c[u];p=A(g)?!0===g:d?g===d:!!g}this.linkedFlagSeen=p,p&&l(u,d)})}}stop(){this.Rt()}};let is=class is{constructor(a){this.Tt=[],this._instance=a}onRemoteConfig(a){var l;this.Tt=(null==(l=a.sessionRecording)?void 0:l.eventTriggers)||[]}Ct(a){var l;return 0===this.Tt.length?i_:(null==(l=this._instance)?void 0:l.get_property(eB))===a?ip:ig}triggerStatus(a){var l=this.Ct(a),c=l===ip?ip:l===ig?ig:i_;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:c}),c}stop(){}};function es(a){return a.isRecordingEnabled?iu:ir}function rs(a){if(!a.receivedFlags)return iu;if(!a.isRecordingEnabled)return ir;if(a.urlTriggerMatching.urlBlocked)return ih;var l=!0===a.isSampled,c=new Yr([a.eventTriggerMatching,a.urlTriggerMatching,a.linkedFlagMatching]).triggerStatus(a.sessionId);return l?il:c===ip?ic:c===ig?iu:!1===a.isSampled?ir:ic}function ss(a){if(!a.receivedFlags)return iu;if(!a.isRecordingEnabled)return ir;if(a.urlTriggerMatching.urlBlocked)return ih;var l=new Xr([a.eventTriggerMatching,a.urlTriggerMatching,a.linkedFlagMatching]).triggerStatus(a.sessionId),c=l!==i_,u=A(a.isSampled);return c&&l===ig?iu:c&&l===i_||u&&!a.isSampled?ir:!0===a.isSampled?il:ic}var iv="[SessionRecording]",im=ep(iv);function as(){var a;return null==N||null==(a=N.__PosthogExtensions__)||null==(a=a.rrweb)?void 0:a.record}var iy=[tj.MouseMove,tj.MouseInteraction,tj.Scroll,tj.ViewportResize,tj.Input,tj.TouchMove,tj.MediaInteraction,tj.Drag],hs=a=>({rrwebMethod:a,enqueuedAt:Date.now(),attempt:1});function ds(a){return function(a,l){for(var c="",u=0;u<a.length;){var d=a[u++];d<128||l?c+=String.fromCharCode(d):d<224?c+=String.fromCharCode((31&d)<<6|63&a[u++]):d<240?c+=String.fromCharCode((15&d)<<12|(63&a[u++])<<6|63&a[u++]):c+=String.fromCharCode(55296|(d=((15&d)<<18|(63&a[u++])<<12|(63&a[u++])<<6|63&a[u++])-65536)>>10,56320|1023&d)}return c}(jr(Lr(JSON.stringify(a))),!0)}function vs(a){return a.type===tB.Custom&&"sessionIdle"===a.data.tag}let cs=class cs{get sessionId(){return this.Mt}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw Error(iv+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var a,l;return this.jt.triggerStatus(this.sessionId)===ig?6e4:null!==(a=null==(l=this._instance.config.session_recording)?void 0:l.full_snapshot_interval_millis)&&void 0!==a?a:3e5}get Lt(){var a=this._instance.get_property(eD);return A(a)?a:null}get Nt(){var a,l,c=null==(a=this.M)?void 0:a.data[(null==(l=this.M)?void 0:l.data.length)-1],{sessionStartTimestamp:u}=this.At.checkAndGetSessionAndWindowId(!0);return c?c.timestamp-u:null}get zt(){var a=!!this._instance.get_property(eF),l=!this._instance.config.disable_session_recording;return u&&a&&l}get Ut(){var a=!!this._instance.get_property(e$),l=this._instance.config.enable_recording_console_log;return null!=l?l:a}get qt(){var a,l,c,u,d,p,g=this._instance.config.session_recording.captureCanvas,_=this._instance.get_property(eT),v=null!==(a=null!==(l=null==g?void 0:g.recordCanvas)&&void 0!==l?l:null==_?void 0:_.enabled)&&void 0!==a&&a,f=null!==(c=null!==(u=null==g?void 0:g.canvasFps)&&void 0!==u?u:null==_?void 0:_.fps)&&void 0!==c?c:4,w=null!==(d=null!==(p=null==g?void 0:g.canvasQuality)&&void 0!==p?p:null==_?void 0:_.quality)&&void 0!==d?d:.4;if("string"==typeof w){var S=parseFloat(w);w=isNaN(S)?.4:S}return{enabled:v,fps:ne(f,0,12,"canvas recording fps",4),quality:ne(w,0,1,"canvas recording quality",.4)}}get Bt(){var a,l,c=this._instance.get_property(eP),u={recordHeaders:null==(a=this._instance.config.session_recording)?void 0:a.recordHeaders,recordBody:null==(l=this._instance.config.session_recording)?void 0:l.recordBody},d=(null==u?void 0:u.recordHeaders)||(null==c?void 0:c.recordHeaders),p=(null==u?void 0:u.recordBody)||(null==c?void 0:c.recordBody),g=I(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,_=!!(A(g)?g:null==c?void 0:c.capturePerformance);return d||p||_?{recordHeaders:d,recordBody:p,recordPerformance:_}:void 0}get Ht(){var a,l,c,u,d,p,g=this._instance.get_property(eM),_={maskAllInputs:null==(a=this._instance.config.session_recording)?void 0:a.maskAllInputs,maskTextSelector:null==(l=this._instance.config.session_recording)?void 0:l.maskTextSelector,blockSelector:null==(c=this._instance.config.session_recording)?void 0:c.blockSelector},v=null!==(u=null==_?void 0:_.maskAllInputs)&&void 0!==u?u:null==g?void 0:g.maskAllInputs,f=null!==(d=null==_?void 0:_.maskTextSelector)&&void 0!==d?d:null==g?void 0:g.maskTextSelector,w=null!==(p=null==_?void 0:_.blockSelector)&&void 0!==p?p:null==g?void 0:g.blockSelector;return R(v)&&R(f)&&R(w)?void 0:{maskAllInputs:null==v||v,maskTextSelector:f,blockSelector:w}}get Wt(){var a=this._instance.get_property(eO);return O(a)?a:null}get Gt(){var a=this._instance.get_property(eC);return O(a)?a:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.Lt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):iu}constructor(a){if(this.Vt=es,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.jt=new Qr,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(null!=f&&f.visibilityState){var a="window "+f.visibilityState;this.ui(a,{})}},this._instance=a,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw im.error("started without valid sessionManager"),Error(iv+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw Error(iv+' cannot be used with cookieless_mode="always"');this.Xt=new ts(this._instance),this.Kt=new Zr(this._instance),this.Yt=new is(this._instance);var{sessionId:l,windowId:c}=this.At.checkAndGetSessionAndWindowId();this.Mt=l,this.fi=c,this.M=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&im.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(a){this.zt?(this.gi(a),st(u,"beforeunload",this.oi),st(u,"offline",this.li),st(u,"online",this.hi),st(u,"visibilitychange",this.di),this.mi(),this.bi(),F(this.ii)&&(this.ii=this._instance.on("eventCaptured",a=>{try{if("$pageview"===a.event){var l=null!=a&&a.properties.$current_url?this.yi(null==a?void 0:a.properties.$current_url):"";if(!l)return;this.ui("$pageview",{href:l})}}catch(a){im.error("Could not add $pageview to rrweb session",a)}})),this.ei||(this.ei=this.At.onSessionId((a,l,c)=>{var u,d;c&&(this.ui("$session_id_change",{sessionId:a,windowId:l,changeReason:c}),null==(u=this._instance)||null==(u=u.persistence)||u.unregister(eB),null==(d=this._instance)||null==(d=d.persistence)||d.unregister(eN))}))):this.stopRecording()}stopRecording(){var a,l,c,d;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,null==u||u.removeEventListener("beforeunload",this.oi),null==u||u.removeEventListener("offline",this.li),null==u||u.removeEventListener("online",this.hi),null==u||u.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),null==(a=this.ii)||a.call(this),this.ii=void 0,null==(l=this.ni)||l.call(this),this.ni=void 0,null==(c=this.ei)||c.call(this),this.ei=void 0,null==(d=this.si)||d.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),im.info("stopped"))}Si(){var a;null==(a=this._instance.persistence)||a.unregister(eD)}$i(a){var l,c=this.Mt!==a,u=this.Wt;if(O(u)){var d=this.Lt,p=c||!A(d),g=p?Nr(a,u):d;p&&(g?this.xi(il):im.warn("Sample rate ("+u+") has determined that this sessionId ("+a+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:u,isSampled:g})),null==(l=this._instance.persistence)||l.register({[eD]:g})}else this.Si()}onRemoteConfig(a){var l,c,u,d;this.ui("$remote_config_received",a),this.ki(a),null!=(l=a.sessionRecording)&&l.endpoint&&(this.vi=null==(d=a.sessionRecording)?void 0:d.endpoint),this.mi(),"any"===(null==(c=a.sessionRecording)?void 0:c.triggerMatchType)?(this.Vt=rs,this.jt=new Yr([this.Yt,this.Kt])):(this.Vt=ss,this.jt=new Xr([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:null==(u=a.sessionRecording)?void 0:u.triggerMatchType}),this.Kt.onRemoteConfig(a),this.Yt.onRemoteConfig(a),this.Xt.onRemoteConfig(a,(a,l)=>{this.xi("linked_flag_matched",{flag:a,variant:l})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){O(this.Wt)&&F(this.si)&&(this.si=this.At.onSessionId(a=>{this.$i(a)}))}ki(a){if(this._instance.persistence){var l,c=this._instance.persistence,r=()=>{var l,u,d,p,g,_,v,f,w,S=null==(l=a.sessionRecording)?void 0:l.sampleRate,k=F(S)?null:parseFloat(S);F(k)&&this.Si();var x=null==(u=a.sessionRecording)?void 0:u.minimumDurationMilliseconds;c.register({[eF]:!!a.sessionRecording,[e$]:null==(d=a.sessionRecording)?void 0:d.consoleLogRecordingEnabled,[eP]:B({capturePerformance:a.capturePerformance},null==(p=a.sessionRecording)?void 0:p.networkPayloadCapture),[eM]:null==(g=a.sessionRecording)?void 0:g.masking,[eT]:{enabled:null==(_=a.sessionRecording)?void 0:_.recordCanvas,fps:null==(v=a.sessionRecording)?void 0:v.canvasFps,quality:null==(f=a.sessionRecording)?void 0:f.canvasQuality},[eO]:k,[eC]:R(x)?null:x,[eA]:null==(w=a.sessionRecording)?void 0:w.scriptConfig})};r(),null==(l=this.ri)||l.call(this),this.ri=this.At.onSessionId(r)}}log(a,l){var c;void 0===l&&(l="log"),null==(c=this._instance.sessionRecording)||c.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:l,trace:[],payload:[JSON.stringify(a)]}},timestamp:Date.now()})}gi(a){if(!R(Object.assign)&&!R(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var l;(this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),as())?this.Ei():null==(l=N.__PosthogExtensions__)||null==l.loadExternalDependency||l.loadExternalDependency(this._instance,this.Ii,a=>{if(a)return im.error("could not load recorder",a);this.Ei()}),im.info("starting"),this.status===ic&&this.xi(a||"recording_initialized")}}get Ii(){var a;return(null==(a=this._instance)||null==(a=a.persistence)||null==(a=a.get_property(eA))?void 0:a.script)||"recorder"}Pi(a){var l;return 3===a.type&&-1!==iy.indexOf(null==(l=a.data)?void 0:l.source)}Ri(a){var l=this.Pi(a);l||this.Zt||a.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:a.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.M.data.length,bufferSize:this.M.size}),this.ai());var c=!1;if(l&&(this.ti=a.timestamp,this.Zt)){var u="unknown"===this.Zt;this.Zt=!1,u||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:a.type}),c=!0)}if(!this.Zt){var{windowId:d,sessionId:p}=this.At.checkAndGetSessionAndWindowId(!l,a.timestamp),g=this.Mt!==p,_=this.fi!==d;this.fi=d,this.Mt=p,g||_?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):c&&this.Ti()}}Ci(a){try{return a.rrwebMethod(),!0}catch(l){return this.Qt.length<10?this.Qt.push({enqueuedAt:a.enqueuedAt||Date.now(),attempt:a.attempt++,rrwebMethod:a.rrwebMethod}):im.warn("could not emit queued rrweb event.",l,a),!1}}ui(a,l){return this.Ci(hs(()=>as().addCustomEvent(a,l)))}Mi(){return this.Ci(hs(()=>as().takeFullSnapshot()))}Ei(){var a,l,c,u,d={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};for(var[p,g]of Object.entries(this._instance.config.session_recording||{}))p in d&&("maskInputOptions"===p?d.maskInputOptions=B({password:!0},g):d[p]=g);this.qt&&this.qt.enabled&&(d.recordCanvas=!0,d.sampling={canvas:this.qt.fps},d.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(d.maskAllInputs=null===(l=this.Ht.maskAllInputs)||void 0===l||l,d.maskTextSelector=null!==(c=this.Ht.maskTextSelector)&&void 0!==c?c:void 0,d.blockSelector=null!==(u=this.Ht.blockSelector)&&void 0!==u?u:void 0);var _=as();if(_){this.Fi=null!==(a=this.Fi)&&void 0!==a?a:new tr(_,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(a,l)=>{var c="Too many mutations on node '"+a+"'. Rate limiting. This could be due to SVG animations or something similar";im.info(c,{node:l}),this.log(iv+" "+c,"warn")}});var v=this.Oi();this.ci=_(B({emit:a=>{this.onRRwebEmit(a)},plugins:v},d)),this.ti=Date.now(),this.Zt=A(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:d,activePlugins:v.map(a=>null==a?void 0:a.name)}),this.ui("$posthog_config",{config:this._instance.config})}else im.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),!0!==this.Zt){var a=this.Dt;a&&(this.wi=setInterval(()=>{this.Mi()},a))}}Oi(){var a,l,c=[],u=null==(a=N.__PosthogExtensions__)||null==(a=a.rrwebPlugins)?void 0:a.getRecordConsolePlugin;u&&this.Ut&&c.push(u());var d=null==(l=N.__PosthogExtensions__)||null==(l=l.rrwebPlugins)?void 0:l.getRecordNetworkPlugin;return this.Bt&&E(d)&&(!ta.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?c.push(d(Ze(this._instance.config,this.Bt))):im.info("NetworkCapture not started because we are on localhost.")),c}onRRwebEmit(a){var l;if(this.Ai(),a&&I(a)){if(a.type===tB.Meta){var c=this.yi(a.data.href);if(this.Di=c,!c)return;a.data.href=c}else this.ji();if(this.Kt.checkUrlTriggerConditions(()=>this.Li(),()=>this.Ni(),a=>this.zi(a)),!this.Kt.urlBlocked||a.type===tB.Custom&&"recording paused"===a.data.tag){a.type===tB.FullSnapshot&&this.Ti(),a.type===tB.FullSnapshot&&this.Jt&&this.jt.triggerStatus(this.sessionId)===ig&&this.pi();var u=this.Fi?this.Fi.throttleMutations(a):a;if(u){var d=function(a){if(a&&I(a)&&6===a.type&&I(a.data)&&"rrweb/console@1"===a.data.plugin){a.data.payload.payload.length>10&&(a.data.payload.payload=a.data.payload.payload.slice(0,10),a.data.payload.payload.push("...[truncated]"));for(var l=[],c=0;c<a.data.payload.payload.length;c++)a.data.payload.payload[c]&&a.data.payload.payload[c].length>2e3?l.push(a.data.payload.payload[c].slice(0,2e3)+"...[truncated]"):l.push(a.data.payload.payload[c]);return a.data.payload.payload=l,a}return a}(u);if(this.Ri(d),!0!==this.Zt||vs(d)){if(vs(d)){var p=d.data.payload;if(p){var g=p.lastActivityTimestamp,_=p.threshold;d.timestamp=g+_}}var v=null===(l=this._instance.config.session_recording.compress_events)||void 0===l||l?function(a){if(1024>Ue(a))return a;try{if(a.type===tB.FullSnapshot)return B({},a,{data:ds(a.data),cv:"2024-10"});if(a.type===tB.IncrementalSnapshot&&a.data.source===tj.Mutation)return B({},a,{cv:"2024-10",data:B({},a.data,{texts:ds(a.data.texts),attributes:ds(a.data.attributes),removes:ds(a.data.removes),adds:ds(a.data.adds)})});if(a.type===tB.IncrementalSnapshot&&a.data.source===tj.StyleSheetRule)return B({},a,{cv:"2024-10",data:B({},a.data,{adds:a.data.adds?ds(a.data.adds):void 0,removes:a.data.removes?ds(a.data.removes):void 0})})}catch(a){im.error("could not compress event - will use uncompressed event",a)}return a}(d):d,f={$snapshot_bytes:Ue(v),$snapshot_data:v,$session_id:this.Mt,$window_id:this.fi};this.status!==ir?this.Ui(f):this.pi()}}}}}ji(){if(!this._instance.config.capture_pageview&&u){var a=this.yi(u.location.href);this.Di!==a&&(this.ui("$url_changed",{href:a}),this.Di=a)}}Ai(){if(this.Qt.length){var a=[...this.Qt];this.Qt=[],a.forEach(a=>{Date.now()-a.enqueuedAt<=2e3&&this.Ci(a)})}}yi(a){var l=this._instance.config.session_recording;if(l.maskNetworkRequestFn){var c,u={url:a};return null==(c=u=l.maskNetworkRequestFn(u))?void 0:c.url}return a}pi(){return this.M={size:0,data:[],sessionId:this.Mt,windowId:this.fi},this.M}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var a=this.Gt,l=this.Nt,c=O(l)&&l>=0,u=O(a)&&c&&l<a;return this.status===iu||this.status===ih||this.status===ir||u?(this.qi=setTimeout(()=>{this.ai()},2e3),this.M):(this.M.data.length>0&&qe(this.M).forEach(a=>{this.Bi({$snapshot_bytes:a.size,$snapshot_data:a.data,$session_id:a.sessionId,$window_id:a.windowId,$lib:"web",$lib_version:z.LIB_VERSION})}),this.pi())}Ui(a){var l,c=2+((null==(l=this.M)?void 0:l.data.length)||0);!this.Zt&&(this.M.size+a.$snapshot_bytes+c>943718.4||this.M.sessionId!==this.Mt)&&(this.M=this.ai()),this.M.size+=a.$snapshot_bytes,this.M.data.push(a.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(a){this._instance.capture("$snapshot",a,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(a){var l;this.jt.triggerStatus(this.sessionId)===ig&&(null==(l=this._instance)||null==(l=l.persistence)||l.register({["url"===a?eN:eB]:this.Mt}),this.ai(),this.xi(a+"_trigger_matched"))}Li(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),im.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Mi(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),im.info("recording resumed"))}bi(){0!==this.Yt.Tt.length&&F(this.ni)&&(this.ni=this._instance.on("eventCaptured",a=>{try{this.Yt.Tt.includes(a.event)&&this.zi("event")}catch(a){im.error("Could not activate event trigger",a)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Mi(),this.xi("linked_flag_overridden")}overrideSampling(){var a;null==(a=this._instance.persistence)||a.register({[eD]:!0}),this.Mi(),this.xi("sampling_overridden")}overrideTrigger(a){this.zi(a)}xi(a,l){this._instance.register_for_session({$session_recording_start_reason:a}),im.info(a.replace("_"," "),l),m(["recording_initialized","session_id_changed"],a)||this.ui(a,l)}get sdkDebugProperties(){var{sessionStartTimestamp:a}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.M.data.length,$sdk_debug_replay_internal_buffer_size:this.M.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:a}}};var ib=ep("[SegmentIntegration]");function ps(a,l){var c=a.config.segment;if(!c)return l();!function(a,l){var c=a.config.segment;if(!c)return l();var r=c=>{var r=()=>c.anonymousId()||Ni();a.config.get_device_id=r,c.id()&&(a.register({distinct_id:c.id(),$device_id:r()}),a.persistence.set_property(eW,"identified")),l()},u=c.user();"then"in u&&E(u.then)?u.then(a=>r(a)):r(u)}(a,()=>{var u;c.register((Promise&&Promise.resolve||ib.warn("This browser does not have Promise support, and can not use the segment integration"),u=(l,c)=>{if(!c)return l;l.event.userId||l.event.anonymousId===a.get_distinct_id()||(ib.info("No userId set, resetting PostHog"),a.reset()),l.event.userId&&l.event.userId!==a.get_distinct_id()&&(ib.info("UserId set, identifying with PostHog"),a.identify(l.event.userId));var u=a.calculateEventProperties(c,l.event.properties);return l.event.properties=Object.assign({},u,l.event.properties),l},{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:a=>u(a,a.event.event),page:a=>u(a,"$pageview"),identify:a=>u(a,"$identify"),screen:a=>u(a,"$screen")})).then(()=>{l()})})}var iw="posthog-js";function gs(a,l){var{organization:c,projectId:u,prefix:d,severityAllowList:p=["error"]}=void 0===l?{}:l;return l=>{if(!("*"===p||p.includes(l.level))||!a.__loaded)return l;l.tags||(l.tags={});var g,_,v,f,w,S=a.requestRouter.endpointFor("ui","/project/"+a.config.token+"/person/"+a.get_distinct_id());l.tags["PostHog Person URL"]=S,a.sessionRecordingStarted()&&(l.tags["PostHog Recording URL"]=a.get_session_replay_url({withTimestamp:!0}));var k=(null==(g=l.exception)?void 0:g.values)||[],x=k.map(a=>B({},a,{stacktrace:a.stacktrace?B({},a.stacktrace,{type:"raw",frames:(a.stacktrace.frames||[]).map(a=>B({},a,{platform:"web:javascript"}))}):void 0})),$={$exception_message:(null==(_=k[0])?void 0:_.value)||l.message,$exception_type:null==(v=k[0])?void 0:v.type,$exception_personURL:S,$exception_level:l.level,$exception_list:x,$sentry_event_id:l.event_id,$sentry_exception:l.exception,$sentry_exception_message:(null==(f=k[0])?void 0:f.value)||l.message,$sentry_exception_type:null==(w=k[0])?void 0:w.type,$sentry_tags:l.tags};return c&&u&&($.$sentry_url=(d||"https://sentry.io/organizations/")+c+"/issues/?project="+u+"&query="+l.event_id),a.exceptions.sendExceptionEvent($),l}}let ms=class ms{constructor(a,l,c,u,d){this.name=iw,this.setupOnce=function(p){p(gs(a,{organization:l,projectId:c,prefix:u,severityAllowList:d}))}}};var iE=null!=u&&u.location?Ei(u.location.hash,"__posthog")||Ei(location.hash,"state"):null,iS="_postHogToolbarParams",ik=ep("[Toolbar]"),ix=((s1=ix||{})[s1.UNINITIALIZED=0]="UNINITIALIZED",s1[s1.LOADING=1]="LOADING",s1[s1.LOADED=2]="LOADED",s1);let $s=class $s{constructor(a){this.instance=a}Hi(a){N.ph_toolbar_state=a}Wi(){var a;return null!==(a=N.ph_toolbar_state)&&void 0!==a?a:ix.UNINITIALIZED}maybeLoadToolbar(a,l,c){if(void 0===a&&(a=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),!u||!f)return!1;a=null!=a?a:u.location,c=null!=c?c:u.history;try{if(!l){try{u.localStorage.setItem("test","test"),u.localStorage.removeItem("test")}catch(a){return!1}l=null==u?void 0:u.localStorage}var d,p=iE||Ei(a.hash,"__posthog")||Ei(a.hash,"state"),g=p?X(()=>JSON.parse(atob(decodeURIComponent(p))))||X(()=>JSON.parse(decodeURIComponent(p))):null;return g&&"ph_authorize"===g.action?((d=g).source="url",d&&Object.keys(d).length>0&&(g.desiredHash?a.hash=g.desiredHash:c?c.replaceState(c.state,"",a.pathname+a.search):a.hash="")):((d=JSON.parse(l.getItem(iS)||"{}")).source="localstorage",delete d.userIntent),!(!d.token||this.instance.config.token!==d.token)&&(this.loadToolbar(d),!0)}catch(a){return!1}}Gi(a){var l=N.ph_load_toolbar||N.ph_load_editor;!F(l)&&E(l)?l(a,this.instance):ik.warn("No toolbar load function found")}loadToolbar(a){var l,c=!(null==f||!f.getElementById(e1));if(!u||c)return!1;var d="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,p=B({token:this.instance.config.token},a,{apiURL:this.instance.requestRouter.endpointFor("ui")},d?{instrument:!1}:{});return(u.localStorage.setItem(iS,JSON.stringify(B({},p,{source:void 0}))),this.Wi()===ix.LOADED)?this.Gi(p):this.Wi()===ix.UNINITIALIZED&&(this.Hi(ix.LOADING),null==(l=N.__PosthogExtensions__)||null==l.loadExternalDependency||l.loadExternalDependency(this.instance,"toolbar",a=>{if(a)return ik.error("[Toolbar] Failed to load",a),void this.Hi(ix.UNINITIALIZED);this.Hi(ix.LOADED),this.Gi(p)}),st(u,"turbolinks:load",()=>{this.Hi(ix.UNINITIALIZED),this.loadToolbar(p)})),!0}Ji(a){return this.loadToolbar(a)}maybeLoadEditor(a,l,c){return void 0===a&&(a=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),this.maybeLoadToolbar(a,l,c)}};var iR=ep("[TracingHeaders]");let ks=class ks{constructor(a){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var a,l;R(this.Vi)&&(null==(a=N.__PosthogExtensions__)||null==(a=a.tracingHeadersPatchFns)||a._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),R(this.Ki)&&(null==(l=N.__PosthogExtensions__)||null==(l=l.tracingHeadersPatchFns)||l._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=a}J(a){var l,c;null!=(l=N.__PosthogExtensions__)&&l.tracingHeadersPatchFns&&a(),null==(c=N.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"tracing-headers",l=>{if(l)return iR.error("failed to load script",l);a()})}startIfEnabledOrStop(){var a,l;this._instance.config.__add_tracing_headers?this.J(this.nt):(null==(a=this.Vi)||a.call(this),null==(l=this.Ki)||l.call(this),this.Vi=void 0,this.Ki=void 0)}};var iI=ep("[Web Vitals]");let Ps=class Ps{constructor(a){var l;this.Yi=!1,this.i=!1,this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),0!==this.M.metrics.length&&(this._instance.capture("$web_vitals",this.M.metrics.reduce((a,l)=>B({},a,{["$web_vitals_"+l.name+"_event"]:B({},l),["$web_vitals_"+l.name+"_value"]:l.value}),{})),this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=a=>{var l,c=null==(l=this._instance.sessionManager)?void 0:l.checkAndGetSessionAndWindowId(!0);if(R(c))iI.error("Could not read session ID. Dropping metrics!");else{this.M=this.M||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var u=this.te();R(u)||(F(null==a?void 0:a.name)||F(null==a?void 0:a.value)?iI.error("Invalid metric received",a):this.ie&&a.value>=this.ie?iI.error("Ignoring metric with value >= "+this.ie,a):(this.M.url!==u&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),R(this.M.url)&&(this.M.url=u),this.M.firstMetricTimestamp=R(this.M.firstMetricTimestamp)?Date.now():this.M.firstMetricTimestamp,a.attribution&&a.attribution.interactionTargetElement&&(a.attribution.interactionTargetElement=void 0),this.M.metrics.push(B({},a,{$current_url:u,$session_id:c.sessionId,$window_id:c.windowId,timestamp:Date.now()})),this.M.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var a,l,c,u,d=N.__PosthogExtensions__;R(d)||R(d.postHogWebVitalsCallbacks)||({onLCP:a,onCLS:l,onFCP:c,onINP:u}=d.postHogWebVitalsCallbacks),a&&l&&c&&u?(this.allowedMetrics.indexOf("LCP")>-1&&a(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&l(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&c(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&u(this.Zi.bind(this)),this.i=!0):iI.error("web vitals callbacks not loaded - not starting")},this._instance=a,this.Yi=!(null==(l=this._instance.persistence)||!l.props[ex]),this.startIfEnabled()}get allowedMetrics(){var a,l,c=I(this._instance.config.capture_performance)?null==(a=this._instance.config.capture_performance)?void 0:a.web_vitals_allowed_metrics:void 0;return R(c)?(null==(l=this._instance.persistence)?void 0:l.props[eI])||["CLS","FCP","INP","LCP"]:c}get flushToCaptureTimeoutMs(){return(I(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var a=I(this._instance.config.capture_performance)&&O(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:9e5;return 0<a&&a<=6e4?9e5:a}get isEnabled(){var a=null==w?void 0:w.protocol;if("http:"!==a&&"https:"!==a)return iI.info("Web Vitals are disabled on non-http/https protocols"),!1;var l=I(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:A(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return A(l)?l:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(iI.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(a){var l=I(a.capturePerformance)&&!!a.capturePerformance.web_vitals,c=I(a.capturePerformance)?a.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[ex]:l}),this._instance.persistence.register({[eI]:c})),this.Yi=l,this.startIfEnabled()}J(a){var l,c;null!=(l=N.__PosthogExtensions__)&&l.postHogWebVitalsCallbacks&&a(),null==(c=N.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"web-vitals",l=>{l?iI.error("failed to load script",l):a()})}te(){var a=u?u.location.href:void 0;return a||iI.error("Could not determine current URL"),a}};var iF=ep("[Heatmaps]");function Ts(a){return I(a)&&"clientX"in a&&"clientY"in a&&O(a.clientX)&&O(a.clientY)}let Cs=class Cs{constructor(a){var l;this.rageclicks=new yi,this.Yi=!1,this.i=!1,this.ee=null,this.instance=a,this.Yi=!(null==(l=this.instance.persistence)||!l.props[ew])}get flushIntervalMilliseconds(){var a=5e3;return I(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(a=this.instance.config.capture_heatmaps.flush_interval_milliseconds),a}get isEnabled(){return R(this.instance.config.capture_heatmaps)?R(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled)this.i||(iF.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds));else{var a,l;clearInterval(null!==(a=this.ee)&&void 0!==a?a:void 0),null==(l=this.ne)||l.stop(),this.getAndClearBuffer()}}onRemoteConfig(a){var l=!!a.heatmaps;this.instance.persistence&&this.instance.persistence.register({[ew]:l}),this.Yi=l,this.startIfEnabled()}getAndClearBuffer(){var a=this.M;return this.M=void 0,a}oe(a){this.ae(a.originalEvent,"deadclick")}re(){u&&f&&(st(u,"beforeunload",this.se.bind(this)),st(f,"click",a=>this.ae(a||(null==u?void 0:u.event)),{capture:!0}),st(f,"mousemove",a=>this.le(a||(null==u?void 0:u.event)),{capture:!0}),this.ne=new se(this.instance,ee,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(a,l){var c=this.instance.scrollManager.scrollY(),d=this.instance.scrollManager.scrollX(),p=this.instance.scrollManager.scrollElement(),g=function(a,l,c){for(var d=a;d&&Jt(d)&&!Vt(d,"body")&&d!==c;){if(m(l,null==u?void 0:u.getComputedStyle(d).position))return!0;d=si(d)}return!1}(ei(a),["fixed","sticky"],p);return{x:a.clientX+(g?0:d),y:a.clientY+(g?0:c),target_fixed:g,type:l}}ae(a,l){var c;if(void 0===l&&(l="click"),!Gt(a.target)&&Ts(a)){var u=this.ue(a,l);null!=(c=this.rageclicks)&&c.isRageClick(a.clientX,a.clientY,(new Date).getTime())&&this.he(B({},u,{type:"rageclick"})),this.he(u)}}le(a){!Gt(a.target)&&Ts(a)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(a,"mousemove"))},500))}he(a){if(u){var l=u.location.href;this.M=this.M||{},this.M[l]||(this.M[l]=[]),this.M[l].push(a)}}se(){this.M&&!P(this.M)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}};let Ms=class Ms{constructor(a){this._instance=a}doPageView(a,l){var c,d=this.ve(a,l);return this.ce={pathname:null!==(c=null==u?void 0:u.location.pathname)&&void 0!==c?c:"",pageViewId:l,timestamp:a},this._instance.scrollManager.resetContext(),d}doPageLeave(a){var l;return this.ve(a,null==(l=this.ce)?void 0:l.pageViewId)}doEvent(){var a;return{$pageview_id:null==(a=this.ce)?void 0:a.pageViewId}}ve(a,l){var c=this.ce;if(!c)return{$pageview_id:l};var u={$pageview_id:l,$prev_pageview_id:c.pageViewId},d=this._instance.scrollManager.getContext();if(d&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:p,lastScrollY:g,maxScrollY:_,maxContentHeight:v,lastContentY:f,maxContentY:w}=d;if(!(R(p)||R(g)||R(_)||R(v)||R(f)||R(w))){p=Math.ceil(p),g=Math.ceil(g),_=Math.ceil(_),v=Math.ceil(v),f=Math.ceil(f),w=Math.ceil(w);var S=p<=1?1:ne(g/p,0,1),k=p<=1?1:ne(_/p,0,1),x=v<=1?1:ne(f/v,0,1),$=v<=1?1:ne(w/v,0,1);u=V(u,{$prev_pageview_last_scroll:g,$prev_pageview_last_scroll_percentage:S,$prev_pageview_max_scroll:_,$prev_pageview_max_scroll_percentage:k,$prev_pageview_last_content:f,$prev_pageview_last_content_percentage:x,$prev_pageview_max_content:w,$prev_pageview_max_content_percentage:$})}}return c.pathname&&(u.$prev_pageview_pathname=c.pathname),c.timestamp&&(u.$prev_pageview_duration=(a.getTime()-c.timestamp.getTime())/1e3),u}};var Fs=function(a){var l,c,u,d,p="";for(l=c=0,u=(a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,d=0;d<u;d++){var g=a.charCodeAt(d),_=null;g<128?c++:_=g>127&&g<2048?String.fromCharCode(g>>6|192,63&g|128):String.fromCharCode(g>>12|224,g>>6&63|128,63&g|128),M(_)||(c>l&&(p+=a.substring(l,c)),p+=_,l=c=d+1)}return c>l&&(p+=a.substring(l,a.length)),p},i$=!!k||!!S,iP="text/plain",Ds=(a,l)=>{var[c,u]=a.split("?"),d=B({},l);null==u||u.split("&").forEach(a=>{var[l]=a.split("=");delete d[l]});var p=$i(d);return c+"?"+(p=p?(u?u+"&":"")+p:u)},js=(a,l)=>JSON.stringify(a,(a,l)=>"bigint"==typeof l?l.toString():l,l),Ls=a=>{var{data:l,compression:c}=a;if(l){if(c===er.GZipJS){var u=jr(Lr(js(l)),{mtime:0}),d=new Blob([u],{type:iP});return{contentType:iP,body:d,estimatedSize:d.size}}if(c===er.Base64){var p,g="data="+encodeURIComponent("string"==typeof(p=function(a){var l,c,u,d,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_=0,v=0,f="",w=[];if(!a)return a;a=Fs(a);do l=(p=a.charCodeAt(_++)<<16|a.charCodeAt(_++)<<8|a.charCodeAt(_++))>>18&63,c=p>>12&63,u=p>>6&63,d=63&p,w[v++]=g.charAt(l)+g.charAt(c)+g.charAt(u)+g.charAt(d);while(_<a.length);switch(f=w.join(""),a.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"="}return f}(js(l)))?p:js(p));return{contentType:"application/x-www-form-urlencoded",body:g,estimatedSize:new Blob([g]).size}}var _=js(l);return{contentType:"application/json",body:_,estimatedSize:new Blob([_]).size}}},iM=[];S&&iM.push({transport:"fetch",method:a=>{var l,c,{contentType:u,body:d,estimatedSize:p}=null!==(l=Ls(a))&&void 0!==l?l:{},g=new Headers;J(a.headers,function(a,l){g.append(l,a)}),u&&g.append("Content-Type",u);var _=a.url,v=null;if(x){var f=new x;v={signal:f.signal,timeout:setTimeout(()=>f.abort(),a.timeout)}}S(_,B({method:(null==a?void 0:a.method)||"GET",headers:g,keepalive:"POST"===a.method&&52428.8>(p||0),body:d,signal:null==(c=v)?void 0:c.signal},a.fetchOptions)).then(l=>l.text().then(c=>{var u={statusCode:l.status,text:c};if(200===l.status)try{u.json=JSON.parse(c)}catch(a){ed.error(a)}null==a.callback||a.callback(u)})).catch(l=>{ed.error(l),null==a.callback||a.callback({statusCode:0,text:l})}).finally(()=>v?clearTimeout(v.timeout):null)}}),k&&iM.push({transport:"XHR",method:a=>{var l,c=new k;c.open(a.method||"GET",a.url,!0);var{contentType:u,body:d}=null!==(l=Ls(a))&&void 0!==l?l:{};J(a.headers,function(a,l){c.setRequestHeader(l,a)}),u&&c.setRequestHeader("Content-Type",u),a.timeout&&(c.timeout=a.timeout),c.withCredentials=!0,c.onreadystatechange=()=>{if(4===c.readyState){var l={statusCode:c.status,text:c.responseText};if(200===c.status)try{l.json=JSON.parse(c.responseText)}catch(a){}null==a.callback||a.callback(l)}},c.send(d)}}),null!=v&&v.sendBeacon&&iM.push({transport:"sendBeacon",method:a=>{var l=Ds(a.url,{beacon:"1"});try{var c,{contentType:u,body:d}=null!==(c=Ls(a))&&void 0!==c?c:{},p="string"==typeof d?new Blob([d],{type:u}):d;v.sendBeacon(l,p)}catch(a){}}});var zs=function(a,l){if(!function(a){try{new RegExp(a)}catch(a){return!1}return!0}(l))return!1;try{return new RegExp(l).test(a)}catch(a){return!1}};function Us(a,l,c){return js({distinct_id:a,userPropertiesToSet:l,userPropertiesToSetOnce:c})}var iT={exact:(a,l)=>l.some(l=>a.some(a=>l===a)),is_not:(a,l)=>l.every(l=>a.every(a=>l!==a)),regex:(a,l)=>l.some(l=>a.some(a=>zs(l,a))),not_regex:(a,l)=>l.every(l=>a.every(a=>!zs(l,a))),icontains:(a,l)=>l.map(Bs).some(l=>a.map(Bs).some(a=>l.includes(a))),not_icontains:(a,l)=>l.map(Bs).every(l=>a.map(Bs).every(a=>!l.includes(a)))},Bs=a=>a.toLowerCase(),iO=ep("[Error tracking]");let Ws=class Ws{constructor(a){var l,c;this.fe=[],this._instance=a,this.fe=null!==(l=null==(c=this._instance.persistence)?void 0:c.get_property(eS))&&void 0!==l?l:[]}onRemoteConfig(a){var l,c,u,d=null!==(l=null==(c=a.errorTracking)?void 0:c.suppressionRules)&&void 0!==l?l:[],p=null==(u=a.errorTracking)?void 0:u.captureExtensionExceptions;this.fe=d,this._instance.persistence&&this._instance.persistence.register({[eS]:this.fe,[ek]:p})}get pe(){var a,l=!!this._instance.get_property(ek),c=this._instance.config.error_tracking.captureExtensionExceptions;return null!==(a=null!=c?c:l)&&void 0!==a&&a}sendExceptionEvent(a){if(this._e(a))iO.info("Skipping exception capture because a suppression rule matched");else{if(this.pe||!this.ge(a))return this._instance.capture("$exception",a,{_noTruncate:!0,_batchKey:"exceptionEvent"});iO.info("Skipping exception capture because it was thrown by an extension")}}_e(a){var l=a.$exception_list;if(!l||!eh(l)||0===l.length)return!1;var c=l.reduce((a,l)=>{var{type:c,value:u}=l;return T(c)&&c.length>0&&a.$exception_types.push(c),T(u)&&u.length>0&&a.$exception_values.push(u),a},{$exception_types:[],$exception_values:[]});return this.fe.some(a=>{var l=a.values.map(a=>{var l,u=iT[a.operator],d=eh(a.value)?a.value:[a.value],p=null!==(l=c[a.key])&&void 0!==l?l:[];return d.length>0&&u(d,p)});return"OR"===a.type?l.some(Boolean):l.every(Boolean)})}ge(a){var l=a.$exception_list;return!(!l||!eh(l))&&l.flatMap(a=>{var l,c;return null!==(l=null==(c=a.stacktrace)?void 0:c.frames)&&void 0!==l?l:[]}).some(a=>a.filename&&a.filename.startsWith("chrome-extension://"))}};var iC="Mobile",iA="Android",iL="Tablet",iD=iA+" "+iL,iN="iPad",iB="Apple",ij=iB+" Watch",iq="Safari",iH="BlackBerry",iz="Samsung",iU=iz+"Browser",iV=iz+" Internet",iG="Chrome",iJ=iG+" OS",iW=iG+" iOS",iY="Internet Explorer",iK=iY+" "+iC,iX="Opera",iZ=iX+" Mini",iQ="Edge",i0="Microsoft "+iQ,i1="Firefox",i2=i1+" iOS",i3="Nintendo",i5="PlayStation",i6="Xbox",i4=iA+" "+iC,i8=iC+" "+iq,i7="Windows",i9=i7+" Phone",sr="Nokia",sn="Ouya",so="Generic",sa=so+" "+iC.toLowerCase(),sl=so+" "+iL.toLowerCase(),sc="Konqueror",su="(\\d+(\\.\\d+)?)",sh=RegExp("Version/"+su),sd=RegExp(i6,"i"),sp=RegExp(i5+" \\w+","i"),sg=RegExp(i3+" \\w+","i"),s_=RegExp(iH+"|PlayBook|BB10","i"),sv={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},jn=(a,l)=>l&&m(l,iB)||m(a,iq)&&!m(a,iG)&&!m(a,iA),Ln=function(a,l){return l=l||"",m(a," OPR/")&&m(a,"Mini")?iZ:m(a," OPR/")?iX:s_.test(a)?iH:m(a,"IE"+iC)||m(a,"WPDesktop")?iK:m(a,iU)?iV:m(a,iQ)||m(a,"Edg/")?i0:m(a,"FBIOS")?"Facebook "+iC:m(a,"UCWEB")||m(a,"UCBrowser")?"UC Browser":m(a,"CriOS")?iW:m(a,"CrMo")||m(a,iG)?iG:m(a,iA)&&m(a,iq)?i4:m(a,"FxiOS")?i2:m(a.toLowerCase(),sc.toLowerCase())?sc:jn(a,l)?m(a,iC)?i8:iq:m(a,i1)?i1:m(a,"MSIE")||m(a,"Trident/")?iY:m(a,"Gecko")?i1:""},sf={[iK]:[RegExp("rv:"+su)],[i0]:[RegExp(iQ+"?\\/"+su)],[iG]:[RegExp("("+iG+"|CrMo)\\/"+su)],[iW]:[RegExp("CriOS\\/"+su)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+su)],[iq]:[sh],[i8]:[sh],[iX]:[RegExp("(Opera|OPR)\\/"+su)],[i1]:[RegExp(i1+"\\/"+su)],[i2]:[RegExp("FxiOS\\/"+su)],[sc]:[RegExp("Konqueror[:/]?"+su,"i")],[iH]:[RegExp(iH+" "+su),sh],[i4]:[RegExp("android\\s"+su,"i")],[iV]:[RegExp(iU+"\\/"+su)],[iY]:[RegExp("(rv:|MSIE )"+su)],Mozilla:[RegExp("rv:"+su)]},zn=function(a,l){var c=sf[Ln(a,l)];if(R(c))return null;for(var u=0;u<c.length;u++){var d=c[u],p=a.match(d);if(p)return parseFloat(p[p.length-2])}return null},sm=[[RegExp(i6+"; "+i6+" (.*?)[);]","i"),a=>[i6,a&&a[1]||""]],[RegExp(i3,"i"),[i3,""]],[RegExp(i5,"i"),[i5,""]],[s_,[iH,""]],[RegExp(i7,"i"),(a,l)=>{if(/Phone/.test(l)||/WPDesktop/.test(l))return[i9,""];if(new RegExp(iC).test(l)&&!/IEMobile\b/.test(l))return[i7+" "+iC,""];var c=/Windows NT ([0-9.]+)/i.exec(l);if(c&&c[1]){var u=sv[c[1]]||"";return/arm/i.test(l)&&(u="RT"),[i7,u]}return[i7,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,a=>a&&a[3]?["iOS",[a[3],a[4],a[5]||"0"].join(".")]:["iOS",""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,a=>{var l="";return a&&a.length>=3&&(l=R(a[2])?a[3]:a[2]),["watchOS",l]}],[RegExp("("+iA+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+iA+")","i"),a=>a&&a[2]?[iA,[a[2],a[3],a[4]||"0"].join(".")]:[iA,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,a=>{var l=["Mac OS X",""];if(a&&a[1]){var c=[a[1],a[2],a[3]||"0"];l[1]=c.join(".")}return l}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[iJ,""]],[/Linux|debian/i,["Linux",""]]],qn=function(a){return sg.test(a)?i3:sp.test(a)?i5:sd.test(a)?i6:RegExp(sn,"i").test(a)?sn:RegExp("("+i9+"|WPDesktop)","i").test(a)?i9:/iPad/.test(a)?iN:/iPod/.test(a)?"iPod Touch":/iPhone/.test(a)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(a)?ij:s_.test(a)?iH:/(kobo)\s(ereader|touch)/i.test(a)?"Kobo":RegExp(sr,"i").test(a)?sr:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(a)||/(kf[a-z]+)( bui|\)).+silk\//i.test(a)?"Kindle Fire":/(Android|ZTE)/i.test(a)?!new RegExp(iC).test(a)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(a)?/pixel[\daxl ]{1,6}/i.test(a)&&!/pixel c/i.test(a)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(a)||/lmy47v/i.test(a)&&!/QTAQZ3/i.test(a)?iA:iD:iA:RegExp("(pda|"+iC+")","i").test(a)?sa:RegExp(iL,"i").test(a)&&!RegExp(iL+" pc","i").test(a)?sl:""},sy="https?://(.*)",sb=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],sw=K(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],sb),sE="<masked>",sS=["li_fat_id"];function Vn(a,l,c){if(!f)return{};var u,d=l?K([],sb,c||[]):[],p=Kn(ki(f.URL,d,sE),a);return V((u={},J(sS,function(a){var l=tg.D(a);u[a]=l||null}),u),p)}function Kn(a,l){var c=sw.concat(l||[]),u={};return J(c,function(l){var c=xi(a,l);u[l]=c||null}),u}function Yn(a){var l=a?0===a.search(sy+"google.([^/?]*)")?"google":0===a.search(sy+"bing.com")?"bing":0===a.search(sy+"yahoo.com")?"yahoo":0===a.search(sy+"duckduckgo.com")?"duckduckgo":null:null,c="yahoo"!=l?"q":"p",u={};if(!M(l)){u.$search_engine=l;var d=f?xi(f.referrer,c):"";d.length&&(u.ph_keyword=d)}return u}function Xn(){return navigator.language||navigator.userLanguage}function Qn(){return(null==f?void 0:f.referrer)||"$direct"}function Zn(a,l){var c=a?K([],sb,l||[]):[],u=null==w?void 0:w.href.substring(0,1e3);return{r:Qn().substring(0,1e3),u:u?ki(u,c,sE):void 0}}function to(a){var l,{r:c,u:u}=a,d={$referrer:c,$referring_domain:null==c?void 0:"$direct"==c?"$direct":null==(l=Si(c))?void 0:l.host};if(u){d.$current_url=u;var p=Si(u);d.$host=null==p?void 0:p.host,d.$pathname=null==p?void 0:p.pathname,V(d,Kn(u))}return c&&V(d,Yn(c)),d}function io(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(a){return}}function eo(){try{return(new Date).getTimezoneOffset()}catch(a){return}}function ro(a,l){if(!$)return{};var c,d,p=a?K([],sb,l||[]):[],[g,_]=function(a){for(var l=0;l<sm.length;l++){var[c,u]=sm[l],d=c.exec(a),p=d&&(E(u)?u(d,a):u);if(p)return p}return["",""]}($);return V(Z({$os:g,$os_version:_,$browser:Ln($,navigator.vendor),$device:qn($),$device_type:(d=qn($))===iN||d===iD||"Kobo"===d||"Kindle Fire"===d||d===sl?iL:d===i3||d===i6||d===i5||d===sn?"Console":d===ij?"Wearable":d?iC:"Desktop",$timezone:io(),$timezone_offset:eo()}),{$current_url:ki(null==w?void 0:w.href,p,sE),$host:null==w?void 0:w.host,$pathname:null==w?void 0:w.pathname,$raw_user_agent:$.length>1e3?$.substring(0,997)+"...":$,$browser_version:zn($,navigator.vendor),$browser_language:Xn(),$browser_language_prefix:"string"==typeof(c=Xn())?c.split("-")[0]:void 0,$screen_height:null==u?void 0:u.screen.height,$screen_width:null==u?void 0:u.screen.width,$viewport_height:null==u?void 0:u.innerHeight,$viewport_width:null==u?void 0:u.innerWidth,$lib:"web",$lib_version:z.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var sk=ep("[FeatureFlags]"),sx="$active_feature_flags",sR="$override_feature_flags",sI="$feature_flag_payloads",sF="$override_feature_flag_payloads",s$="$feature_flag_request_id",ho=a=>{var l={};for(var[c,u]of Y(a||{}))u&&(l[c]=u);return l},vo=a=>{var l=a.flags;return l?(a.featureFlags=Object.fromEntries(Object.keys(l).map(a=>{var c;return[a,null!==(c=l[a].variant)&&void 0!==c?c:l[a].enabled]})),a.featureFlagPayloads=Object.fromEntries(Object.keys(l).filter(a=>l[a].enabled).filter(a=>{var c;return null==(c=l[a].metadata)?void 0:c.payload}).map(a=>{var c;return[a,null==(c=l[a].metadata)?void 0:c.payload]}))):sk.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),a},sP=((s2={}).FeatureFlags="feature_flags",s2.Recordings="recordings",s2);let fo=class fo{constructor(a){this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this.$e=!1,this.xe=!1,this._instance=a,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.$e=!0;else{var a=!this.ke&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.Ee({disableFlags:a})}}get hasLoadedFlags(){return this.be}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var a=this._instance.get_property(eH),l=this._instance.get_property(sR),c=this._instance.get_property(sF);if(!c&&!l)return a||{};var u=V({},a||{});for(var d of[...new Set([...Object.keys(c||{}),...Object.keys(l||{})])]){var p,g,_=u[d],v=null==l?void 0:l[d],f=R(v)?null!==(p=null==_?void 0:_.enabled)&&void 0!==p&&p:!!v,w=R(v)?_.variant:"string"==typeof v?v:void 0,S=null==c?void 0:c[d],k=B({},_,{enabled:f,variant:f?null!=w?w:null==_?void 0:_.variant:void 0});f!==(null==_?void 0:_.enabled)&&(k.original_enabled=null==_?void 0:_.enabled),w!==(null==_?void 0:_.variant)&&(k.original_variant=null==_?void 0:_.variant),S&&(k.metadata=B({},null==_?void 0:_.metadata,{payload:S,original_payload:null==_||null==(g=_.metadata)?void 0:g.payload})),u[d]=k}return this.me||(sk.warn(" Overriding feature flag details!",{flagDetails:a,overriddenPayloads:c,finalDetails:u}),this.me=!0),u}getFlagVariants(){var a=this._instance.get_property(ej),l=this._instance.get_property(sR);if(!l)return a||{};for(var c=V({},a),u=Object.keys(l),d=0;d<u.length;d++)c[u[d]]=l[u[d]];return this.me||(sk.warn(" Overriding feature flags!",{enabledFlags:a,overriddenFlags:l,finalFlags:c}),this.me=!0),c}getFlagPayloads(){var a=this._instance.get_property(sI),l=this._instance.get_property(sF);if(!l)return a||{};for(var c=V({},a||{}),u=Object.keys(l),d=0;d<u.length;d++)c[u[d]]=l[u[d]];return this.me||(sk.warn(" Overriding feature flag payloads!",{flagPayloads:a,overriddenPayloads:l,finalPayloads:c}),this.me=!0),c}reloadFeatureFlags(){this.we||this._instance.config.advanced_disable_feature_flags||this.ke||(this.ke=setTimeout(()=>{this.Ee()},5))}Ie(){clearTimeout(this.ke),this.ke=void 0}ensureFlagsLoaded(){this.be||this.ye||this.ke||this.reloadFeatureFlags()}setAnonymousDistinctId(a){this.$anon_distinct_id=a}setReloadingPaused(a){this.we=a}Ee(a){var l;if(this.Ie(),!this._instance.I()){if(this.ye)this.Se=!0;else{var c={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:B({},(null==(l=this._instance.persistence)?void 0:l.get_initial_props())||{},this._instance.get_property(ez)||{}),group_properties:this._instance.get_property(eU)};(null!=a&&a.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(c.disable_flags=!0);var u=this._instance.config.__preview_remote_config,d=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",p=this._instance.requestRouter.endpointFor("api",(u?"/flags/?v=2":"/flags/?v=2&config=true")+d);u&&(c.timezone=io()),this.ye=!0,this._instance.Pe({method:"POST",url:p,data:c,compression:this._instance.config.disable_compression?void 0:er.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:a=>{var l,u,d,p=!0;200===a.statusCode&&(this.Se||(this.$anon_distinct_id=void 0),p=!1),this.ye=!1,this.$e||(this.$e=!0,this._instance.Re(null!==(d=a.json)&&void 0!==d?d:{})),(!c.disable_flags||this.Se)&&((this.xe=!p,a.json&&null!=(u=a.json.quotaLimited)&&u.includes(sP.FeatureFlags))?sk.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(c.disable_flags||this.receivedFeatureFlags(null!==(l=a.json)&&void 0!==l?l:{},p),this.Se&&(this.Se=!1,this.Ee())))}})}}}getFeatureFlag(a,l){if(void 0===l&&(l={}),this.be||this.getFlags()&&this.getFlags().length>0){var c=this.getFlagVariants()[a],u=""+c,d=this._instance.get_property(s$)||void 0,p=this._instance.get_property(eJ)||{};if((l.send_event||!("send_event"in l))&&(!(a in p)||!p[a].includes(u))){eh(p[a])?p[a].push(u):p[a]=[u],null==(v=this._instance.persistence)||v.register({[eJ]:p});var g=this.getFeatureFlagDetails(a),_={$feature_flag:a,$feature_flag_response:c,$feature_flag_payload:this.getFeatureFlagPayload(a)||null,$feature_flag_request_id:d,$feature_flag_bootstrapped_response:(null==(f=this._instance.config.bootstrap)||null==(f=f.featureFlags)?void 0:f[a])||null,$feature_flag_bootstrapped_payload:(null==(w=this._instance.config.bootstrap)||null==(w=w.featureFlagPayloads)?void 0:w[a])||null,$used_bootstrap_value:!this.xe};R(null==g||null==(S=g.metadata)?void 0:S.version)||(_.$feature_flag_version=g.metadata.version);var v,f,w,S,k,x,$,N,z,U,W=null!==(k=null==g||null==(x=g.reason)?void 0:x.description)&&void 0!==k?k:null==g||null==($=g.reason)?void 0:$.code;W&&(_.$feature_flag_reason=W),null!=g&&null!=(N=g.metadata)&&N.id&&(_.$feature_flag_id=g.metadata.id),R(null==g?void 0:g.original_variant)&&R(null==g?void 0:g.original_enabled)||(_.$feature_flag_original_response=R(g.original_variant)?g.original_enabled:g.original_variant),null!=g&&null!=(z=g.metadata)&&z.original_payload&&(_.$feature_flag_original_payload=null==g||null==(U=g.metadata)?void 0:U.original_payload),this._instance.capture("$feature_flag_called",_)}return c}sk.warn('getFeatureFlag for key "'+a+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(a){return this.getFlagsWithDetails()[a]}getFeatureFlagPayload(a){return this.getFlagPayloads()[a]}getRemoteConfigPayload(a,l){var c=this._instance.config.token;this._instance.Pe({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:c},compression:this._instance.config.disable_compression?void 0:er.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:c=>{var u,d=null==(u=c.json)?void 0:u.featureFlagPayloads;l((null==d?void 0:d[a])||void 0)}})}isFeatureEnabled(a,l){if(void 0===l&&(l={}),this.be||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(a,l);sk.warn('isFeatureEnabled for key "'+a+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(a){this.featureFlagEventHandlers.push(a)}removeFeatureFlagsHandler(a){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(l=>l!==a)}receivedFeatureFlags(a,l){if(this._instance.persistence){this.be=!0;var c=this.getFlagVariants(),u=this.getFlagPayloads(),d=this.getFlagsWithDetails();!function(a,l,c,u,d){void 0===c&&(c={}),void 0===u&&(u={}),void 0===d&&(d={});var p=vo(a),g=p.flags,_=p.featureFlags,v=p.featureFlagPayloads;if(_){var f=a.requestId;if(eh(_)){sk.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var w={};if(_)for(var S=0;S<_.length;S++)w[_[S]]=!0;l&&l.register({[sx]:_,[ej]:w})}else{var k=_,x=v,$=g;a.errorsWhileComputingFlags&&(k=B({},c,k),x=B({},u,x),$=B({},d,$)),l&&l.register(B({[sx]:Object.keys(ho(k)),[ej]:k||{},[sI]:x||{},[eH]:$||{}},f?{[s$]:f}:{}))}}}(a,this._instance.persistence,c,u,d),this.Te(l)}}override(a,l){void 0===l&&(l=!1),sk.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:a,suppressWarning:l})}overrideFeatureFlags(a){if(!this._instance.__loaded||!this._instance.persistence)return sk.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===a)return this._instance.persistence.unregister(sR),this._instance.persistence.unregister(sF),void this.Te();if(a&&"object"==typeof a&&("flags"in a||"payloads"in a)){var l;if(this.me=!!(null!==(l=a.suppressWarning)&&void 0!==l&&l),"flags"in a){if(!1===a.flags)this._instance.persistence.unregister(sR);else if(a.flags){if(eh(a.flags)){for(var c={},u=0;u<a.flags.length;u++)c[a.flags[u]]=!0;this._instance.persistence.register({[sR]:c})}else this._instance.persistence.register({[sR]:a.flags})}}return"payloads"in a&&(!1===a.payloads?this._instance.persistence.unregister(sF):a.payloads&&this._instance.persistence.register({[sF]:a.payloads})),void this.Te()}this.Te()}onFeatureFlags(a){if(this.addFeatureFlagsHandler(a),this.be){var{flags:l,flagVariants:c}=this.Ce();a(l,c)}return()=>this.removeFeatureFlagsHandler(a)}updateEarlyAccessFeatureEnrollment(a,l,c){var u,d=(this._instance.get_property(eq)||[]).find(l=>l.flagKey===a),p={["$feature_enrollment/"+a]:l},g={$feature_flag:a,$feature_enrollment:l,$set:p};d&&(g.$early_access_feature_name=d.name),c&&(g.$feature_enrollment_stage=c),this._instance.capture("$feature_enrollment_update",g),this.setPersonPropertiesForFlags(p,!1);var _=B({},this.getFlagVariants(),{[a]:l});null==(u=this._instance.persistence)||u.register({[sx]:Object.keys(ho(_)),[ej]:_}),this.Te()}getEarlyAccessFeatures(a,l,c){void 0===l&&(l=!1);var u=this._instance.get_property(eq),d=c?"&"+c.map(a=>"stage="+a).join("&"):"";if(u&&!l)return a(u);this._instance.Pe({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+d),method:"GET",callback:l=>{var c,u;if(l.json){var d=l.json.earlyAccessFeatures;return null==(c=this._instance.persistence)||c.unregister(eq),null==(u=this._instance.persistence)||u.register({[eq]:d}),a(d)}}})}Ce(){var a=this.getFlags(),l=this.getFlagVariants();return{flags:a.filter(a=>l[a]),flagVariants:Object.keys(l).filter(a=>l[a]).reduce((a,c)=>(a[c]=l[c],a),{})}}Te(a){var{flags:l,flagVariants:c}=this.Ce();this.featureFlagEventHandlers.forEach(u=>u(l,c,{errorsLoading:a}))}setPersonPropertiesForFlags(a,l){void 0===l&&(l=!0);var c=this._instance.get_property(ez)||{};this._instance.register({[ez]:B({},c,a)}),l&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(ez)}setGroupPropertiesForFlags(a,l){void 0===l&&(l=!0);var c=this._instance.get_property(eU)||{};0!==Object.keys(c).length&&Object.keys(c).forEach(l=>{c[l]=B({},c[l],a[l]),delete a[l]}),this._instance.register({[eU]:B({},c,a)}),l&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(a){if(a){var l=this._instance.get_property(eU)||{};this._instance.register({[eU]:B({},l,{[a]:{}})})}else this._instance.unregister(eU)}reset(){this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this.$e=!1,this.xe=!1,this.$anon_distinct_id=void 0,this.Ie(),this.me=!1}};var sM=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];let _o=class _o{constructor(a,l){var c;this.S=a,this.props={},this.Me=!1,this.Fe=(c="",a.token&&(c=a.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),a.persistence_name?"ph_"+a.persistence_name:"ph_"+c+"_posthog"),this.B=this.Oe(a),this.load(),a.debug&&ed.info("Persistence loaded",a.persistence,B({},this.props)),this.update_config(a,a,l),this.save()}isDisabled(){return!!this.Ae}Oe(a){-1===sM.indexOf(a.persistence.toLowerCase())&&(ed.critical("Unknown persistence type "+a.persistence+"; falling back to localStorage+cookie"),a.persistence="localStorage+cookie");var l=a.persistence.toLowerCase();return"localstorage"===l&&tv.O()?tv:"localstorage+cookie"===l&&tm.O()?tm:"sessionstorage"===l&&tE.O()?tE:"memory"===l?tb:"cookie"===l?tg:tm.O()?tm:tg}properties(){var a={};return J(this.props,function(l,c){if(c===ej&&I(l))for(var u,d=Object.keys(l),p=0;p<d.length;p++)a["$feature/"+d[p]]=l[d[p]];else u=!1,(M(e3)?u:_&&e3.indexOf===_?-1!=e3.indexOf(c):(J(e3,function(a){if(u||(u=a===c))return e_}),u))||(a[c]=l)}),a}load(){if(!this.Ae){var a=this.B.j(this.Fe);a&&(this.props=V({},a))}}save(){this.Ae||this.B.L(this.Fe,this.props,this.De,this.je,this.Le,this.S.debug)}remove(){this.B.N(this.Fe,!1),this.B.N(this.Fe,!0)}clear(){this.remove(),this.props={}}register_once(a,l,c){if(I(a)){R(l)&&(l="None"),this.De=R(c)?this.Ne:c;var u=!1;if(J(a,(a,c)=>{this.props.hasOwnProperty(c)&&this.props[c]!==l||(this.props[c]=a,u=!0)}),u)return this.save(),!0}return!1}register(a,l){if(I(a)){this.De=R(l)?this.Ne:l;var c=!1;if(J(a,(l,u)=>{a.hasOwnProperty(u)&&this.props[u]!==l&&(this.props[u]=l,c=!0)}),c)return this.save(),!0}return!1}unregister(a){a in this.props&&(delete this.props[a],this.save())}update_campaign_params(){if(!this.Me){var a=Vn(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);P(Z(a))||this.register(a),this.Me=!0}}update_search_keyword(){var a;this.register((a=null==f?void 0:f.referrer)?Yn(a):{})}update_referrer_info(){var a;this.register_once({$referrer:Qn(),$referring_domain:null!=f&&f.referrer&&(null==(a=Si(f.referrer))?void 0:a.host)||"$direct"},void 0)}set_initial_person_info(){this.props[eX]||this.props[eZ]||this.register_once({[eQ]:Zn(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var a={};J([eZ,eX],l=>{var c=this.props[l];c&&J(c,function(l,c){a["$initial_"+y(c)]=l})});var l,c,u=this.props[eQ];return u&&V(a,(l=to(u),c={},J(l,function(a,l){c["$initial_"+y(l)]=a}),c)),a}safe_merge(a){return J(this.props,function(l,c){c in a||(a[c]=l)}),a}update_config(a,l,c){if(this.Ne=this.De=a.cookie_expiration,this.set_disabled(a.disable_persistence||!!c),this.set_cross_subdomain(a.cross_subdomain_cookie),this.set_secure(a.secure_cookie),a.persistence!==l.persistence){var u=this.Oe(a),d=this.props;this.clear(),this.B=u,this.props=d,this.save()}}set_disabled(a){this.Ae=a,this.Ae?this.remove():this.save()}set_cross_subdomain(a){a!==this.je&&(this.je=a,this.remove(),this.save())}set_secure(a){a!==this.Le&&(this.Le=a,this.remove(),this.save())}set_event_timer(a,l){var c=this.props[ey]||{};c[a]=l,this.props[ey]=c,this.save()}remove_event_timer(a){var l=(this.props[ey]||{})[a];return R(l)||(delete this.props[ey][a],this.save()),l}get_property(a){return this.props[a]}set_property(a,l){this.props[a]=l,this.save()}};let go=class go{constructor(){this.ze={},this.ze={}}on(a,l){return this.ze[a]||(this.ze[a]=[]),this.ze[a].push(l),()=>{this.ze[a]=this.ze[a].filter(a=>a!==l)}}emit(a,l){for(var c of this.ze[a]||[])c(l);for(var u of this.ze["*"]||[])u(a,l)}};let mo=class mo{constructor(a){this.Ue=new go,this.qe=(a,l)=>this.Be(a,l)&&this.He(a,l)&&this.We(a,l),this.Be=(a,l)=>null==l||!l.event||(null==a?void 0:a.event)===(null==l?void 0:l.event),this._instance=a,this.Ge=new Set,this.Je=new Set}init(){var a,l;R(null==(a=this._instance)?void 0:a.Ve)||null==(l=this._instance)||l.Ve((a,l)=>{this.on(a,l)})}register(a){var l,c;if(!R(null==(l=this._instance)?void 0:l.Ve)&&(a.forEach(a=>{var l,c;null==(l=this.Je)||l.add(a),null==(c=a.steps)||c.forEach(a=>{var l;null==(l=this.Ge)||l.add((null==a?void 0:a.event)||"")})}),null!=(c=this._instance)&&c.autocapture)){var u,d=new Set;a.forEach(a=>{var l;null==(l=a.steps)||l.forEach(a=>{null!=a&&a.selector&&d.add(null==a?void 0:a.selector)})}),null==(u=this._instance)||u.autocapture.setElementSelectors(d)}}on(a,l){var c;null!=l&&0!=a.length&&(this.Ge.has(a)||this.Ge.has(null==l?void 0:l.event))&&this.Je&&(null==(c=this.Je)?void 0:c.size)>0&&this.Je.forEach(a=>{this.Ke(l,a)&&this.Ue.emit("actionCaptured",a.name)})}Ye(a){this.onAction("actionCaptured",l=>a(l))}Ke(a,l){if(null==(null==l?void 0:l.steps))return!1;for(var c of l.steps)if(this.qe(a,c))return!0;return!1}onAction(a,l){return this.Ue.on(a,l)}He(a,l){if(null!=l&&l.url){var c,u=null==a||null==(c=a.properties)?void 0:c.$current_url;if(!u||"string"!=typeof u||!mo.Xe(u,null==l?void 0:l.url,(null==l?void 0:l.url_matching)||"contains"))return!1}return!0}static Xe(a,l,c){switch(c){case"regex":return!!u&&zs(a,l);case"exact":return l===a;case"contains":return zs(a,mo.Qe(l).replace(/_/g,".").replace(/%/g,".*"));default:return!1}}static Qe(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}We(a,l){if((null!=l&&l.href||null!=l&&l.tag_name||null!=l&&l.text)&&!this.Ze(a).some(a=>!(null!=l&&l.href&&!mo.Xe(a.href||"",null==l?void 0:l.href,(null==l?void 0:l.href_matching)||"exact"))&&(null==l||!l.tag_name||a.tag_name===(null==l?void 0:l.tag_name))&&!(null!=l&&l.text&&!mo.Xe(a.text||"",null==l?void 0:l.text,(null==l?void 0:l.text_matching)||"exact")&&!mo.Xe(a.$el_text||"",null==l?void 0:l.text,(null==l?void 0:l.text_matching)||"exact"))))return!1;if(null!=l&&l.selector){var c,u=null==a||null==(c=a.properties)?void 0:c.$element_selectors;if(!u||!u.includes(null==l?void 0:l.selector))return!1}return!0}Ze(a){return null==(null==a?void 0:a.properties.$elements)?[]:null==a?void 0:a.properties.$elements}};(s3={}).Button="button",s3.Tab="tab",s3.Selector="selector",(s5={}).TopLeft="top_left",s5.TopRight="top_right",s5.TopCenter="top_center",s5.MiddleLeft="middle_left",s5.MiddleRight="middle_right",s5.MiddleCenter="middle_center",s5.Left="left",s5.Center="center",s5.Right="right",s5.NextToTrigger="next_to_trigger";var sT=((s6={}).Popover="popover",s6.API="api",s6.Widget="widget",s6.ExternalSurvey="external_survey",s6),sO=((s4={}).Open="open",s4.MultipleChoice="multiple_choice",s4.SingleChoice="single_choice",s4.Rating="rating",s4.Link="link",(s8={}).NextQuestion="next_question",s8.End="end",s8.ResponseBased="response_based",s8.SpecificQuestion="specific_question",(s7={}).Once="once",s7.Recurring="recurring",s7.Always="always",(s9={}).SHOWN="survey shown",s9.DISMISSED="survey dismissed",s9.SENT="survey sent",s9),sC=((ri={}).SURVEY_ID="$survey_id",ri.SURVEY_NAME="$survey_name",ri.SURVEY_RESPONSE="$survey_response",ri.SURVEY_ITERATION="$survey_iteration",ri.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",ri.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",ri.SURVEY_SUBMISSION_ID="$survey_submission_id",ri.SURVEY_QUESTIONS="$survey_questions",ri.SURVEY_COMPLETED="$survey_completed",ri),sA=ep("[Surveys]"),sL="seenSurvey_",Ro=(a,l)=>{var c="$survey_"+l+"/"+a.id;return a.current_iteration&&a.current_iteration>0&&(c="$survey_"+l+"/"+a.id+"/"+a.current_iteration),c},To=a=>{var l=""+sL+a.id;return a.current_iteration&&a.current_iteration>0&&(l=""+sL+a.id+"_"+a.current_iteration),l},sD=[sT.Popover,sT.Widget,sT.API];let Mo=class Mo{constructor(a){this._instance=a,this.tr=new Map,this.ir=new Map}register(a){var l;R(null==(l=this._instance)?void 0:l.Ve)||(this.er(a),this.rr(a))}rr(a){var l=a.filter(a=>{var l,c;return(null==(l=a.conditions)?void 0:l.actions)&&(null==(c=a.conditions)||null==(c=c.actions)||null==(c=c.values)?void 0:c.length)>0});0!==l.length&&(null==this.sr&&(this.sr=new mo(this._instance),this.sr.init(),this.sr.Ye(a=>{this.onAction(a)})),l.forEach(a=>{var l,c,u,d,p;a.conditions&&null!=(l=a.conditions)&&l.actions&&null!=(c=a.conditions)&&null!=(c=c.actions)&&c.values&&(null==(u=a.conditions)||null==(u=u.actions)||null==(u=u.values)?void 0:u.length)>0&&(null==(d=this.sr)||d.register(a.conditions.actions.values),null==(p=a.conditions)||null==(p=p.actions)||null==(p=p.values)||p.forEach(l=>{if(l&&l.name){var c=this.ir.get(l.name);c&&c.push(a.id),this.ir.set(l.name,c||[a.id])}}))}))}er(a){var l;0!==a.filter(a=>{var l,c;return(null==(l=a.conditions)?void 0:l.events)&&(null==(c=a.conditions)||null==(c=c.events)||null==(c=c.values)?void 0:c.length)>0}).length&&(null==(l=this._instance)||l.Ve((a,l)=>{this.onEvent(a,l)}),a.forEach(a=>{var l;null==(l=a.conditions)||null==(l=l.events)||null==(l=l.values)||l.forEach(l=>{if(l&&l.name){var c=this.tr.get(l.name);c&&c.push(a.id),this.tr.set(l.name,c||[a.id])}})}))}onEvent(a,l){var c,u=(null==(c=this._instance)||null==(c=c.persistence)?void 0:c.props[eG])||[];if("survey shown"===a&&l&&u.length>0){sA.info("survey event matched, removing survey from activated surveys",{event:a,eventPayload:l,existingActivatedSurveys:u});var d,p=null==l||null==(d=l.properties)?void 0:d.$survey_id;if(p){var g=u.indexOf(p);g>=0&&(u.splice(g,1),this.nr(u))}}else this.tr.has(a)&&(sA.info("survey event matched, updating activated surveys",{event:a,surveys:this.tr.get(a)}),this.nr(u.concat(this.tr.get(a)||[])))}onAction(a){var l,c=(null==(l=this._instance)||null==(l=l.persistence)?void 0:l.props[eG])||[];this.ir.has(a)&&this.nr(c.concat(this.ir.get(a)||[]))}nr(a){var l;null==(l=this._instance)||null==(l=l.persistence)||l.register({[eG]:[...new Set(a)]})}getSurveys(){var a;return(null==(a=this._instance)||null==(a=a.persistence)?void 0:a.props[eG])||[]}getEventToSurveys(){return this.tr}ar(){return this.sr}};let Fo=class Fo{constructor(a){this.lr=void 0,this._surveyManager=null,this.ur=!1,this.hr=!1,this.dr=[],this._instance=a,this._surveyEventReceiver=null}onRemoteConfig(a){var l=a.surveys;if(F(l))return sA.warn("Flags not loaded yet. Not loading surveys.");var c=eh(l);this.lr=c?l.length>0:l,sA.info("flags response received, isSurveysEnabled: "+this.lr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var a=[],l=0;l<localStorage.length;l++){var c=localStorage.key(l);(null!=c&&c.startsWith(sL)||null!=c&&c.startsWith("inProgressSurvey_"))&&a.push(c)}a.forEach(a=>localStorage.removeItem(a))}loadIfEnabled(){if(!this._surveyManager){if(this.hr)sA.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)sA.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode)sA.info("Not loading surveys in cookieless mode.");else{var a=null==N?void 0:N.__PosthogExtensions__;if(a){if(!R(this.lr)||this._instance.config.advanced_enable_surveys){var l=this.lr||this._instance.config.advanced_enable_surveys;this.hr=!0;try{var c=a.generateSurveys;if(c)return void this.vr(c,l);var u=a.loadExternalDependency;if(!u)return void this.cr("PostHog loadExternalDependency extension not found.");u(this._instance,"surveys",c=>{c||!a.generateSurveys?this.cr("Could not load surveys script",c):this.vr(a.generateSurveys,l)})}catch(a){throw this.cr("Error initializing surveys",a),a}finally{this.hr=!1}}}else sA.error("PostHog Extensions not found.")}}}vr(a,l){this._surveyManager=a(this._instance,l),this._surveyEventReceiver=new Mo(this._instance),sA.info("Surveys loaded successfully"),this.pr({isLoaded:!0})}cr(a,l){sA.error(a,l),this.pr({isLoaded:!1,error:a})}onSurveysLoaded(a){return this.dr.push(a),this._surveyManager&&this.pr({isLoaded:!0}),()=>{this.dr=this.dr.filter(l=>l!==a)}}getSurveys(a,l){if(void 0===l&&(l=!1),this._instance.config.disable_surveys)return sA.info("Disabled. Not loading surveys."),a([]);var c=this._instance.get_property(eV);if(c&&!l)return a(c,{isLoaded:!0});if(this.ur)return a([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.ur=!0,this._instance.Pe({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:l=>{this.ur=!1;var c=l.statusCode;if(200!==c||!l.json){var u="Surveys API could not be loaded, status: "+c;return sA.error(u),a([],{isLoaded:!1,error:u})}var d,p,g=l.json.surveys||[],_=g.filter(a=>{var l,c;return!(!a.start_date||a.end_date)&&(!(null==(l=a.conditions)||null==(l=l.events)||null==(l=l.values)||!l.length)||!(null==(c=a.conditions)||null==(c=c.actions)||null==(c=c.values)||!c.length))});return _.length>0&&(null==(p=this._surveyEventReceiver)||p.register(_)),null==(d=this._instance.persistence)||d.register({[eV]:g}),a(g,{isLoaded:!0})}})}catch(a){throw this.ur=!1,a}}pr(a){for(var l of this.dr)try{if(!a.isLoaded)return l([],a);this.getSurveys(l)}catch(a){sA.error("Error in survey callback",a)}}getActiveMatchingSurveys(a,l){if(void 0===l&&(l=!1),!F(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(a,l);sA.warn("init was not called")}_r(a){var l=null;return this.getSurveys(c=>{var u;l=null!==(u=c.find(l=>l.id===a))&&void 0!==u?u:null}),l}gr(a){if(F(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var l="string"==typeof a?this._r(a):a;return l?this._surveyManager.checkSurveyEligibility(l):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(a){if(F(this._surveyManager))return sA.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var l=this.gr(a);return{visible:l.eligible,disabledReason:l.reason}}canRenderSurveyAsync(a,l){return F(this._surveyManager)?(sA.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(c=>{this.getSurveys(l=>{var u,d=null!==(u=l.find(l=>l.id===a))&&void 0!==u?u:null;if(d){var p=this.gr(d);c({visible:p.eligible,disabledReason:p.reason})}else c({visible:!1,disabledReason:"Survey not found"})},l)})}renderSurvey(a,l){if(F(this._surveyManager))sA.warn("init was not called");else{var c=this._r(a);if(c){if(sD.includes(c.type)){var u=null==f?void 0:f.querySelector(l);u?this._surveyManager.renderSurvey(c,u):sA.warn("Survey element not found")}else sA.warn("Surveys of type "+c.type+" cannot be rendered in the app")}else sA.warn("Survey not found")}}};var sN=ep("[RateLimiter]");let Ao=class Ao{constructor(a){var l,c;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=a=>{var l=a.text;if(l&&l.length)try{(JSON.parse(l).quota_limited||[]).forEach(a=>{sN.info((a||"events")+" is quota limited."),this.serverLimits[a]=(new Date).getTime()+6e4})}catch(a){return void sN.warn('could not rate limit - continuing. Error: "'+(null==a?void 0:a.message)+'"',{text:l})}},this.instance=a,this.captureEventsPerSecond=(null==(l=a.config.rate_limiting)?void 0:l.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(c=a.config.rate_limiting)?void 0:c.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(a){void 0===a&&(a=!1);var l,c,u,d=(new Date).getTime(),p=null!==(l=null==(c=this.instance.persistence)?void 0:c.get_property(eK))&&void 0!==l?l:{tokens:this.captureEventsBurstLimit,last:d};p.tokens+=(d-p.last)/1e3*this.captureEventsPerSecond,p.last=d,p.tokens>this.captureEventsBurstLimit&&(p.tokens=this.captureEventsBurstLimit);var g=p.tokens<1;return g||a||(p.tokens=Math.max(0,p.tokens-1)),!g||this.lastEventRateLimited||a||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=g,null==(u=this.instance.persistence)||u.set_property(eK,p),{isRateLimited:g,remainingTokens:p.tokens}}isServerRateLimited(a){var l=this.serverLimits[a||"events"]||!1;return!1!==l&&(new Date).getTime()<l}};var sB=ep("[RemoteConfig]");let jo=class jo{constructor(a){this._instance=a}get remoteConfig(){var a;return null==(a=N._POSTHOG_REMOTE_CONFIG)||null==(a=a[this._instance.config.token])?void 0:a.config}mr(a){var l,c;null!=(l=N.__PosthogExtensions__)&&l.loadExternalDependency?null==(c=N.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"remote-config",()=>a(this.remoteConfig)):(sB.error("PostHog Extensions not found. Cannot load remote config."),a())}br(a){this._instance.Pe({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:l=>{a(l.json)}})}load(){try{if(this.remoteConfig)return sB.info("Using preloaded remote config",this.remoteConfig),void this.Re(this.remoteConfig);if(this._instance.I())return void sB.warn("Remote config is disabled. Falling back to local config.");this.mr(a=>{if(!a)return sB.info("No config found after loading remote JS config. Falling back to JSON."),void this.br(a=>{this.Re(a)});this.Re(a)})}catch(a){sB.error("Error loading remote config",a)}}Re(a){a?this._instance.config.__preview_remote_config?(this._instance.Re(a),!1!==a.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):sB.info("__preview_remote_config is disabled. Logging config instead",a):sB.error("Failed to fetch remote config from PostHog.")}};let No=class No{constructor(a,l){this.yr=!0,this.wr=[],this.Sr=ne((null==l?void 0:l.flush_interval_ms)||3e3,250,5e3,"flush interval",3e3),this.$r=a}enqueue(a){this.wr.push(a),this.kr||this.Er()}unload(){this.Ir();var a=Object.values(this.wr.length>0?this.Pr():{});[...a.filter(a=>0===a.url.indexOf("/e")),...a.filter(a=>0!==a.url.indexOf("/e"))].map(a=>{this.$r(B({},a,{transport:"sendBeacon"}))})}enable(){this.yr=!1,this.Er()}Er(){var a=this;this.yr||(this.kr=setTimeout(()=>{if(this.Ir(),this.wr.length>0){var l=this.Pr();for(var c in l)!function(){var u=l[c],d=(new Date).getTime();u.data&&eh(u.data)&&J(u.data,a=>{a.offset=Math.abs(a.timestamp-d),delete a.timestamp}),a.$r(u)}()}},this.Sr))}Ir(){clearTimeout(this.kr),this.kr=void 0}Pr(){var a={};return J(this.wr,l=>{var c,u=(l?l.batchKey:null)||l.url;R(a[u])&&(a[u]=B({},l,{data:[]})),null==(c=a[u].data)||c.push(l.data)}),this.wr=[],a}};var sj=["retriesPerformedSoFar"];let Uo=class Uo{constructor(a){this.Rr=!1,this.Tr=3e3,this.wr=[],this._instance=a,this.wr=[],this.Cr=!0,!R(u)&&"onLine"in u.navigator&&(this.Cr=u.navigator.onLine,st(u,"online",()=>{this.Cr=!0,this.se()}),st(u,"offline",()=>{this.Cr=!1}))}get length(){return this.wr.length}retriableRequest(a){var{retriesPerformedSoFar:l}=a,c=H(a,sj);O(l)&&l>0&&(c.url=Ds(c.url,{retry_count:l})),this._instance.Pe(B({},c,{callback:a=>{200!==a.statusCode&&(a.statusCode<400||a.statusCode>=500)&&(null!=l?l:0)<10?this.Mr(B({retriesPerformedSoFar:l},c)):null==c.callback||c.callback(a)}}))}Mr(a){var l,c,u,d=a.retriesPerformedSoFar||0;a.retriesPerformedSoFar=d+1;var p=(u=(Math.random()-.5)*((c=Math.min(18e5,l=3e3*Math.pow(2,d)))-l/2),Math.ceil(c+u)),g=Date.now()+p;this.wr.push({retryAt:g,requestOptions:a});var _="Enqueued failed request for retry in "+p;navigator.onLine||(_+=" (Browser is offline)"),ed.warn(_),this.Rr||(this.Rr=!0,this.Fr())}Fr(){this.Or&&clearTimeout(this.Or),this.Or=setTimeout(()=>{this.Cr&&this.wr.length>0&&this.se(),this.Fr()},this.Tr)}se(){var a=Date.now(),l=[],c=this.wr.filter(c=>c.retryAt<a||(l.push(c),!1));if(this.wr=l,c.length>0)for(var{requestOptions:u}of c)this.retriableRequest(u)}unload(){for(var{requestOptions:a}of(this.Or&&(clearTimeout(this.Or),this.Or=void 0),this.wr))try{this._instance.Pe(B({},a,{transport:"sendBeacon"}))}catch(a){ed.error(a)}this.wr=[]}};let qo=class qo{constructor(a){this.Ar=()=>{this.Dr||(this.Dr={});var a,l,c,u,d=this.scrollElement(),p=this.scrollY(),g=d?Math.max(0,d.scrollHeight-d.clientHeight):0,_=p+((null==d?void 0:d.clientHeight)||0),v=(null==d?void 0:d.scrollHeight)||0;this.Dr.lastScrollY=Math.ceil(p),this.Dr.maxScrollY=Math.max(p,null!==(a=this.Dr.maxScrollY)&&void 0!==a?a:0),this.Dr.maxScrollHeight=Math.max(g,null!==(l=this.Dr.maxScrollHeight)&&void 0!==l?l:0),this.Dr.lastContentY=_,this.Dr.maxContentY=Math.max(_,null!==(c=this.Dr.maxContentY)&&void 0!==c?c:0),this.Dr.maxContentHeight=Math.max(v,null!==(u=this.Dr.maxContentHeight)&&void 0!==u?u:0)},this._instance=a}getContext(){return this.Dr}resetContext(){var a=this.Dr;return setTimeout(this.Ar,0),a}startMeasuringScrollPosition(){st(u,"scroll",this.Ar,{capture:!0}),st(u,"scrollend",this.Ar,{capture:!0}),st(u,"resize",this.Ar)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==u?void 0:u.document.documentElement;for(var a of eh(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector]){var l=null==u?void 0:u.document.querySelector(a);if(l)return l}}scrollY(){if(this._instance.config.scroll_root_selector){var a=this.scrollElement();return a&&a.scrollTop||0}return u&&(u.scrollY||u.pageYOffset||u.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var a=this.scrollElement();return a&&a.scrollLeft||0}return u&&(u.scrollX||u.pageXOffset||u.document.documentElement.scrollLeft)||0}};var Bo=a=>Zn(null==a?void 0:a.config.mask_personal_data_properties,null==a?void 0:a.config.custom_personal_data_properties);let Ho=class Ho{constructor(a,l,c,u){this.jr=a=>{var l=this.Lr();if(!l||l.sessionId!==a){var c={sessionId:a,props:this.Nr(this._instance)};this.zr.register({[eY]:c})}},this._instance=a,this.Ur=l,this.zr=c,this.Nr=u||Bo,this.Ur.onSessionId(this.jr)}Lr(){return this.zr.props[eY]}getSetOnceProps(){var a,l=null==(a=this.Lr())?void 0:a.props;return l?"r"in l?to(l):{$referring_domain:l.referringDomain,$pathname:l.initialPathName,utm_source:l.utm_source,utm_campaign:l.utm_campaign,utm_medium:l.utm_medium,utm_content:l.utm_content,utm_term:l.utm_term}:{}}getSessionProps(){var a={};return J(Z(this.getSetOnceProps()),(l,c)=>{"$current_url"===c&&(c="url"),a["$session_entry_"+y(c)]=l}),a}};var sq=ep("[SessionId]");let Go=class Go{constructor(a,l,c){if(this.qr=[],this.Br=(a,l)=>Math.abs(a-l)>this.sessionTimeoutMs,!a.persistence)throw Error("SessionIdManager requires a PostHogPersistence instance");if("always"===a.config.cookieless_mode)throw Error('SessionIdManager cannot be used with cookieless_mode="always"');this.S=a.config,this.zr=a.persistence,this.fi=void 0,this.Mt=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Hr=l||Ni,this.Wr=c||Ni;var u,d=this.S.persistence_name||this.S.token,p=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*ne(p,60,36e3,"session_idle_timeout_seconds",1800),a.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Gr(),this.Jr="ph_"+d+"_window_id",this.Vr="ph_"+d+"_primary_window_exists",this.Kr()){var g=tE.j(this.Jr),_=tE.j(this.Vr);g&&!_?this.fi=g:tE.N(this.Jr),tE.L(this.Vr,!0)}if(null!=(u=this.S.bootstrap)&&u.sessionID)try{var v=(a=>{var l=a.replace(/-/g,"");if(32!==l.length)throw Error("Not a valid UUID");if("7"!==l[12])throw Error("Not a UUIDv7");return parseInt(l.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Yr(this.S.bootstrap.sessionID,(new Date).getTime(),v)}catch(a){sq.error("Invalid sessionID in bootstrap",a)}this.Xr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(a){return R(this.qr)&&(this.qr=[]),this.qr.push(a),this.Mt&&a(this.Mt,this.fi),()=>{this.qr=this.qr.filter(l=>l!==a)}}Kr(){return"memory"!==this.S.persistence&&!this.zr.Ae&&tE.O()}Qr(a){a!==this.fi&&(this.fi=a,this.Kr()&&tE.L(this.Jr,a))}Zr(){return this.fi?this.fi:this.Kr()?tE.j(this.Jr):null}Yr(a,l,c){a===this.Mt&&l===this._sessionActivityTimestamp&&c===this._sessionStartTimestamp||(this._sessionStartTimestamp=c,this._sessionActivityTimestamp=l,this.Mt=a,this.zr.register({[eL]:[l,a,c]}))}ts(){if(this.Mt&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Mt,this._sessionStartTimestamp];var a=this.zr.props[eL];return eh(a)&&2===a.length&&a.push(a[0]),a||[0,null,0]}resetSessionId(){this.Yr(null,null,null)}Xr(){st(u,"beforeunload",()=>{this.Kr()&&tE.N(this.Vr)},{capture:!1})}checkAndGetSessionAndWindowId(a,l){if(void 0===a&&(a=!1),void 0===l&&(l=null),"always"===this.S.cookieless_mode)throw Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var c=l||(new Date).getTime(),[u,d,p]=this.ts(),g=this.Zr(),_=O(p)&&p>0&&Math.abs(c-p)>864e5,v=!1,f=!d,w=!a&&this.Br(c,u);f||w||_?(d=this.Hr(),g=this.Wr(),sq.info("new session ID generated",{sessionId:d,windowId:g,changeReason:{noSessionId:f,activityTimeout:w,sessionPastMaximumLength:_}}),p=c,v=!0):g||(g=this.Wr(),v=!0);var S=0===u||!a||_?c:u,k=0===p?(new Date).getTime():p;return this.Qr(g),this.Yr(d,S,k),a||this.Gr(),v&&this.qr.forEach(a=>a(d,g,v?{noSessionId:f,activityTimeout:w,sessionPastMaximumLength:_}:void 0)),{sessionId:d,windowId:g,sessionStartTimestamp:k,changeReason:v?{noSessionId:f,activityTimeout:w,sessionPastMaximumLength:_}:void 0,lastActivityTimestamp:u}}Gr(){clearTimeout(this.es),this.es=setTimeout(()=>{var[a]=this.ts();this.Br((new Date).getTime(),a)&&this.resetSessionId()},1.1*this.sessionTimeoutMs)}};var sH=["$set_once","$set"],sz=ep("[SiteApps]");let Ko=class Ko{constructor(a){this._instance=a,this.rs=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}ss(a,l){if(l){var c=this.globalsForEvent(l);this.rs.push(c),this.rs.length>1e3&&(this.rs=this.rs.slice(10))}}get siteAppLoaders(){var a;return null==(a=N._POSTHOG_REMOTE_CONFIG)||null==(a=a[this._instance.config.token])?void 0:a.siteApps}init(){if(this.isEnabled){var a=this._instance.Ve(this.ss.bind(this));this.ns=()=>{a(),this.rs=[],this.ns=void 0}}}globalsForEvent(a){if(!a)throw Error("Event payload is required");var l,c,u,d,p,g,_,v={},f=this._instance.get_property("$groups")||[];for(var[w,S]of Object.entries(this._instance.get_property("$stored_group_properties")||{}))v[w]={id:f[w],type:w,properties:S};var{$set_once:k,$set:x}=a;return{event:B({},H(a,sH),{properties:B({},a.properties,x?{$set:B({},null!==(l=null==(c=a.properties)?void 0:c.$set)&&void 0!==l?l:{},x)}:{},k?{$set_once:B({},null!==(u=null==(d=a.properties)?void 0:d.$set_once)&&void 0!==u?u:{},k)}:{}),elements_chain:null!==(p=null==(g=a.properties)?void 0:g.$elements_chain)&&void 0!==p?p:"",distinct_id:null==(_=a.properties)?void 0:_.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:v}}setupSiteApp(a){var l=this.apps[a.id],e=()=>{var c;!l.errored&&this.rs.length&&(sz.info("Processing "+this.rs.length+" events for site app with id "+a.id),this.rs.forEach(a=>null==l.processEvent?void 0:l.processEvent(a)),l.processedBuffer=!0),Object.values(this.apps).every(a=>a.processedBuffer||a.errored)&&(null==(c=this.ns)||c.call(this))},c=!1,s=u=>{l.errored=!u,l.loaded=!0,sz.info("Site app with id "+a.id+" "+(u?"loaded":"errored")),c&&e()};try{var{processEvent:u}=a.init({posthog:this._instance,callback:a=>{s(a)}});u&&(l.processEvent=u),c=!0}catch(l){sz.error("Error while initializing PostHog app with config id "+a.id,l),s(!1)}if(c&&l.loaded)try{e()}catch(c){sz.error("Error while processing buffered events PostHog app with config id "+a.id,c),l.errored=!0}}os(){var a=this.siteAppLoaders||[];for(var l of a)this.apps[l.id]={id:l.id,loaded:!1,errored:!1,processedBuffer:!1};for(var c of a)this.setupSiteApp(c)}ls(a){if(0!==Object.keys(this.apps).length){var l=this.globalsForEvent(a);for(var c of Object.values(this.apps))try{null==c.processEvent||c.processEvent(l)}catch(l){sz.error("Error while processing event "+a.event+" for site app "+c.id,l)}}}onRemoteConfig(a){var l,c,u,d=this;if(null!=(l=this.siteAppLoaders)&&l.length)return this.isEnabled?(this.os(),void this._instance.on("eventCaptured",a=>this.ls(a))):void sz.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(c=this.ns)||c.call(this),null!=(u=a.siteApps)&&u.length){if(this.isEnabled){var n=function(a){var l;N["__$$ph_site_app_"+a]=d._instance,null==(l=N.__PosthogExtensions__)||null==l.loadSiteApp||l.loadSiteApp(d._instance,g,l=>{if(l)return sz.error("Error while initializing PostHog app with config id "+a,l)})};for(var{id:p,url:g}of a.siteApps)n(p)}else sz.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}};var sU=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],Xo=function(a,l){if(!a)return!1;var c=a.toLowerCase();return sU.concat(l||[]).some(a=>{var l=a.toLowerCase();return -1!==c.indexOf(l)})},Qo=function(a,l){if(!a)return!1;var c=a.userAgent;if(c&&Xo(c,l))return!0;try{var u=null==a?void 0:a.userAgentData;if(null!=u&&u.brands&&u.brands.some(a=>Xo(null==a?void 0:a.brand,l)))return!0}catch(a){}return!!a.webdriver},sV=((rr={}).US="us",rr.EU="eu",rr.CUSTOM="custom",rr),sG="i.posthog.com";let ia=class ia{constructor(a){this.us={},this.instance=a}get apiHost(){var a=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===a?"https://us.i.posthog.com":a}get uiHost(){var a,l=null==(a=this.instance.config.ui_host)?void 0:a.replace(/\/$/,"");return l||(l=this.apiHost.replace("."+sG,".posthog.com")),"https://app.posthog.com"===l?"https://us.posthog.com":l}get region(){return this.us[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.us[this.apiHost]=sV.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.us[this.apiHost]=sV.EU:this.us[this.apiHost]=sV.CUSTOM),this.us[this.apiHost]}endpointFor(a,l){if(void 0===l&&(l=""),l&&(l="/"===l[0]?l:"/"+l),"ui"===a)return this.uiHost+l;if(this.region===sV.CUSTOM)return this.apiHost+l;var c=sG+l;switch(a){case"assets":return"https://"+this.region+"-assets."+c;case"api":return"https://"+this.region+"."+c}}};var sJ={icontains:(a,l)=>!!u&&l.href.toLowerCase().indexOf(a.toLowerCase())>-1,not_icontains:(a,l)=>!!u&&-1===l.href.toLowerCase().indexOf(a.toLowerCase()),regex:(a,l)=>!!u&&zs(l.href,a),not_regex:(a,l)=>!!u&&!zs(l.href,a),exact:(a,l)=>l.href===a,is_not:(a,l)=>l.href!==a};let ra=class ra{constructor(a){var l=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(a){void 0===a&&(a=!1),l.getWebExperiments(a=>{ra.hs("retrieved web experiments from the server"),l.ds=new Map,a.forEach(a=>{if(a.feature_flag_key){l.ds&&(ra.hs("setting flag key ",a.feature_flag_key," to web experiment ",a),null==(c=l.ds)||c.set(a.feature_flag_key,a));var c,u=l._instance.getFeatureFlag(a.feature_flag_key);T(u)&&a.variants[u]&&l.vs(a.name,u,a.variants[u].transforms)}else if(a.variants)for(var d in a.variants){var p=a.variants[d];ra.cs(p)&&l.vs(a.name,d,p.transforms)}})},a)},this._instance=a,this._instance.onFeatureFlags(a=>{this.onFeatureFlags(a)})}onFeatureFlags(a){if(this._is_bot())ra.hs("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(F(this.ds))return this.ds=new Map,this.loadIfEnabled(),void this.previewWebExperiment();ra.hs("applying feature flags",a),a.forEach(a=>{var l;if(this.ds&&null!=(l=this.ds)&&l.has(a)){var c,u=this._instance.getFeatureFlag(a),d=null==(c=this.ds)?void 0:c.get(a);u&&null!=d&&d.variants[u]&&this.vs(d.name,u,d.variants[u].transforms)}})}}previewWebExperiment(){var a=ra.getWindowLocation();if(null!=a&&a.search){var l=xi(null==a?void 0:a.search,"__experiment_id"),c=xi(null==a?void 0:a.search,"__experiment_variant");l&&c&&(ra.hs("previewing web experiments "+l+" && "+c),this.getWebExperiments(a=>{this.fs(parseInt(l),c,a)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(a,l,c){if(this._instance.config.disable_web_experiments&&!c)return a([]);var u=this._instance.get_property("$web_experiments");if(u&&!l)return a(u);this._instance.Pe({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:l=>200===l.statusCode&&l.json?a(l.json.experiments||[]):a([])})}fs(a,l,c){var u=c.filter(l=>l.id===a);u&&u.length>0&&(ra.hs("Previewing web experiment ["+u[0].name+"] with variant ["+l+"]"),this.vs(u[0].name,l,u[0].variants[l].transforms))}static cs(a){return!F(a.conditions)&&ra.ps(a)&&ra._s(a)}static ps(a){if(F(a.conditions)||F(null==(l=a.conditions)?void 0:l.url))return!0;var l,c,u,d,p=ra.getWindowLocation();return!!p&&(null==(c=a.conditions)||!c.url||sJ[null!==(u=null==(d=a.conditions)?void 0:d.urlMatchType)&&void 0!==u?u:"icontains"](a.conditions.url,p))}static getWindowLocation(){return null==u?void 0:u.location}static _s(a){if(F(a.conditions)||F(null==(c=a.conditions)?void 0:c.utm))return!0;var l=Vn();if(l.utm_source){var c,u,d,p,g,_,v,f,w,S=null==(u=a.conditions)||null==(u=u.utm)||!u.utm_campaign||(null==(d=a.conditions)||null==(d=d.utm)?void 0:d.utm_campaign)==l.utm_campaign,k=null==(p=a.conditions)||null==(p=p.utm)||!p.utm_source||(null==(g=a.conditions)||null==(g=g.utm)?void 0:g.utm_source)==l.utm_source,x=null==(_=a.conditions)||null==(_=_.utm)||!_.utm_medium||(null==(v=a.conditions)||null==(v=v.utm)?void 0:v.utm_medium)==l.utm_medium,$=null==(f=a.conditions)||null==(f=f.utm)||!f.utm_term||(null==(w=a.conditions)||null==(w=w.utm)?void 0:w.utm_term)==l.utm_term;return S&&x&&$&&k}return!1}static hs(a){for(var l=arguments.length,c=Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];ed.info("[WebExperiments] "+a,c)}vs(a,l,c){this._is_bot()?ra.hs("Refusing to render web experiment since the viewer is a likely bot"):"control"!==l?c.forEach(c=>{if(c.selector){ra.hs("applying transform of variant "+l+" for experiment "+a+" ",c);var u,d=null==(u=document)?void 0:u.querySelectorAll(c.selector);null==d||d.forEach(a=>{c.html&&(a.innerHTML=c.html),c.css&&a.setAttribute("style",c.css)})}}):ra.hs("Control variants leave the page unmodified.")}_is_bot(){return v&&this._instance?Qo(v,this._instance.config.custom_blocked_useragents):void 0}};var sW=ep("[PostHog ExternalIntegrations]"),sY={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let oa=class oa{constructor(a){this._instance=a}J(a,l){var c;null==(c=N.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,a,a=>{if(a)return sW.error("failed to load script",a);l()})}startIfEnabledOrStop(){var a,l=this,i=function(a){var c,d,p;!u||null!=(c=N.__PosthogExtensions__)&&null!=(c=c.integrations)&&c[a]||l.J(sY[a],()=>{var c;null==(c=N.__PosthogExtensions__)||null==(c=c.integrations)||null==(c=c[a])||c.start(l._instance)}),!u&&null!=(d=N.__PosthogExtensions__)&&null!=(d=d.integrations)&&d[a]&&(null==(p=N.__PosthogExtensions__)||null==(p=p.integrations)||null==(p=p[a])||p.stop())};for(var[c,u]of Object.entries(null!==(a=this._instance.config.integrations)&&void 0!==a?a:{}))i(c)}};var sK={},la=()=>{},sX="posthog",sZ=!i$&&-1===(null==$?void 0:$.indexOf("MSIE"))&&-1===(null==$?void 0:$.indexOf("Mozilla")),da=a=>{var l;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:et(null==f?void 0:f.location),persistence:"localStorage+cookie",persistence_name:"",loaded:la,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:"2025-05-24"!==a||"history_change",capture_pageleave:"if_capture_pageview",defaults:null!=a?a:"unset",debug:w&&T(null==w?void 0:w.search)&&-1!==w.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==u||null==(l=u.location)?void 0:l.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:a=>{var l="Bad HTTP status: "+a.statusCode+" "+a.text;ed.error(l)},get_device_id:a=>a,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:3e3},error_tracking:{},_onCapture:la}},va=a=>{var l={};R(a.process_person)||(l.person_profiles=a.process_person),R(a.xhr_headers)||(l.request_headers=a.xhr_headers),R(a.cookie_name)||(l.persistence_name=a.cookie_name),R(a.disable_cookie)||(l.disable_persistence=a.disable_cookie),R(a.store_google)||(l.save_campaign_params=a.store_google),R(a.verbose)||(l.debug=a.verbose);var c=V({},l,a);return eh(a.property_blacklist)&&(R(a.property_denylist)?c.property_denylist=a.property_blacklist:eh(a.property_denylist)?c.property_denylist=[...a.property_blacklist,...a.property_denylist]:ed.error("Invalid value for property_denylist config: "+a.property_denylist)),c};let ca=class ca{constructor(){this.__forceAllowLocalhost=!1}get gs(){return this.__forceAllowLocalhost}set gs(a){ed.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=a}};let fa=class fa{get decideEndpointWasHit(){var a,l;return null!==(a=null==(l=this.featureFlags)?void 0:l.hasLoadedFlags)&&void 0!==a&&a}get flagsEndpointWasHit(){var a,l;return null!==(a=null==(l=this.featureFlags)?void 0:l.hasLoadedFlags)&&void 0!==a&&a}constructor(){this.webPerformance=new ca,this.bs=!1,this.version=z.LIB_VERSION,this.ys=new go,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=da(),this.SentryIntegration=ms,this.sentryIntegration=a=>{var l;return l=gs(this,a),{name:iw,processEvent:a=>l(a)}},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.ws=!1,this.Ss=null,this.$s=null,this.xs=null,this.featureFlags=new fo(this),this.toolbar=new $s(this),this.scrollManager=new qo(this),this.pageViewManager=new Ms(this),this.surveys=new Fo(this),this.experiments=new ra(this),this.exceptions=new Ws(this),this.rateLimiter=new Ao(this),this.requestRouter=new ia(this),this.consent=new te(this),this.externalIntegrations=new oa(this),this.people={set:(a,l,c)=>{var u=T(a)?{[a]:l}:a;this.setPersonProperties(u),null==c||c({})},set_once:(a,l,c)=>{var u=T(a)?{[a]:l}:a;this.setPersonProperties(void 0,u),null==c||c({})}},this.on("eventCaptured",a=>ed.info('send "'+(null==a?void 0:a.event)+'"',a))}init(a,l,c){if(c&&c!==sX){var u,d=null!==(u=sK[c])&&void 0!==u?u:new fa;return d._init(a,l,c),sK[c]=d,sK[sX][c]=d,d}return this._init(a,l,c)}_init(a,l,c){if(void 0===l&&(l={}),R(a)||C(a))return ed.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return ed.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.ks=l,this.Es=[],l.person_profiles&&(this.$s=l.person_profiles),this.set_config(V({},da(l.defaults),va(l),{name:c,token:a})),this.config.on_xhr_error&&ed.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=l.disable_compression?void 0:er.GZipJS;var d=this.Is();this.persistence=new _o(this.config,d),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new _o(B({},this.config,{persistence:"sessionStorage"}),d);var p=B({},this.persistence.props),g=B({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this.Ps=new No(a=>this.Rs(a),this.config.request_queue_config),this.Ts=new Uo(this),this.__request_queue=[];var _="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(_||(this.sessionManager=new Go(this),this.sessionPropsManager=new Ho(this,this.sessionManager,this.persistence)),new ks(this).startIfEnabledOrStop(),this.siteApps=new Ko(this),null==(v=this.siteApps)||v.init(),_||(this.sessionRecording=new cs(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new Mi(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new Cs(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new Ps(this),this.exceptionObserver=new le(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new se(this,re),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new ze(this),this.historyAutocapture.startIfEnabled(),z.DEBUG=z.DEBUG||this.config.debug,z.DEBUG&&ed.info("Starting in debug mode",{this:this,config:l,thisC:B({},this.config),p:p,s:g}),void 0!==(null==(f=l.bootstrap)?void 0:f.distinctID)){var v,f,w,S,k=this.config.get_device_id(Ni()),x=null!=(w=l.bootstrap)&&w.isIdentifiedID?k:l.bootstrap.distinctID;this.persistence.set_property(eW,null!=(S=l.bootstrap)&&S.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:l.bootstrap.distinctID,$device_id:x})}if(this.Cs()){var $,N,U=Object.keys((null==($=l.bootstrap)?void 0:$.featureFlags)||{}).filter(a=>{var c;return!(null==(c=l.bootstrap)||null==(c=c.featureFlags)||!c[a])}).reduce((a,c)=>{var u;return a[c]=(null==(u=l.bootstrap)||null==(u=u.featureFlags)?void 0:u[c])||!1,a},{}),W=Object.keys((null==(N=l.bootstrap)?void 0:N.featureFlagPayloads)||{}).filter(a=>U[a]).reduce((a,c)=>{var u,d;return null!=(u=l.bootstrap)&&null!=(u=u.featureFlagPayloads)&&u[c]&&(a[c]=null==(d=l.bootstrap)||null==(d=d.featureFlagPayloads)?void 0:d[c]),a},{});this.featureFlags.receivedFeatureFlags({featureFlags:U,featureFlagPayloads:W})}if(_)this.register_once({distinct_id:e2,$device_id:null},"");else if(!this.get_distinct_id()){var en=this.config.get_device_id(Ni());this.register_once({distinct_id:en,$device_id:en},""),this.persistence.set_property(eW,"anonymous")}return st(u,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),l.segment?ps(this,()=>this.Ms()):this.Ms(),E(this.config._onCapture)&&this.config._onCapture!==la&&(ed.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",a=>this.config._onCapture(a.event,a))),this.config.ip&&ed.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Re(a){var l,c,u,d,p,g,_,v;if(!f||!f.body)return ed.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Re(a)},500);this.compression=void 0,a.supportedCompression&&!this.config.disable_compression&&(this.compression=m(a.supportedCompression,er.GZipJS)?er.GZipJS:m(a.supportedCompression,er.Base64)?er.Base64:void 0),null!=(l=a.analytics)&&l.endpoint&&(this.analyticsDefaultEndpoint=a.analytics.endpoint),this.set_config({person_profiles:this.$s?this.$s:"identified_only"}),null==(c=this.siteApps)||c.onRemoteConfig(a),null==(u=this.sessionRecording)||u.onRemoteConfig(a),null==(d=this.autocapture)||d.onRemoteConfig(a),null==(p=this.heatmaps)||p.onRemoteConfig(a),this.surveys.onRemoteConfig(a),null==(g=this.webVitalsAutocapture)||g.onRemoteConfig(a),null==(_=this.exceptionObserver)||_.onRemoteConfig(a),this.exceptions.onRemoteConfig(a),null==(v=this.deadClicksAutocapture)||v.onRemoteConfig(a)}Ms(){try{this.config.loaded(this)}catch(a){ed.critical("`loaded` function failed",a)}this.Fs(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Os()},1),new jo(this).load(),this.featureFlags.flags()}Fs(){var a;this.is_capturing()&&this.config.request_batching&&(null==(a=this.Ps)||a.enable())}_dom_loaded(){this.is_capturing()&&G(this.__request_queue,a=>this.Rs(a)),this.__request_queue=[],this.Fs()}_handle_unload(){var a,l;this.config.request_batching?(this.As()&&this.capture("$pageleave"),null==(a=this.Ps)||a.unload(),null==(l=this.Ts)||l.unload()):this.As()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Pe(a){this.__loaded&&(sZ?this.__request_queue.push(a):this.rateLimiter.isServerRateLimited(a.batchKey)||(a.transport=a.transport||this.config.api_transport,a.url=Ds(a.url,{ip:this.config.ip?1:0}),a.headers=B({},this.config.request_headers),a.compression="best-available"===a.compression?this.compression:a.compression,a.fetchOptions=a.fetchOptions||this.config.fetch_options,(a=>{var l,c,u,d=B({},a);d.timeout=d.timeout||6e4,d.url=Ds(d.url,{_:(new Date).getTime().toString(),ver:z.LIB_VERSION,compression:d.compression});var p=null!==(l=d.transport)&&void 0!==l?l:"fetch",g=null!==(c=null==(u=rt(iM,a=>a.transport===p))?void 0:u.method)&&void 0!==c?c:iM[0].method;if(!g)throw Error("No available transport method");g(d)})(B({},a,{callback:l=>{var c,u;this.rateLimiter.checkForLimiting(l),l.statusCode>=400&&(null==(c=(u=this.config).on_request_error)||c.call(u,l)),null==a.callback||a.callback(l)}}))))}Rs(a){this.Ts?this.Ts.retriableRequest(a):this.Pe(a)}_execute_array(a){var l,c=[],u=[],d=[];G(a,a=>{a&&(eh(l=a[0])?d.push(a):E(a)?a.call(this):eh(a)&&"alias"===l?c.push(a):eh(a)&&-1!==l.indexOf("capture")&&E(this[l])?d.push(a):u.push(a))});var n=function(a,l){G(a,function(a){if(eh(a[0])){var c=l;J(a,function(a){c=c[a[0]].apply(c,a.slice(1))})}else this[a[0]].apply(this,a.slice(1))},l)};n(c,this),n(u,this),n(d,this)}Cs(){var a,l;return(null==(a=this.config.bootstrap)?void 0:a.featureFlags)&&Object.keys(null==(l=this.config.bootstrap)?void 0:l.featureFlags).length>0||!1}push(a){this._execute_array([a])}capture(a,l,c){var u;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Ps){if(this.is_capturing()){if(!R(a)&&T(a)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var d=null!=c&&c.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==d||!d.isRateLimited){null!=l&&l.$current_url&&!T(null==l?void 0:l.$current_url)&&(ed.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==l||delete l.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var p=new Date,g=(null==c?void 0:c.timestamp)||p,_=Ni(),v={uuid:_,event:a,properties:this.calculateEventProperties(a,l||{},g,_)};d&&(v.properties.$lib_rate_limit_remaining_tokens=d.remainingTokens),(null==c?void 0:c.$set)&&(v.$set=null==c?void 0:c.$set);var f,w=this.Ds(null==c?void 0:c.$set_once);if(w&&(v.$set_once=w),(v=tt(v,null!=c&&c._noTruncate?null:this.config.properties_string_max_length)).timestamp=g,R(null==c?void 0:c.timestamp)||(v.properties.$event_time_override_provided=!0,v.properties.$event_time_override_system_time=p),a===sO.DISMISSED||a===sO.SENT){var S=null==l?void 0:l[sC.SURVEY_ID],k=null==l?void 0:l[sC.SURVEY_ITERATION];f={id:S,current_iteration:k},localStorage.getItem(To(f))||localStorage.setItem(To(f),"true"),v.$set=B({},v.$set,{[Ro({id:S,current_iteration:k},a===sO.SENT?"responded":"dismissed")]:!0})}var x=B({},v.properties.$set,v.$set);if(P(x)||this.setPersonPropertiesForFlags(x),!F(this.config.before_send)){var $=this.js(v);if(!$)return;v=$}this.ys.emit("eventCaptured",v);var N={method:"POST",url:null!==(u=null==c?void 0:c._url)&&void 0!==u?u:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:v,compression:"best-available",batchKey:null==c?void 0:c._batchKey};return!this.config.request_batching||c&&(null==c||!c._batchKey)||null!=c&&c.send_instantly?this.Rs(N):this.Ps.enqueue(N),v}ed.critical("This capture call is ignored due to client rate limiting.")}}else ed.error("No event name provided to posthog.capture")}}else ed.uninitializedWarning("posthog.capture")}Ve(a){return this.on("eventCaptured",l=>a(l.event,l))}calculateEventProperties(a,l,c,u,d){if(c=c||new Date,!this.persistence||!this.sessionPersistence)return l;var p,g=d?void 0:this.persistence.remove_event_timer(a),_=B({},l);if(_.token=this.config.token,_.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(_.$cookieless_mode=!0),"$snapshot"===a){var v=B({},this.persistence.properties(),this.sessionPersistence.properties());return _.distinct_id=v.distinct_id,(!T(_.distinct_id)&&!O(_.distinct_id)||C(_.distinct_id))&&ed.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),_}var w,S=ro(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:k,windowId:x}=this.sessionManager.checkAndGetSessionAndWindowId(d,c.getTime());_.$session_id=k,_.$window_id=x}this.sessionPropsManager&&V(_,this.sessionPropsManager.getSessionProps());try{this.sessionRecording&&V(_,this.sessionRecording.sdkDebugProperties),_.$sdk_debug_retry_queue_size=null==(p=this.Ts)?void 0:p.length}catch(a){_.$sdk_debug_error_capturing_properties=String(a)}if(this.requestRouter.region===sV.CUSTOM&&(_.$lib_custom_api_host=this.config.api_host),w="$pageview"!==a||d?"$pageleave"!==a||d?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(c):this.pageViewManager.doPageView(c,u),_=V(_,w),"$pageview"===a&&f&&(_.title=f.title),!R(g)){var N=c.getTime()-g;_.$duration=parseFloat((N/1e3).toFixed(3))}$&&this.config.opt_out_useragent_filter&&(_.$browser_type=this._is_bot()?"bot":"browser"),(_=V({},S,this.persistence.properties(),this.sessionPersistence.properties(),_)).$is_identified=this._isIdentified(),eh(this.config.property_denylist)?J(this.config.property_denylist,function(a){delete _[a]}):ed.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var z=this.config.sanitize_properties;z&&(ed.error("sanitize_properties is deprecated. Use before_send instead"),_=z(_,a));var U=this.Ls();return _.$process_person_profile=U,U&&!d&&this.Ns("_calculate_event_properties"),_}Ds(a){if(!this.persistence||!this.Ls()||this.bs)return a;var l,c=V({},this.persistence.get_initial_props(),(null==(l=this.sessionPropsManager)?void 0:l.getSetOnceProps())||{},a||{}),u=this.config.sanitize_properties;return u&&(ed.error("sanitize_properties is deprecated. Use before_send instead"),c=u(c,"$set_once")),this.bs=!0,P(c)?void 0:c}register(a,l){var c;null==(c=this.persistence)||c.register(a,l)}register_once(a,l,c){var u;null==(u=this.persistence)||u.register_once(a,l,c)}register_for_session(a){var l;null==(l=this.sessionPersistence)||l.register(a)}unregister(a){var l;null==(l=this.persistence)||l.unregister(a)}unregister_for_session(a){var l;null==(l=this.sessionPersistence)||l.unregister(a)}zs(a,l){this.register({[a]:l})}getFeatureFlag(a,l){return this.featureFlags.getFeatureFlag(a,l)}getFeatureFlagPayload(a){var l=this.featureFlags.getFeatureFlagPayload(a);try{return JSON.parse(l)}catch(a){return l}}isFeatureEnabled(a,l){return this.featureFlags.isFeatureEnabled(a,l)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(a,l,c){this.featureFlags.updateEarlyAccessFeatureEnrollment(a,l,c)}getEarlyAccessFeatures(a,l,c){return void 0===l&&(l=!1),this.featureFlags.getEarlyAccessFeatures(a,l,c)}on(a,l){return this.ys.on(a,l)}onFeatureFlags(a){return this.featureFlags.onFeatureFlags(a)}onSurveysLoaded(a){return this.surveys.onSurveysLoaded(a)}onSessionId(a){var l,c;return null!==(l=null==(c=this.sessionManager)?void 0:c.onSessionId(a))&&void 0!==l?l:()=>{}}getSurveys(a,l){void 0===l&&(l=!1),this.surveys.getSurveys(a,l)}getActiveMatchingSurveys(a,l){void 0===l&&(l=!1),this.surveys.getActiveMatchingSurveys(a,l)}renderSurvey(a,l){this.surveys.renderSurvey(a,l)}canRenderSurvey(a){return this.surveys.canRenderSurvey(a)}canRenderSurveyAsync(a,l){return void 0===l&&(l=!1),this.surveys.canRenderSurveyAsync(a,l)}identify(a,l,c){if(!this.__loaded||!this.persistence)return ed.uninitializedWarning("posthog.identify");if(O(a)&&(a=a.toString(),ed.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),a){if(["distinct_id","distinctid"].includes(a.toLowerCase()))ed.critical('The string "'+a+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(a!==e2){if(this.Ns("posthog.identify")){var u=this.get_distinct_id();this.register({$user_id:a}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:u},""),a!==u&&a!==this.get_property(em)&&(this.unregister(em),this.register({distinct_id:a}));var d="anonymous"===(this.persistence.get_property(eW)||"anonymous");a!==u&&d?(this.persistence.set_property(eW,"identified"),this.setPersonPropertiesForFlags(B({},c||{},l||{}),!1),this.capture("$identify",{distinct_id:a,$anon_distinct_id:u},{$set:l||{},$set_once:c||{}}),this.xs=Us(a,l,c),this.featureFlags.setAnonymousDistinctId(u)):(l||c)&&this.setPersonProperties(l,c),a!==u&&(this.reloadFeatureFlags(),this.unregister(eJ))}}else ed.critical('The string "'+e2+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.')}else ed.error("Unique user id has not been set in posthog.identify")}setPersonProperties(a,l){if((a||l)&&this.Ns("posthog.setPersonProperties")){var c=Us(this.get_distinct_id(),a,l);this.xs!==c?(this.setPersonPropertiesForFlags(B({},l||{},a||{})),this.capture("$set",{$set:a||{},$set_once:l||{}}),this.xs=c):ed.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(a,l,c){if(a&&l){if(this.Ns("posthog.group")){var u=this.getGroups();u[a]!==l&&this.resetGroupPropertiesForFlags(a),this.register({$groups:B({},u,{[a]:l})}),c&&(this.capture("$groupidentify",{$group_type:a,$group_key:l,$group_set:c}),this.setGroupPropertiesForFlags({[a]:c})),u[a]===l||c||this.reloadFeatureFlags()}}else ed.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(a,l){void 0===l&&(l=!0),this.featureFlags.setPersonPropertiesForFlags(a,l)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(a,l){void 0===l&&(l=!0),this.Ns("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(a,l)}resetGroupPropertiesForFlags(a){this.featureFlags.resetGroupPropertiesForFlags(a)}reset(a){if(ed.info("reset"),!this.__loaded)return ed.uninitializedWarning("posthog.reset");var l,c,u,d,p=this.get_property("$device_id");if(this.consent.reset(),null==(l=this.persistence)||l.clear(),null==(c=this.sessionPersistence)||c.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(u=this.persistence)||u.set_property(eW,"anonymous"),null==(d=this.sessionManager)||d.resetSessionId(),this.xs=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:e2,$device_id:null},"");else{var g=this.config.get_device_id(Ni());this.register_once({distinct_id:g,$device_id:a?g:p},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var a,l;return null!==(a=null==(l=this.sessionManager)?void 0:l.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==a?a:""}get_session_replay_url(a){if(!this.sessionManager)return"";var{sessionId:l,sessionStartTimestamp:c}=this.sessionManager.checkAndGetSessionAndWindowId(!0),u=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+l);if(null!=a&&a.withTimestamp&&c){var d,p=null!==(d=a.timestampLookBack)&&void 0!==d?d:10;if(!c)return u;u+="?t="+Math.max(Math.floor(((new Date).getTime()-c)/1e3)-p,0)}return u}alias(a,l){return a===this.get_property(ef)?(ed.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ns("posthog.alias")?(R(l)&&(l=this.get_distinct_id()),a!==l?(this.zs(em,a),this.capture("$create_alias",{alias:a,distinct_id:l})):(ed.warn("alias matches current distinct_id - skipping api call."),this.identify(a),-1)):void 0}set_config(a){var l=B({},this.config);if(I(a)){V(this.config,va(a));var c,u,d,p,g,_=this.Is();null==(c=this.persistence)||c.update_config(this.config,l,_),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new _o(B({},this.config,{persistence:"sessionStorage"}),_),tv.O()&&"true"===tv.D("ph_debug")&&(this.config.debug=!0),this.config.debug&&(z.DEBUG=!0,ed.info("set_config",{config:a,oldConfig:l,newConfig:B({},this.config)})),null==(u=this.sessionRecording)||u.startIfEnabledOrStop(),null==(d=this.autocapture)||d.startIfEnabled(),null==(p=this.heatmaps)||p.startIfEnabled(),this.surveys.loadIfEnabled(),this.Us(),null==(g=this.externalIntegrations)||g.startIfEnabledOrStop()}}startSessionRecording(a){var l,c,u,d,p,g=!0===a,_={sampling:g||!(null==a||!a.sampling),linked_flag:g||!(null==a||!a.linked_flag),url_trigger:g||!(null==a||!a.url_trigger),event_trigger:g||!(null==a||!a.event_trigger)};Object.values(_).some(Boolean)&&(null==(l=this.sessionManager)||l.checkAndGetSessionAndWindowId(),_.sampling&&(null==(c=this.sessionRecording)||c.overrideSampling()),_.linked_flag&&(null==(u=this.sessionRecording)||u.overrideLinkedFlag()),_.url_trigger&&(null==(d=this.sessionRecording)||d.overrideTrigger("url")),_.event_trigger&&(null==(p=this.sessionRecording)||p.overrideTrigger("event"))),this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var a;return!(null==(a=this.sessionRecording)||!a.started)}captureException(a,l){var c=Error("PostHog syntheticException");return this.exceptions.sendExceptionEvent(B({},Le(a instanceof Error?{error:a,event:a.message}:{event:a},{syntheticException:c}),l))}loadToolbar(a){return this.toolbar.loadToolbar(a)}get_property(a){var l;return null==(l=this.persistence)?void 0:l.props[a]}getSessionProperty(a){var l;return null==(l=this.sessionPersistence)?void 0:l.props[a]}toString(){var a,l=null!==(a=this.config.name)&&void 0!==a?a:sX;return l!==sX&&(l=sX+"."+l),l}_isIdentified(){var a,l;return"identified"===(null==(a=this.persistence)?void 0:a.get_property(eW))||"identified"===(null==(l=this.sessionPersistence)?void 0:l.get_property(eW))}Ls(){var a,l;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&P(this.getGroups())&&(null==(a=this.persistence)||null==(a=a.props)||!a[em])&&(null==(l=this.persistence)||null==(l=l.props)||!l[e0]))}As(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.Ls()||this.Ns("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ns(a){return"never"===this.config.person_profiles?(ed.error(a+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.zs(e0,!0),!0)}Is(){if("always"===this.config.cookieless_mode)return!0;var a=this.consent.isOptedOut(),l=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||a&&!!l}Us(){var a,l,c,u,d=this.Is();return(null==(a=this.persistence)?void 0:a.Ae)!==d&&(null==(c=this.persistence)||c.set_disabled(d)),(null==(l=this.sessionPersistence)?void 0:l.Ae)!==d&&(null==(u=this.sessionPersistence)||u.set_disabled(d)),d}opt_in_capturing(a){if("always"!==this.config.cookieless_mode){var l;"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),this.sessionManager=new Go(this),this.persistence&&(this.sessionPropsManager=new Ho(this,this.sessionManager,this.persistence)),this.sessionRecording=new cs(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.Us(),(R(null==a?void 0:a.captureEventName)||null!=a&&a.captureEventName)&&this.capture(null!==(l=null==a?void 0:a.captureEventName)&&void 0!==l?l:"$opt_in",null==a?void 0:a.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Os()}else ed.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var a;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.Us(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:e2,$device_id:null}),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(a=this.sessionRecording)||a.stopRecording(),this.sessionRecording=void 0,this.Os())):ed.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}is_capturing(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.Us()}_is_bot(){return v?Qo(v,this.config.custom_blocked_useragents):void 0}Os(){f&&("visible"===f.visibilityState?this.ws||(this.ws=!0,this.capture("$pageview",{title:f.title},{send_instantly:!0}),this.Ss&&(f.removeEventListener("visibilitychange",this.Ss),this.Ss=null)):this.Ss||(this.Ss=this.Os.bind(this),st(f,"visibilitychange",this.Ss)))}debug(a){!1===a?(null==u||u.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==u||u.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var a,l,c,u,d=this.ks||{};return"advanced_disable_flags"in d?!!d.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(ed.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(l="advanced_disable_decide",c=(a="advanced_disable_flags")in d&&!R(d[a]),u=l in d&&!R(d[l]),c?d[a]:!!u&&(ed&&ed.warn("Config field '"+l+"' is deprecated. Please use '"+a+"' instead. The old field will be removed in a future major version."),d[l]))}js(a){if(F(this.config.before_send))return a;var l=eh(this.config.before_send)?this.config.before_send:[this.config.before_send],c=a;for(var u of l){if(F(c=u(c))){var d="Event '"+a.event+"' was rejected in beforeSend function";return j(a.event)?ed.warn(d+". This can cause unexpected behavior."):ed.info(d),null}c.properties&&!P(c.properties)||ed.warn("Event '"+a.event+"' has no properties after beforeSend function, this is likely an error.")}return c}getPageViewId(){var a;return null==(a=this.pageViewManager.ce)?void 0:a.pageViewId}captureTraceFeedback(a,l){this.capture("$ai_feedback",{$ai_trace_id:String(a),$ai_feedback_text:l})}captureTraceMetric(a,l,c){this.capture("$ai_metric",{$ai_trace_id:String(a),$ai_metric_name:l,$ai_metric_value:String(c)})}};!function(a,l){for(var c=0;c<l.length;c++)a.prototype[l[c]]=Q(a.prototype[l[c]])}(fa,["identify"]);var sQ,s0,s1,s2,s3,s5,s6,s4,s8,s7,s9,ri,rr,rn,rl=(rn=sK[sX]=new fa,function(){function i(){i.done||(i.done=!0,sZ=!1,J(sK,function(a){a._dom_loaded()}))}null!=f&&f.addEventListener?"complete"===f.readyState?i():st(f,"DOMContentLoaded",i,{capture:!1}):u&&ed.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),rn)}}]);