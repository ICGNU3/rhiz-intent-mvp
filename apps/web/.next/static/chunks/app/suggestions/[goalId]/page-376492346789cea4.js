(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{10013:function(e,t,s){Promise.resolve().then(s.bind(s,14103))},14103:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return SuggestionsPage}});var a=s(57437),r=s(2265),n=s(24033),i=s(49598),l=s(70708),o=s(23611),c=s(67702),d=s(56989),m=s(27733),u=s(42210),p=s(85744),x=s(73763),f=s(9381),h=s(51030),g=s(85606),j=s(20966),y="Collapsible",[N,v]=(0,d.b)(y),[b,w]=N(y),S=r.forwardRef((e,t)=>{let{__scopeCollapsible:s,open:n,defaultOpen:i,disabled:l,onOpenChange:o,...c}=e,[d,m]=(0,x.T)({prop:n,defaultProp:i??!1,onChange:o,caller:y});return(0,a.jsx)(b,{scope:s,disabled:l,contentId:(0,j.M)(),open:d,onOpenToggle:r.useCallback(()=>m(e=>!e),[m]),children:(0,a.jsx)(f.WV.div,{"data-state":getState(d),"data-disabled":l?"":void 0,...c,ref:t})})});S.displayName=y;var A="CollapsibleTrigger",I=r.forwardRef((e,t)=>{let{__scopeCollapsible:s,...r}=e,n=w(A,s);return(0,a.jsx)(f.WV.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":getState(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...r,ref:t,onClick:(0,p.Mj)(e.onClick,n.onOpenToggle)})});I.displayName=A;var C="CollapsibleContent",T=r.forwardRef((e,t)=>{let{forceMount:s,...r}=e,n=w(C,e.__scopeCollapsible);return(0,a.jsx)(g.z,{present:s||n.open,children:({present:e})=>(0,a.jsx)(R,{...r,ref:t,present:e})})});T.displayName=C;var R=r.forwardRef((e,t)=>{let{__scopeCollapsible:s,present:n,children:i,...l}=e,o=w(C,s),[c,d]=r.useState(n),m=r.useRef(null),p=(0,u.e)(t,m),x=r.useRef(0),g=x.current,j=r.useRef(0),y=j.current,N=o.open||c,v=r.useRef(N),b=r.useRef(void 0);return r.useEffect(()=>{let e=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.b)(()=>{let e=m.current;if(e){b.current=b.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();x.current=t.height,j.current=t.width,v.current||(e.style.transitionDuration=b.current.transitionDuration,e.style.animationName=b.current.animationName),d(n)}},[o.open,n]),(0,a.jsx)(f.WV.div,{"data-state":getState(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!N,...l,ref:p,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:N&&i})});function getState(e){return e?"open":"closed"}var _=s(65400),k="Accordion",O=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[D,E,P]=(0,m.B)(k),[M,F]=(0,d.b)(k,[P,v]),B=v(),V=r.forwardRef((e,t)=>{let{type:s,...r}=e;return(0,a.jsx)(D.Provider,{scope:e.__scopeAccordion,children:"multiple"===s?(0,a.jsx)(Z,{...r,ref:t}):(0,a.jsx)(U,{...r,ref:t})})});V.displayName=k;var[z,W]=M(k),[q,Q]=M(k,{collapsible:!1}),U=r.forwardRef((e,t)=>{let{value:s,defaultValue:n,onValueChange:i=()=>{},collapsible:l=!1,...o}=e,[c,d]=(0,x.T)({prop:s,defaultProp:n??"",onChange:i,caller:k});return(0,a.jsx)(z,{scope:e.__scopeAccordion,value:r.useMemo(()=>c?[c]:[],[c]),onItemOpen:d,onItemClose:r.useCallback(()=>l&&d(""),[l,d]),children:(0,a.jsx)(q,{scope:e.__scopeAccordion,collapsible:l,children:(0,a.jsx)(Y,{...o,ref:t})})})}),Z=r.forwardRef((e,t)=>{let{value:s,defaultValue:n,onValueChange:i=()=>{},...l}=e,[o,c]=(0,x.T)({prop:s,defaultProp:n??[],onChange:i,caller:k}),d=r.useCallback(e=>c((t=[])=>[...t,e]),[c]),m=r.useCallback(e=>c((t=[])=>t.filter(t=>t!==e)),[c]);return(0,a.jsx)(z,{scope:e.__scopeAccordion,value:o,onItemOpen:d,onItemClose:m,children:(0,a.jsx)(q,{scope:e.__scopeAccordion,collapsible:!0,children:(0,a.jsx)(Y,{...l,ref:t})})})}),[H,L]=M(k),Y=r.forwardRef((e,t)=>{let{__scopeAccordion:s,disabled:n,dir:i,orientation:l="vertical",...o}=e,c=r.useRef(null),d=(0,u.e)(c,t),m=E(s),x=(0,_.gm)(i),h="ltr"===x,g=(0,p.Mj)(e.onKeyDown,e=>{if(!O.includes(e.key))return;let t=e.target,s=m().filter(e=>!e.ref.current?.disabled),a=s.findIndex(e=>e.ref.current===t),r=s.length;if(-1===a)return;e.preventDefault();let n=a,i=r-1,moveNext=()=>{(n=a+1)>i&&(n=0)},movePrev=()=>{(n=a-1)<0&&(n=i)};switch(e.key){case"Home":n=0;break;case"End":n=i;break;case"ArrowRight":"horizontal"===l&&(h?moveNext():movePrev());break;case"ArrowDown":"vertical"===l&&moveNext();break;case"ArrowLeft":"horizontal"===l&&(h?movePrev():moveNext());break;case"ArrowUp":"vertical"===l&&movePrev()}let o=n%r;s[o].ref.current?.focus()});return(0,a.jsx)(H,{scope:s,disabled:n,direction:i,orientation:l,children:(0,a.jsx)(D.Slot,{scope:s,children:(0,a.jsx)(f.WV.div,{...o,"data-orientation":l,ref:d,onKeyDown:n?void 0:g})})})}),G="AccordionItem",[K,$]=M(G),X=r.forwardRef((e,t)=>{let{__scopeAccordion:s,value:r,...n}=e,i=L(G,s),l=W(G,s),o=B(s),c=(0,j.M)(),d=r&&l.value.includes(r)||!1,m=i.disabled||e.disabled;return(0,a.jsx)(K,{scope:s,open:d,disabled:m,triggerId:c,children:(0,a.jsx)(S,{"data-orientation":i.orientation,"data-state":dist_getState(d),...o,...n,ref:t,disabled:m,open:d,onOpenChange:e=>{e?l.onItemOpen(r):l.onItemClose(r)}})})});X.displayName=G;var J="AccordionHeader",ee=r.forwardRef((e,t)=>{let{__scopeAccordion:s,...r}=e,n=L(k,s),i=$(J,s);return(0,a.jsx)(f.WV.h3,{"data-orientation":n.orientation,"data-state":dist_getState(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:t})});ee.displayName=J;var et="AccordionTrigger",es=r.forwardRef((e,t)=>{let{__scopeAccordion:s,...r}=e,n=L(k,s),i=$(et,s),l=Q(et,s),o=B(s);return(0,a.jsx)(D.ItemSlot,{scope:s,children:(0,a.jsx)(I,{"aria-disabled":i.open&&!l.collapsible||void 0,"data-orientation":n.orientation,id:i.triggerId,...o,...r,ref:t})})});es.displayName=et;var ea="AccordionContent",er=r.forwardRef((e,t)=>{let{__scopeAccordion:s,...r}=e,n=L(k,s),i=$(ea,s),l=B(s);return(0,a.jsx)(T,{role:"region","aria-labelledby":i.triggerId,"data-orientation":n.orientation,...l,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});function dist_getState(e){return e?"open":"closed"}er.displayName=ea;var en=s(83523),ei=s(81628);let el=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(X,{ref:t,className:(0,ei.cn)("border-b",s),...r})});el.displayName="AccordionItem";let eo=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsx)(ee,{className:"flex",children:(0,a.jsxs)(es,{ref:t,className:(0,ei.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...n,children:[r,(0,a.jsx)(en.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});eo.displayName=es.displayName;let ec=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsx)(er,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,a.jsx)("div",{className:(0,ei.cn)("pb-4 pt-0",s),children:r})})});ec.displayName=er.displayName;var ed=s(28350),em=s(50446);function SuggestionsPage(){let e=(0,n.useSearchParams)(),t=e.get("goalId"),[s,d]=(0,r.useState)([]),[m,u]=(0,r.useState)(!0),[p,x]=(0,r.useState)(new Set),{toast:f}=(0,em.pm)();(0,r.useEffect)(()=>{fetchSuggestions()},[t]);let fetchSuggestions=async()=>{try{let e=t?"/api/suggestions?goalId=".concat(t):"/api/suggestions",s=await fetch(e);if(s.ok){let e=await s.json();d(e.suggestions)}}catch(e){console.error("Failed to fetch suggestions:",e)}finally{u(!1)}},handleAccept=async e=>{try{let t=await fetch("/api/suggestions/".concat(e,"/accept"),{method:"POST"});t.ok&&(x(t=>new Set(t).add(e)),f({title:"Intro accepted",description:"Follow-up scheduled for next week"}),setTimeout(()=>{fetchSuggestions()},1e3))}catch(e){console.error("Failed to accept suggestion:",e),f({title:"Error",description:"Failed to accept suggestion",variant:"destructive"})}},handleSkip=e=>{d(t=>t.filter(t=>t.id!==e))},getScoreColor=e=>e>=80?"bg-green-100 text-green-800":e>=60?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",getStateColor=e=>{switch(e){case"proposed":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"sent":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},getInitials=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return m?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(ed.Navigation,{}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"text-center",children:"Loading suggestions..."})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(ed.Navigation,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Suggestions"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:t?"Filtered by goal":"All introduction recommendations"})]}),(0,a.jsx)("div",{className:"space-y-6",children:s.map(e=>(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.qE,{className:"h-10 w-10",children:(0,a.jsx)(c.Q5,{children:getInitials(e.personA.name)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.personA.name}),e.personA.title&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.personA.title}),e.personA.company&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.personA.company})]})]}),(0,a.jsx)("div",{className:"text-gray-400",children:"↔"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.qE,{className:"h-10 w-10",children:(0,a.jsx)(c.Q5,{children:getInitials(e.personB.name)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.personB.name}),e.personB.title&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.personB.title}),e.personB.company&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.personB.company})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.C,{className:getScoreColor(e.score),children:["Score: ",e.score]}),(0,a.jsx)(l.C,{className:getStateColor(e.state),children:e.state})]})]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[e.why&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Why This Match"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Recency:"}),(0,a.jsx)("span",{className:"ml-1 font-medium",children:e.why.recency})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Frequency:"}),(0,a.jsx)("span",{className:"ml-1 font-medium",children:e.why.frequency})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Affiliation:"}),(0,a.jsx)("span",{className:"ml-1 font-medium",children:e.why.affiliation})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Goal Alignment:"}),(0,a.jsx)("span",{className:"ml-1 font-medium",children:e.why.goalAlignment})]})]}),e.why.mutualInterests.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Mutual Interests:"}),(0,a.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-600 ml-2",children:e.why.mutualInterests.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})]}),e.draft&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Draft Messages"}),(0,a.jsxs)(V,{type:"single",collapsible:!0,className:"w-full",children:[(0,a.jsxs)(el,{value:"pre-intro",children:[(0,a.jsx)(eo,{className:"text-sm",children:"Pre-Intro Ping"}),(0,a.jsx)(ec,{children:(0,a.jsx)("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:e.draft.preIntroPing})})]}),(0,a.jsxs)(el,{value:"double-opt",children:[(0,a.jsx)(eo,{className:"text-sm",children:"Double-Opt Intro"}),(0,a.jsx)(ec,{children:(0,a.jsx)("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:e.draft.doubleOptIntro})})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:["proposed"===e.state&&!p.has(e.id)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.z,{onClick:()=>handleAccept(e.id),className:"flex-1",children:"Accept Intro"}),(0,a.jsx)(o.z,{variant:"outline",onClick:()=>handleSkip(e.id),children:"Skip"})]}),p.has(e.id)&&(0,a.jsx)(o.z,{variant:"outline",className:"flex-1",disabled:!0,children:"Accepted ✓"})]})]})]},e.id))}),0===s.length&&(0,a.jsx)(i.Zb,{className:"text-center py-12",children:(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"No suggestions found"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:t?"No suggestions for this goal yet":"Create goals and add people to your network to get introduction suggestions"})]})})]})]})}},49598:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var a=s(57437),r=s(2265),n=s(81628);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})});m.displayName="CardFooter"},50446:function(e,t,s){"use strict";s.d(t,{pm:function(){return useToast}});var a=s(2265);let r=0;function genId(){return(r=(r+1)%Number.MAX_SAFE_INTEGER).toString()}let n=new Map,addToRemoveQueue=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),dispatch({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},reducer=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?addToRemoveQueue(s):e.toasts.forEach(e=>{addToRemoveQueue(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],l={toasts:[]};function dispatch(e){l=reducer(l,e),i.forEach(e=>{e(l)})}function toast(e){let{...t}=e,s=genId(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:s});return dispatch({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||dismiss()}}}),{id:s,dismiss,update:e=>dispatch({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function useToast(){let[e,t]=a.useState(l);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast,dismiss:e=>dispatch({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[723,444,572,350,971,472,744],function(){return e(e.s=10013)}),_N_E=e.O()}]);