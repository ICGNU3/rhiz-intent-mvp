(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{2882:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},4043:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},29409:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},67674:function(e,t,s){Promise.resolve().then(s.bind(s,43782))},43782:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return VoiceChatPage}});var n=s(57437),r=s(2265),a=s(23611),i=s(49598),o=s(70708),c=s(29409),l=s(2882),d=s(4043),u=s(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,u.Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),m=(0,u.Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);var p=s(11718);let VoiceStreamManager=class VoiceStreamManager{async startStreaming(){try{p.k.info("Starting real-time voice streaming",{component:"voice-streaming"}),this.stream=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:this.config.sampleRate,channelCount:this.config.channels,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),this.ws=new WebSocket(this.wsUrl),this.setupWebSocketHandlers(),this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:16e3}),this.setupMediaRecorderHandlers(),this.mediaRecorder.start(100),this.isRecording=!0,p.k.info("Voice streaming started successfully",{component:"voice-streaming"})}catch(e){throw p.k.error("Failed to start voice streaming",e,{component:"voice-streaming"}),e}}setupWebSocketHandlers(){this.ws&&(this.ws.onopen=()=>{p.k.info("WebSocket connection established",{component:"voice-streaming"})},this.ws.onmessage=e=>{try{let t=JSON.parse(e.data);this.handleServerMessage(t)}catch(e){p.k.error("Failed to parse WebSocket message",e,{component:"voice-streaming"})}},this.ws.onerror=e=>{p.k.error("WebSocket error",e,{component:"voice-streaming"})},this.ws.onclose=()=>{p.k.info("WebSocket connection closed",{component:"voice-streaming"})})}setupMediaRecorderHandlers(){this.mediaRecorder&&(this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&(this.chunks.push(e.data),this.sendAudioChunk(e.data))},this.mediaRecorder.onstop=()=>{p.k.info("MediaRecorder stopped",{component:"voice-streaming"})},this.mediaRecorder.onerror=e=>{p.k.error("MediaRecorder error",e,{component:"voice-streaming"})})}async sendAudioChunk(e){if(this.ws&&this.ws.readyState===WebSocket.OPEN)try{let t=await e.arrayBuffer(),s=btoa(String.fromCharCode(...new Uint8Array(t)));this.ws.send(JSON.stringify({type:"audio_chunk",data:s,timestamp:Date.now(),format:"webm"}))}catch(e){p.k.error("Failed to send audio chunk",e,{component:"voice-streaming"})}}handleServerMessage(e){switch(e.type){case"transcription":this.emit("transcription",e);break;case"ai_response":this.emit("ai_response",e);break;case"audio_response":this.playAudioResponse(e.audio);break;case"error":p.k.error("Server error",e.error,{component:"voice-streaming"});break;default:p.k.warn("Unknown message type",{component:"voice-streaming",type:e.type})}}async playAudioResponse(e){try{let t=atob(e),s=new Uint8Array(t.length);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);let n=new Blob([s],{type:"audio/mpeg"}),r=URL.createObjectURL(n),a=new Audio(r);await a.play(),URL.revokeObjectURL(r)}catch(e){p.k.error("Failed to play audio response",e,{component:"voice-streaming"})}}stopStreaming(){p.k.info("Stopping voice streaming",{component:"voice-streaming"}),this.isRecording=!1,this.mediaRecorder&&(this.mediaRecorder.stop(),this.mediaRecorder=null),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.ws&&(this.ws.close(),this.ws=null),this.chunks=[]}emit(e,t){window.dispatchEvent(new CustomEvent("voice-stream:".concat(e),{detail:t}))}isStreaming(){return this.isRecording}getConnectionStatus(){if(!this.ws)return"disconnected";switch(this.ws.readyState){case WebSocket.CONNECTING:return"connecting";case WebSocket.OPEN:return"connected";default:return"disconnected"}}constructor(e,t){this.wsUrl=e,this.mediaRecorder=null,this.audioContext=null,this.stream=null,this.ws=null,this.isRecording=!1,this.chunks=[],this.config={sampleRate:16e3,channels:1,bitDepth:16,chunkSize:1024},this.config={...this.config,...t}}};function useVoiceStream(e){let[t,s]=(0,r.useState)(!1),[n,a]=(0,r.useState)("disconnected"),[i,o]=(0,r.useState)(""),[c,l]=(0,r.useState)(""),d=(0,r.useRef)(null);(0,r.useEffect)(()=>{d.current=new VoiceStreamManager(e);let handleTranscription=e=>{o(e.detail.text)},handleAiResponse=e=>{l(e.detail.text)};return window.addEventListener("voice-stream:transcription",handleTranscription),window.addEventListener("voice-stream:ai_response",handleAiResponse),()=>{var e;window.removeEventListener("voice-stream:transcription",handleTranscription),window.removeEventListener("voice-stream:ai_response",handleAiResponse),null===(e=d.current)||void 0===e||e.stopStreaming()}},[e]);let startStreaming=async()=>{try{var e;await (null===(e=d.current)||void 0===e?void 0:e.startStreaming()),s(!0)}catch(e){console.error("Failed to start streaming:",e)}};return{isStreaming:t,connectionStatus:n,transcription:i,aiResponse:c,startStreaming,stopStreaming:()=>{var e;null===(e=d.current)||void 0===e||e.stopStreaming(),s(!1)}}}function VoiceChatPage(){let[e,t]=(0,r.useState)([]),[s,u]=(0,r.useState)(!1),[g,f]=(0,r.useState)("professional"),[v,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),w=(0,r.useRef)(null);(0,r.useRef)(null);let j="wss://".concat(window.location.host,"/api/voice/stream"),{isStreaming:k,connectionStatus:N,transcription:S,aiResponse:R,startStreaming:C,stopStreaming:M}=useVoiceStream(j);(0,r.useEffect)(()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e]),(0,r.useEffect)(()=>{S&&S.trim()&&addMessage("user",S)},[S]),(0,r.useEffect)(()=>{R&&R.trim()&&addMessage("ai",R)},[R]),(0,r.useEffect)(()=>{u("connected"===N),"disconnected"===N&&k&&b("Connection lost. Please try reconnecting.")},[N,k]);let addMessage=(e,s,n)=>{let r={id:crypto.randomUUID(),type:e,text:s,timestamp:new Date,audioUrl:n};t(e=>[...e,r])},handleStartConversation=async()=>{try{b(null),await C(),addMessage("ai","Hello! I'm your AI networking assistant. I'm here to help you build meaningful connections. What would you like to discuss?"),p.k.info("Voice conversation started",{component:"voice-chat"})}catch(e){b("Failed to start conversation. Please check your microphone permissions."),p.k.error("Failed to start voice conversation",e,{component:"voice-chat"})}};return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Voice Chat"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Real-time AI-powered networking conversations"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full ".concat((()=>{switch(N){case"connected":return"bg-green-500";case"connecting":return"bg-yellow-500";default:return"bg-red-500"}})())}),(0,n.jsx)("span",{className:"text-sm text-gray-600",children:(()=>{switch(N){case"connected":return"Connected";case"connecting":return"Connecting...";default:return"Disconnected"}})()})]}),(0,n.jsx)(o.C,{variant:"outline",className:"text-xs",children:g.charAt(0).toUpperCase()+g.slice(1)}),(0,n.jsx)(a.z,{variant:"outline",size:"sm",onClick:()=>x(!v),children:(0,n.jsx)(c.Z,{className:"w-4 h-4"})})]})]}),v&&(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{className:"text-lg",children:"Voice Settings"})}),(0,n.jsx)(i.aY,{className:"space-y-4",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Voice Personality"}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["professional","friendly","enthusiastic","calm"].map(e=>(0,n.jsx)(a.z,{variant:g===e?"default":"outline",size:"sm",onClick:()=>f(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})})]}),y&&(0,n.jsx)(i.Zb,{className:"border-red-200 bg-red-50",children:(0,n.jsx)(i.aY,{className:"pt-6",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-red-700",children:[(0,n.jsx)("span",{className:"text-sm",children:y}),(0,n.jsx)(a.z,{variant:"ghost",size:"sm",onClick:()=>b(null),children:"\xd7"})]})})}),(0,n.jsx)(i.Zb,{className:"flex-1 min-h-[500px]",children:(0,n.jsx)(i.aY,{className:"p-6",children:(0,n.jsxs)("div",{className:"space-y-4 h-[500px] overflow-y-auto",children:[0===e.length?(0,n.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(l.Z,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,n.jsx)("p",{children:"No messages yet. Start a conversation to begin!"})]})}):e.map(e=>(0,n.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,n.jsxs)("div",{className:"max-w-[80%] rounded-lg px-4 py-2 ".concat("user"===e.type?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"),children:[(0,n.jsx)("p",{className:"text-sm",children:e.text}),(0,n.jsx)("p",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString()})]})},e.id)),(0,n.jsx)("div",{ref:w})]})})}),(0,n.jsx)(i.Zb,{children:(0,n.jsxs)(i.aY,{className:"p-6",children:[(0,n.jsx)("div",{className:"flex items-center justify-center space-x-4",children:k?(0,n.jsxs)(a.z,{onClick:()=>{M(),addMessage("ai","Conversation ended. I've saved our discussion and any insights we discovered. Feel free to start a new conversation anytime!"),p.k.info("Voice conversation ended",{component:"voice-chat"})},variant:"destructive",className:"px-8 py-3 rounded-full",children:[(0,n.jsx)(h,{className:"w-5 h-5 mr-2"}),"End Conversation"]}):(0,n.jsxs)(a.z,{onClick:handleStartConversation,disabled:!s,className:"bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-full",children:[(0,n.jsx)(d.Z,{className:"w-5 h-5 mr-2"}),"Start Conversation"]})}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-6 mt-4 text-sm text-gray-600",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(k?"bg-red-500 animate-pulse":"bg-gray-300")}),(0,n.jsx)("span",{children:k?"Recording":"Not Recording"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(m,{className:"w-4 h-4"}),(0,n.jsxs)("span",{children:["AI Voice: ",g]})]}),(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsxs)("span",{children:["Messages: ",e.length]})})]})]})}),(0,n.jsx)(i.Zb,{className:"bg-blue-50 border-blue-200",children:(0,n.jsxs)(i.aY,{className:"p-4",children:[(0,n.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"How to use Voice Chat:"}),(0,n.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,n.jsx)("li",{children:'• Click "Start Conversation" to begin talking with your AI assistant'}),(0,n.jsx)("li",{children:"• Speak naturally about your networking goals, people you've met, or opportunities"}),(0,n.jsx)("li",{children:"• The AI will transcribe your speech and respond with helpful insights"}),(0,n.jsx)("li",{children:"• All conversations are automatically saved and analyzed for networking insights"}),(0,n.jsx)("li",{children:"• Use the voice settings to change the AI's personality and tone"})]})]})})]})})}},70708:function(e,t,s){"use strict";s.d(t,{C:function(){return Badge}});var n=s(57437);s(2265);var r=s(96061),a=s(81628);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:t,variant:s,...r}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:s}),t),...r})}},23611:function(e,t,s){"use strict";s.d(t,{z:function(){return l}});var n=s(57437),r=s(2265),a=s(67256),i=s(96061),o=s(81628);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:l=!1,...d}=e,u=l?a.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(c({variant:r,size:i,className:s})),ref:t,...d})});l.displayName="Button"},49598:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var n=s(57437),r=s(2265),a=s(81628);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...r})});o.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...r})});l.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},11718:function(e,t,s){"use strict";var n,r;s.d(t,{k:function(){return a}}),(r=n||(n={}))[r.DEBUG=0]="DEBUG",r[r.INFO=1]="INFO",r[r.WARN=2]="WARN",r[r.ERROR=3]="ERROR";let Logger=class Logger{formatMessage(e,t,s){let n=new Date().toISOString(),r=s?" ".concat(JSON.stringify(s)):"";return"[".concat(n,"] ").concat(e,": ").concat(t).concat(r)}shouldLog(e){return e>=this.level}debug(e,t){this.shouldLog(0)&&this.isDevelopment&&console.log(this.formatMessage("DEBUG",e,t))}info(e,t){this.shouldLog(1)&&console.log(this.formatMessage("INFO",e,t))}warn(e,t){this.shouldLog(2)&&console.warn(this.formatMessage("WARN",e,t))}error(e,t,s){if(this.shouldLog(3)){let n={...s,error:null==t?void 0:t.message,stack:null==t?void 0:t.stack};console.error(this.formatMessage("ERROR",e,n))}}api(e,t,s,n,r){this.info("API ".concat(t," ").concat(e," - ").concat(s).concat(n?" (".concat(n,"ms)"):""),{...r,component:"api",route:e,method:t,status:s,duration:n})}ai(e,t,s,n){this.info("AI ".concat(e).concat(t?" (".concat(t,")"):"").concat(s?" (".concat(s,"ms)"):""),{...n,component:"ai",operation:e,model:t,duration:s})}user(e,t,s,n){this.info("User ".concat(t),{...n,component:"user",userId:e,action:t,details:s})}constructor(){this.level=1,this.isDevelopment=!1}};let a=new Logger},81628:function(e,t,s){"use strict";s.d(t,{cn:function(){return cn}});var n=s(57042),r=s(74769);function cn(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,n.W)(t))}}},function(e){e.O(0,[723,971,472,744],function(){return e(e.s=67674)}),_N_E=e.O()}]);