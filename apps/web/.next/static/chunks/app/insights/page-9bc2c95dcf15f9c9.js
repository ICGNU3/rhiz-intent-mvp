(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[341],{64280:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},85790:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},77787:function(e,s,t){Promise.resolve().then(t.bind(t,84495))},84495:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return InsightsPage}});var a=t(57437),i=t(2265),n=t(49598),r=t(23611),l=t(70708),c=t(85744),d=t(56989),o=t(44356),h=t(85606),u=t(9381),x=t(65400),m=t(73763),g=t(20966),p="Tabs",[f,j]=(0,d.b)(p,[o.Pc]),v=(0,o.Pc)(),[N,y]=f(p),b=i.forwardRef((e,s)=>{let{__scopeTabs:t,value:i,onValueChange:n,defaultValue:r,orientation:l="horizontal",dir:c,activationMode:d="automatic",...o}=e,h=(0,x.gm)(c),[f,j]=(0,m.T)({prop:i,onChange:n,defaultProp:r??"",caller:p});return(0,a.jsx)(N,{scope:t,baseId:(0,g.M)(),value:f,onValueChange:j,orientation:l,dir:h,activationMode:d,children:(0,a.jsx)(u.WV.div,{dir:h,"data-orientation":l,...o,ref:s})})});b.displayName=p;var w="TabsList",k=i.forwardRef((e,s)=>{let{__scopeTabs:t,loop:i=!0,...n}=e,r=y(w,t),l=v(t);return(0,a.jsx)(o.fC,{asChild:!0,...l,orientation:r.orientation,dir:r.dir,loop:i,children:(0,a.jsx)(u.WV.div,{role:"tablist","aria-orientation":r.orientation,...n,ref:s})})});k.displayName=w;var C="TabsTrigger",I=i.forwardRef((e,s)=>{let{__scopeTabs:t,value:i,disabled:n=!1,...r}=e,l=y(C,t),d=v(t),h=makeTriggerId(l.baseId,i),x=makeContentId(l.baseId,i),m=i===l.value;return(0,a.jsx)(o.ck,{asChild:!0,...d,focusable:!n,active:m,children:(0,a.jsx)(u.WV.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":x,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:h,...r,ref:s,onMouseDown:(0,c.Mj)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(i)}),onKeyDown:(0,c.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(i)}),onFocus:(0,c.Mj)(e.onFocus,()=>{let e="manual"!==l.activationMode;m||n||!e||l.onValueChange(i)})})})});I.displayName=C;var Z="TabsContent",S=i.forwardRef((e,s)=>{let{__scopeTabs:t,value:n,forceMount:r,children:l,...c}=e,d=y(Z,t),o=makeTriggerId(d.baseId,n),x=makeContentId(d.baseId,n),m=n===d.value,g=i.useRef(m);return i.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(h.z,{present:r||m,children:({present:t})=>(0,a.jsx)(u.WV.div,{"data-state":m?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":o,hidden:!t,id:x,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:g.current?"0s":void 0},children:t&&l})})});function makeTriggerId(e,s){return`${e}-trigger-${s}`}function makeContentId(e,s){return`${e}-content-${s}`}S.displayName=Z;var D=t(81628);let _=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(k,{ref:s,className:(0,D.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...i})});_.displayName=k.displayName;let T=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(I,{ref:s,className:(0,D.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...i})});T.displayName=I.displayName;let O=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(S,{ref:s,className:(0,D.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...i})});O.displayName=S.displayName;var R=t(28350),M=t(66654),z=t(25750),V=t(85790),A=t(8759),F=t(64280),P=t(29764),Y=t(62898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let L=(0,Y.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function InsightsPage(){let[e,s]=(0,i.useState)([]),[t,c]=(0,i.useState)([]),[d,o]=(0,i.useState)([]),[h,u]=(0,i.useState)([]),[x,m]=(0,i.useState)(!0),[g,p]=(0,i.useState)("insights");(0,i.useEffect)(()=>{loadData()},[]);let loadData=async()=>{try{m(!0);let e=await fetch("/api/graph/insights");if(e.ok){let t=await e.json();s(t.insights)}let t=await fetch("/api/insights/shared");if(t.ok){let e=await t.json();c(e.sharedInsights)}let a=await fetch("/api/insights/overlaps");if(a.ok){let e=await a.json();o(e.overlaps)}let i=await fetch("/api/insights/opportunities");if(i.ok){let e=await i.json();u(e.opportunities)}}catch(e){console.error("Failed to load insights data:",e)}finally{m(!1)}},generateInsights=async()=>{try{let e=await fetch("/api/graph/insights",{method:"POST"});e.ok&&await loadData()}catch(e){console.error("Failed to generate insights:",e)}},shareInsight=async e=>{try{let s=await fetch("/api/insights/shared",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({insightId:e,sharedWith:"workspace",visibility:"workspace"})});s.ok&&await loadData()}catch(e){console.error("Failed to share insight:",e)}},activateOpportunity=async e=>{try{let s=await fetch("/api/insights/opportunities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({opportunityId:e,action:"activate"})});s.ok&&await loadData()}catch(e){console.error("Failed to activate opportunity:",e)}},getInsightIcon=e=>{switch(e){case"opportunity_gap":case"goal_alignment_gap":return(0,a.jsx)(M.Z,{className:"h-4 w-4"});case"bridge_builder":return(0,a.jsx)(z.Z,{className:"h-4 w-4"});case"cluster_insight":return(0,a.jsx)(V.Z,{className:"h-4 w-4"});default:return(0,a.jsx)(A.Z,{className:"h-4 w-4"})}},getInsightColor=e=>{switch(e){case"opportunity_gap":return"bg-orange-100 text-orange-800";case"bridge_builder":return"bg-blue-100 text-blue-800";case"cluster_insight":return"bg-green-100 text-green-800";case"goal_alignment_gap":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return x?(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(R.Navigation,{}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading insights..."})]})})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(R.Navigation,{}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Graph Insights"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"AI-generated insights about your network and opportunities"})]}),(0,a.jsxs)(r.z,{onClick:generateInsights,className:"flex items-center gap-2",children:[(0,a.jsx)(F.Z,{className:"h-4 w-4"}),"Generate Insights"]})]}),(0,a.jsxs)(b,{value:g,onValueChange:p,children:[(0,a.jsxs)(_,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(T,{value:"insights",children:"My Insights"}),(0,a.jsx)(T,{value:"shared",children:"Shared Insights"}),(0,a.jsx)(T,{value:"overlaps",children:"Overlaps"}),(0,a.jsx)(T,{value:"opportunities",children:"Opportunities"})]}),(0,a.jsx)(O,{value:"insights",className:"mt-6",children:(0,a.jsx)("div",{className:"grid gap-6",children:0===e.length?(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(A.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No insights available yet."}),(0,a.jsx)(r.z,{onClick:generateInsights,className:"mt-4",children:"Generate Insights"})]})})}):e.map(e=>(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[getInsightIcon(e.type),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ll,{className:"text-lg",children:e.title}),(0,a.jsx)(l.C,{className:getInsightColor(e.type),children:e.type.replace("_"," ")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.C,{variant:"secondary",children:["Score: ",e.score]}),(0,a.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>shareInsight(e.id),children:(0,a.jsx)(P.Z,{className:"h-4 w-4"})})]})]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)(n.SZ,{className:"text-base mb-4",children:e.detail}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.provenance?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["Generated from: ",e.provenance.metric]}),(0,a.jsxs)("p",{children:["Reason: ",e.provenance.reason_generated]})]}):(0,a.jsx)("p",{children:"Generated from: AI analysis"})}),(0,a.jsxs)(r.z,{children:["Take Action",(0,a.jsx)(L,{className:"h-4 w-4 ml-2"})]})]})]})]},e.id))})}),(0,a.jsx)(O,{value:"shared",className:"mt-6",children:(0,a.jsx)("div",{className:"grid gap-6",children:0===t.length?(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(P.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No shared insights yet."})]})})}):t.map(e=>{var s,t;return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.insight&&getInsightIcon(e.insight.type),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ll,{className:"text-lg",children:(null===(s=e.insight)||void 0===s?void 0:s.title)||"Shared Insight"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.insight&&(0,a.jsx)(l.C,{className:getInsightColor(e.insight.type),children:e.insight.type.replace("_"," ")}),(0,a.jsxs)(l.C,{variant:"outline",children:["Shared by ",e.sharedBy]})]})]})]}),e.insight&&(0,a.jsxs)(l.C,{variant:"secondary",children:["Score: ",e.insight.score]})]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)(n.SZ,{className:"text-base mb-4",children:(null===(t=e.insight)||void 0===t?void 0:t.detail)||"Insight details not available"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsxs)("p",{children:["Visibility: ",e.visibility]}),(0,a.jsxs)("p",{children:["Shared: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)(r.z,{children:["View Details",(0,a.jsx)(L,{className:"h-4 w-4 ml-2"})]})]})]})]},e.id)})})}),(0,a.jsx)(O,{value:"overlaps",className:"mt-6",children:(0,a.jsx)("div",{className:"grid gap-6",children:0===d.length?(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(z.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No cross-workspace overlaps found."})]})})}):d.map(e=>{var s;return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(z.Z,{className:"h-5 w-5"}),"Cross-Workspace Overlap"]})}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.person}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Appears in ",(null===(s=e.workspaces)||void 0===s?void 0:s.length)||0," workspaces"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.C,{variant:"outline",children:e.overlapType}),(0,a.jsxs)(l.C,{variant:"secondary",children:["Confidence: ",e.confidence,"%"]})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Detected: ",new Date(e.detectedAt).toLocaleDateString()]}),(0,a.jsxs)(r.z,{children:["Sync Notes",(0,a.jsx)(L,{className:"h-4 w-4 ml-2"})]})]})})]},e.id)})})}),(0,a.jsx)(O,{value:"opportunities",className:"mt-6",children:(0,a.jsx)("div",{className:"grid gap-6",children:0===h.length?(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(V.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No collective opportunities found."})]})})}):h.map(e=>{var s,t;return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(V.Z,{className:"h-5 w-5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ll,{className:"text-lg",children:e.title}),(0,a.jsx)(l.C,{variant:"outline",children:e.type.replace("_"," ")})]})]}),(0,a.jsxs)(l.C,{variant:"secondary",children:["Score: ",e.score]})]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)(n.SZ,{className:"text-base mb-4",children:e.description}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsxs)("p",{children:["Workspaces: ",(null===(s=e.workspaces)||void 0===s?void 0:s.length)||0]}),(0,a.jsxs)("p",{children:["Clusters: ",(null===(t=e.clusters)||void 0===t?void 0:t.length)||0]}),(0,a.jsxs)("p",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.z,{onClick:()=>activateOpportunity(e.id),children:"Add to Goal"}),(0,a.jsx)(r.z,{variant:"outline",children:"View Details"})]})]})]})]},e.id)})})})]})]})]})}},49598:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return r},aY:function(){return o},ll:function(){return c}});var a=t(57437),i=t(2265),n=t(81628);let r=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...i})});r.displayName="Card";let l=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...i})});l.displayName="CardHeader";let c=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...i})});c.displayName="CardTitle";let d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...i})});d.displayName="CardDescription";let o=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...i})});o.displayName="CardContent";let h=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...i})});h.displayName="CardFooter"}},function(e){e.O(0,[723,444,572,350,971,472,744],function(){return e(e.s=77787)}),_N_E=e.O()}]);